var mt=Object.defineProperty;var yt=(n,t,e)=>t in n?mt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>(yt(n,typeof t!="symbol"?t+"":t,e),e);const xt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}};xt();var wt={};(function(n){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(d){return s(u(d),arguments)}function i(d,f){return e.apply(null,[d].concat(f||[]))}function s(d,f){var g=1,Z=d.length,l,O="",y,v,c,he,ke,Ie,De,J;for(y=0;y<Z;y++)if(typeof d[y]=="string")O+=d[y];else if(typeof d[y]=="object"){if(c=d[y],c.keys)for(l=f[g],v=0;v<c.keys.length;v++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[v],c.keys[v-1]));l=l[c.keys[v]]}else c.param_no?l=f[c.param_no]:l=f[g++];if(t.not_type.test(c.type)&&t.not_primitive.test(c.type)&&l instanceof Function&&(l=l()),t.numeric_arg.test(c.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(t.number.test(c.type)&&(De=l>=0),c.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,c.width?parseInt(c.width):0);break;case"e":l=c.precision?parseFloat(l).toExponential(c.precision):parseFloat(l).toExponential();break;case"f":l=c.precision?parseFloat(l).toFixed(c.precision):parseFloat(l);break;case"g":l=c.precision?String(Number(l.toPrecision(c.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=c.precision?l.substring(0,c.precision):l;break;case"t":l=String(!!l),l=c.precision?l.substring(0,c.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=c.precision?l.substring(0,c.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=c.precision?l.substring(0,c.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}t.json.test(c.type)?O+=l:(t.number.test(c.type)&&(!De||c.sign)?(J=De?"+":"-",l=l.toString().replace(t.sign,"")):J="",ke=c.pad_char?c.pad_char==="0"?"0":c.pad_char.charAt(1):" ",Ie=c.width-(J+l).length,he=c.width&&Ie>0?ke.repeat(Ie):"",O+=c.align?J+l+he:ke==="0"?J+he+l:he+J+l)}return O}var a=Object.create(null);function u(d){if(a[d])return a[d];for(var f=d,g,Z=[],l=0;f;){if((g=t.text.exec(f))!==null)Z.push(g[0]);else if((g=t.modulo.exec(f))!==null)Z.push("%");else if((g=t.placeholder.exec(f))!==null){if(g[2]){l|=1;var O=[],y=g[2],v=[];if((v=t.key.exec(y))!==null)for(O.push(v[1]);(y=y.substring(v[0].length))!=="";)if((v=t.key_access.exec(y))!==null)O.push(v[1]);else if((v=t.index_access.exec(y))!==null)O.push(v[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");g[2]=O}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");Z.push({placeholder:g[0],param_no:g[1],keys:g[2],sign:g[3],pad_char:g[4],align:g[5],width:g[6],precision:g[7],type:g[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");f=f.substring(g[0].length)}return a[d]=Z}n.sprintf=e,n.vsprintf=i,typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=i)})()})(wt);function bt(n){return new Promise(t=>{setTimeout(()=>{t()},n)})}String.prototype.camelKabob=function(){let n="";return this.split("").map(t=>{n+=t.toUpperCase()==t?`-${t.toLowerCase()}`:t}),n};String.prototype.kabobCamel=function(){return this.replace(/-./g,n=>n[1].toUpperCase())};function kt(n,t,e){if(t.value==null){console.warn(`initStorage FAIL name:${n} target:${t}`);return}const i=localStorage.getItem(n);if(i!=null)return t.value=parseFloat(i),console.log(`initStorage ${n}:${t.value} data:${parseFloat(i)}`),t.value;if(e==null)localStorage.setItem(n,Number(t.value)),console.warn(`initStorage none:${n}, target:${t.value}`),t.onDefault!=null&&t.onDefault();else return localStorage.setItem(n,Number(e)),console.warn(`initStorage none:${n}, default:${e}`),t.value=e,e}function It(n){const t=n.split(".");let e="";for(let i in t)e+=i!=1?t[i]:Number("0x"+t[1]),i<t.length-1&&(e+=".");return e}var G={delay:bt,initStorage:kt,versionString:It};let oe;function Dt(){document.body.insertAdjacentHTML("beforeend",'<svg height="0" width="0" style="visibility: hidden"></svg>'),oe=document.body.lastChild}function Lt(n,t){oe.insertAdjacentHTML("beforeend",'<symbol id="" viewBox="0 0 100 100"></symbol>'),oe.lastChild.id="sym_"+n,oe.lastChild.innerHTML=t}function Et(n){oe.insertAdjacentHTML("beforeend",n)}Dt();var h={add:Lt,def:Et};function $t(){h.add("warn_ui",`<g stroke-width="12" stroke-linecap="round" stroke-linejoin="round" >  
      <polygon stroke="var(--icon-fg)" fill="var(--icon-fg)" points="50 12.69 7.5 86.31 92.5 86.31 50 12.69" />
      <g>
        <polyline stroke="var(--icon-bg)" fill="none" points="50 55 50 32" />
        <circle fill="var(--icon-bg)" stroke="none" cx="50" cy="78" r="7" />
      </g>    
    </g>`),h.add("warn_text",`<g stroke="var(--icon-fg)" fill="none">
      <path stroke-width="6px" stroke-linejoin="round" d="M66,91.39H90.59A6.2,6.2,0,0,0,96,82.08L55.37,11.78a6.2,6.2,0,0,0-10.74,0L4,82.08a6.2,6.2,0,0,0,5.37,9.31H34" />    
      <polyline stroke-width="14px" points="50 73 50 55.5 50 38" />
      <polyline stroke-width="14px" points="50 94.5 50 80.5" />
    </g>`),h.add("hit",`<defs>
      <radialGradient id="grad">
        <stop offset="0%" stop-color="rgb(0,0,0,1)" />
        <stop offset="33%" stop-color="rgb(0,0,0,0.3)" />
        <stop offset="90%" stop-color="transparent" />
      </radialGradient>
    </defs>
    <g transform="translate(50 50)">
      <circle fill="url('#grad')" stroke-width="4px" stroke="var(--icon-bg)" cx="0" cy="0" r="48" />
    </g>`),h.add("halo",`<g transform="translate(50 50)">
      <circle fill="none" stroke-width="4px" stroke="var(--icon-fg)" cx="0" cy="0" r="48" />
    </g>`),h.add("show",`<g fill="var(--icon-fg)">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM50,31A19,19,0,1,0,69,50,19,19,0,0,0,50,31Zm0,9A10,10,0,1,0,60,50,10,10,0,0,0,50,40Z" />
    </g>`),h.add("hide",`<g fill="var(--icon-fg)" stroke="none">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM89.82,50C79.39,38.17,63.45,30,50,30S20.62,38.17,10.19,50C20.62,61.83,36.55,70,50,70S79.39,61.83,89.82,50Z" />
      <circle cx="50" cy="50" r="14" />
    </g>
    <g stroke-linecap="butt" transform="translate(50 50) rotate(45)">
      <line stroke="var(--icon-bg)" stroke-width="16" x1="-40" y1="0" x2="40" y2="0" />
      <line stroke="var(--icon-fav)" stroke-width="5" x1="-50" y1="0" x2="50" y2="0" />
    </g>`),h.add("wifi_def",`<g fill="none">
      <circle stroke="var(--icon-fg)" stroke-width="16" cx="0" cy="0" r="8"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="32"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="52"></circle>
   </g>`),h.add("wifi",`<g transform="translate(50, 84) rotate(-135) scale(1.25)">
      <use href="#sym_wifi_def" />
    </g>`),h.add("info",`<g stroke="var(--icon-fg)" fill="none">
      <circle stroke-width="5" cx="50" cy="50" r="47.5"></circle>
      <g stroke-width="16" transform="translate(11) skewX(-12)">
        <line x1="50" y1="82" x2="50" y2="44" />
        <line x1="50" y1="34" x2="50" y2="18" />
      </g>
    </g>`),h.add("help",`<g transform="translate(50 50)" stroke="none">
      <path d="M8.6,33.2H-8.6V23.6H8.6Zm12-60.4H-20.6c-5,0-10.3,3.6-10.3,8.3v8.8h16.5v-10H14.4v18H.7c-5.6,0-9.3,3.5-9.3,9.4v9.1H8.6V7.9c0-2.7,1-3.3,3.7-3.3h8.3C25.2,4.6,30.9.8,30.9-4V-18.9C30.9-23.6,25.6-27.2,20.6-27.2Z" /> 
    </g>`),h.add("help_button",`<g>
      <use href="#sym_halo" />
      <use href="#sym_help" />
    </g>`),h.add("tap",`<g>
      <polygon fill="var(--icon-fg)" stroke="none" points="86.76 0 66.96 0 49.87 17.09 32.84 0 13.08 0 49.85 36.91 86.76 0" />
      <g stroke="var(--icon-fg)">
        <line stroke-width="14px" y1="50" x2="100" y2="50" />
        <g stroke-width="10px" >
          <line class="cls-3" x1="50" y1="100" x2="50" y2="77" />
          <line class="cls-3" x1="14.64" y1="85.36" x2="30.91" y2="69.09" />
          <line class="cls-3" x1="85.36" y1="85.36" x2="69.09" y2="69.09" />
        </g>
      </g>
    </g>`),h.add("twirl",`<g fill="var(--icon-fg)" stroke="none">
    <polygon points="0,88 100,88 50,0"/>
  </g>`),h.add("refresh",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <polyline points="3.536 52.75 19.036 37.25 34.536 52.75" transform="translate(-49.75 -48)" />
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),h.add("refresh_run",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),h.add("undo",`<g transform="scale(-1 1) translate(-100 0)" stroke="var(--icon-fg)" stroke-width="8" fill="none">
      <polyline points="46.21 53.21 30 37 46.21 20.79" />
      <path d="M33,79H60.48a21,21,0,1,0,0-42H30" />
      <line x1="18" y1="18" x2="18" y2="56" />
    </g>`),h.add("dot",`<g transform="translate(50, 50)">
      <circle fill="var(--icon-fg)" cx="0" cy="0" r="50"></circle>
    </g>`),h.add("o",`<g transform="translate(50, 50)">
      <circle stroke="var(--icon-fg)" stroke-width="22" fill="none" cx="0" cy="0" r="39"></circle>
    </g>`),h.add("x",`<g stroke="var(--icon-fg)" stroke-width="22">
        <line x1="12" y1="12" x2="88" y2="88"></line>
        <line x1="12" y1="88" x2="88" y2="12"></line>
    </g>`),h.add("bar_1",`<g transform="translate(0, 0)">
      <line stroke="var(--icon-fg)" stroke-width="22" x1="50" y1="0" x2="50" y2="100"></line>
    </g>`),h.add("bar_2",`<g stroke="var(--icon-fg)" stroke-width="22" transform="translate(0, 0)">
      <line x1="20" y1="0" x2="20" y2="100"></line>
      <line x1="80" y1="0" x2="80" y2="100"></line>
    </g>`),h.add("vol_wave_0",`<g transform="translate(0, 0)">
      <g transform="scale(0.5) translate(100, 50)">
        <use href="#sym_x" />
      </g>
    </g>`),h.add("vol_wave_1",`<g transform="translate(0, 0)">
      <path stroke="var(--icon-fg)" stroke-width="10" fill="none" d="M62.7,31.63a28.5,28.5,0,0,1-.45,36.29"/>
     </g>`),h.add("vol_wave_2",`<g transform="translate(0, 0)">
      <use href="#sym_vol_wave_1" />
      <path stroke="var(--icon-fg)" stroke-width="12" fill="none" d="M80.21,14.44a52.94,52.94,0,0,1-.06,71.07"/>
     </g >`),h.add("lock",`<g>
      <path transform="translate(62 55)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
      </g>`),h.add("unlock",`<g>
      <path transform="translate(25 50)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
    </g>`),h.add("bell",`<g transform="translate(5 10)" stroke-width="10" stroke="var(--icon-fg)" fill="none">
      <g transform="translate(-7 -9.73)">
        <path d="M60.59,74a11,11,0,1,1-21.18,0Z" />
        <path d="M79,73,68.5,33.16C67.31,29,63.94,26,59.7,26H40.63a9.42,9.42,0,0,0-8.8,7.12L21.33,73" />
      </g>
      <line x1="43" y1="19.31" x2="43" />
      <line y1="63.27" x2="86" y2="63.27" />
    </g>`),h.add("tna_hex",`<g stroke="var(--icon-fg)" fill="none">
        <polygon points="88.97 72.5 50 95 11.03 72.5 11.03 27.5 50 5 88.97 27.5 88.97 72.5" />
    </g>`),h.add("tna_n",`<g stroke="var(--icon-fg)" fill="none">
        <polyline stroke-linecap="round" stroke-linejoin="round" points="28.71 61.84 28.71 38.16 71.29 61.84 71.29 38.16" />
    </g>`),h.add("tna",`<g>
      <use href="#sym_tna_hex" />
      <use href="#sym_tna_n" />
    </g>`),h.add("warn_tna",`<g fill="var(--icon-fg)" stroke="none" transform="translate(50, 50)">
      <path d="M-17-25.7l-8.2-14.2,4.7-2.7h41l4.7,2.7L17-25.7l16.5,9.5,8.2-14.2L50-25.6l-24.8,43H9.5v-30h-19v30H-25.2L-50-25.6l8.3-4.8,8.2,14.2Zm22.5,52h-11l-9.4,16.3H14.9Z"/>
    </g>`)}$t();function Ct(){h.add("button_L",`<g>
      <circle fill="var(--icon-fg)" cx="50" cy="50" r="50"></circle>
      <path fill="var(--icon-bg)" transform="translate(14) skewX(-12)" d="M26.06,23.17H40.84V63H74.08V76.75h-48Z" />
    </g>`),h.add("button_R",`<g>
      <circle fill="var(--icon-fg)" cx="50" cy="50" r="50"></circle>
      <path fill="var(--icon-bg)" transform="translate(12) skewX(-12)" d="M23.96,23.17H62.59c11.39,0,14.45,6.29,14.45,15.91v3.4c0,7.18-1.47,11.4-8.26,13.17v.15c4.4,.89,8.06,3.03,8.06,11.84v9.1h-14.79v-6.44c0-5.62-1.47-7.47-6.06-7.47h-17.24v13.91h-14.79V23.17Zm14.79,26.35h18.44c4,0,5.46-1.78,5.46-5.62v-1.78c0-4.74-2.13-5.62-6.79-5.62h-17.11v13.02Z"> </g>`),h.add("repeat",`<g fill="var(--icon-fg)" stroke="none">
      <circle cx="15" cy="50" r="24"></circle>
      <circle cx="70" cy="50" r="12"></circle>
    </g>`),h.add("button_seq",`<g stroke="var(--icon-fg)" stroke-width="12" stroke-opacity="0.5" fill="none">
      <line x1="50" y1="0" x2="50" y2="100" />
    </g>`),h.add("button_seq_end",`<g stroke="var(--icon-fg)" stroke-width="12" stroke-opacity="0.5" fill="none">
      <line x1="50" y1="0" x2="50" y2="30" />
      <line x1="50" y1="45" x2="50" y2="70" />
      <line x1="50" y1="85" x2="50" y2="100" />
    </g>`),h.add("arrow",`<g stroke="var(--icon-fg)" fill="none">
      <line x1="0" y1="50" x2="88" y2="50" />
      <polyline points="52 86 88 50 52 14" />
    </g>`),h.add("guide",`<g transform="translate(0 -3)">
      <g stroke-width="7px" stroke="var(--icon-fg)" fill="none">
        <path d="M96,26.5v66H70.18c-6.81,0-11.42,3-14.09,7H43.91c-2.67-4-7.28-7-14.09-7H4v-66" />
      </g>
      <g fill="var(--icon-fg)" stroke="none">
        <path d="M67.18,15.5H86v67H69c-8.12,0-13.14,2.93-15.75,6v-68c2.67-3,7.12-5,13.93-5" />
        <path d="M46.75,21.5c0-11.34-6.84-18-19.25-18v65c11.76,0,17.56,8.33,19.25,20Z" />
        <path d="M27.5,75.5h-7v-60H14v67H31a27,27,0,0,1,7.35,1C35.73,76.45,31.07,75.5,27.5,75.5Z" />
      </g>
    </g>`)}Ct();const Ge=["ping","call","ux","info","push","save","sync"],Ve=["call_prime","call_console","call_tune","call_warn","call_restart","call_admin","call_photo","call_gps_log"],Ot=["none","default","notify","toggle_on","toggle_off","alarm","close_encounter","charge_fanfare","bonanza","guantanamera","rhythm_dancer"],Tt=["OK",'"index.html" served from FS'],Ze=["null","sys_splash","sys_boot","sys_ap","sys_ota","sys_restart","sys_fail","reset_user","reset_admin","net_setup","net_menu","net_fail","set_bright","set_sound","tap_menu","tap_test","tap_notify","clock_static","clock_hide","clock_switch","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","alarm_menu","alarm_set","alarm_notify","alarm_snooze","diag_info","diag_serial","diag_console","diag_net","diag_net_mac","diag_gps","diag_led","photo"],Je=["idle","init","begin","splash","prime","ready","run","update","wait","confirm","notify","commit","end","exit","cancel","expire","fail"],We=["info_rc","info_user","info_mfg","info_reg","info_hardware","info_firmware","info_install","info_uptime","info_net","info_rssi","info_display","info_status","info_tap","info_ntp","info_gps","info_gps_log"],Ye=["admin_sign","admin_fpo","ota_version","ota_version_fs","ota_time","ota_time_fs","ota_fpo","mfg_product","mfg_version","mfg_date","mfg_serial","mfg_logic","mfg_display","mfg_color","mfg_note","mfg_fpo","reg_date","reg_name_1","reg_name_2","reg_user","reg_gift","reg_gp_1","reg_gp_2","reg_fpo","sys_output","sys_console","sys_fpo","def_name","def_device","def_ssid","def_pass","def_alert","def_net_fpo","def_bright","def_sound","def_av_fpo","def_tap_act","def_tap","def_tilt","def_tap_fpo","def_ntp_serve","def_ntp_int","def_ntp_fpo","def_nts_fpo","def_gps_alert","def_gps_log_i","def_gps_log_x","def_gps_fpo","def_tz","def_dst","def_24h","def_pps","def_clock_fpo","def_alarm_ind"],St=100,Ke=["ux_boot","ux_index","ux_fpo","user_consent","user_fpo","net_name","net_device","net_ssid","net_pass","net_alert","net_fpo","ui_bright","ui_sound","ui_fpo","tap","tap_mode","tap_tilt","tap_alert","tap_fpo","ntp_server","ntp_interval","ntp_fpo","nts_fpo","gps_alert","gps_log_int","gps_log_ratio","gps_fpo","clock_static","clock_disp","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","clock_fpo","alarm_tap","alarm_fpo","daily","daily_ind","daily_tone","daily_vol","daily_d","daily_h","daily_m","daily_snooze"],Pt={display:0,piezo:1,xpio:2,gps:3},At={display:1,piezo:2,xpio:4,gps:8},Mt=["CLOCK_HHMM","CLOCK_DATE","CLOCK_MMSS"],Ht=["NTP","GPS","pps","none"],Rt={action:Ge,call:Ve,ux:Ze,info:We,admin:Ye,pref:Ke,stage:Je};var m={master:Rt,hwOffset:Pt,hwMask:At,actionID:Ge,callID:Ve,tuneID:Ot,warnID:Tt,uxID:Ze,stageID:Je,infoID:We,prefBase:St,prefID:Ke,adminID:Ye,clockID:Mt,serviceID:Ht};const K={},Q={};let M=!1;var r={...m,getPrefID:jt,controls:K,linkControl:Bt,getControlByID:Nt,getControlByIndex:Ft,dialogs:Q,linkDialog:qt,printDialogs:Ut,getDialogByIndex:Xt,tron:zt};function Bt(n){const t=m.master[n.linkType];if(t==null){M&&console.log(`linkControl FAIL id:${n.id}, bad type:${n.linkType}`);return}const e=t.indexOf(n.id),i=n.linkType=="pref"?m.prefBase:0;return e<0?(M&&console.log(`linkControl FAIL not found id:${n.id}`),!1):(n.linkID=e+i,K[n.id]={obj:n},!0)}function Nt(n){if(K.hasOwnProperty(n))return K[n].obj;M&&console.log(`map.getControlByID FAIL no table entry for ${n}`)}function Ft(n,t){let e=0;switch(n){case"action":e=m.actionID[t];break;case"call":e=m.callID[t];break;case"ux":e=m.uxID[t];break;case"info":e=m.infoID[t];break;case"pref":e=m.prefID[t-m.prefBase];break;case"admin":e=m.adminID[t];break}if(e==0){M&&console.log(`map.getControlByIndex FAIL not registered ${typeID}: ${t}`);return}if(K.hasOwnProperty(e))return K[e].obj;M&&console.log(`map.getControlByIndex FAIL no object ${typeID}:${t}`)}function jt(n){let t=m.prefID.indexOf(n);if(t!=-1)return t+m.prefBase;console.warn(`getPrefID FAIL ${n} not found`)}function zt(n=!0){M=n}function qt(n){const t=m.uxID.indexOf(n.id);switch(t){case-1:return M&&console.log(`map.linkDialog FAIL id:${n.id}`),!1;default:n.linkID=t,Q[n.id]={obj:n};break}return!0}function Xt(n){const t=m.uxID[n];if(t==null){M&&console.log(`map.getDialogByIndex FAIL ux not registered for ${n}`);return}if(Q.hasOwnProperty(t))return Q[t].obj;M&&console.log(`map.getDialogByIndex FAIL no object for :${t}`)}function Ut(){console.warn("printDialogs");for(const n in Q)console.log(`  ${Q[n].obj.id}`)}Element.prototype.createDiv=function(n){const t=document.createElement("div");return t.id=n,this.appendChild(t),t};Element.prototype.createDivFirst=function(n){const t=document.createElement("div");return n!=null&&(t.id=n),this.insertAdjacentElement("afterbegin",t),t};function Gt(n,t){const e=document.createElement("div"),i=n.id;return n.insertAdjacentElement("afterend",e),e.appendChild(n),i.length!=0&&(e.id=i),e.classList.value=n.classList.value,n.classList.value="",n.removeAttribute("id"),t!=null&&n.classList.add(t),e}var Qe={nest:Gt};class H{constructor(t,e){o(this,"_id");o(this,"_tags",[]);o(this,"_valRef");o(this,"_valIO",!1);o(this,"_val");o(this,"_valLast");o(this,"_tron",!1);o(this,"_view",!1);o(this,"_height",0);o(this,"div");o(this,"data");o(this,"onChange");o(this,"onRender");switch(e=t.nodeType!=null?"div":e,e){case"object":case"obj":this.id=t;break;case"div":this.div=t,this.div.tna=this,this.id=t.id;break;case"id":default:this.div=document.getElementById(t),this.div!=null?this.div.tna=this:console.error(`tna construct no element for ${t}`),this.id=this.div==null?t:this.div.id;break}this.bRenderEnd=this.renderEnd.bind(this)}fuse(){return this.div==null?console.warn(`${this.id} fuse no div`):(this.div.classList.add("_tna"),this)}shy(t=!0){return this.div.classList.toggle("shy",t),this}prime(t=!0){if(this.div!=null)return this.div.classList.toggle("prime",t),this}touchPrime(){return this.div.ontouchstart=()=>{},this}show(){return this.render(!0),this}hide(){return this.render(!1),this}view(t=!0,e=!1){return this.render(t,e),this}viewStaged(t){return this.view(t,!0)}render(t=this._view,e=!1){this._view=t,this.div.classList.toggle("show",t),e?this.div.addEventListener("transitionend",this.bRenderEnd):this.callRender()}draw(){}renderEnd(){this.div.removeEventListener("transitionend",this.bRenderEnd),this.div.style.transition="",this.callRender()}callRender(){this.onRender!=null?this.onRender(this):this._view&&(this.onShow!=null?this.onShow(this):this.onHide!=null&&this.onHide(this))}display(t=!0){return console.log(`${this.id} display b:%o`,t),this.div.style.display=t?"":"none",this}getDiv(t,e){const i=this.div.querySelector(`#${t}`);if(i==null){console.warn(`${this.id} getDiv FAIL for "${t}"`);return}const s=e==null?this.div.id:e;return i.id=`${t}_${s}`,i}setProp(t,e){this.div.style.setProperty(t,e)}getProp(t){return getComputedStyle(this.div).getPropertyValue(t)}getPropVal(t){return parseFloat(this.getProp(t))}getDataAttr(t,e,i){const s=this.div.dataset[t],a=`--${t.camelKabob()}`,u=this.getProp(a);let d,f="";switch(e){case"pixel":f="px";case"integer":d=parseInt(s);break;case"percent":f="%";case"number":case"float":d=parseFloat(s);break;case"s":d=parseFloat(s)*1e3;break;case"string":return s==null?u.length>0?u:i:(d=s,d);default:d=parseFloat(s),s.indexOf("%")>0&&(f="%"),s.indexOf("px")>0&&(f="px");break}return isNaN(d)&&(d=parseInt(u),u.indexOf("%")>0&&(f="%"),u.indexOf("px")>0&&(f="px")),isNaN(d)&&d!=null&&(d=i),this.div.style.setProperty(a,d+f),d}parent(t,e){for(;!(t.id.indexOf(e)!=-1||t.parentElement==null);)t=t.parentElement;return t}async delay(t=1){return new Promise(e=>{setTimeout(()=>{e()},t)})}set(t){return this.data=t,t!=this._valLast&&(this.draw(),this.onChange!=null&&this.onChange(this,t),this._valLast=t),this}enable(t=!0){return this._enable=t,this}tag(...t){for(const e of t)this._tags.push(e);return this}hasTag(...t){let e=!1;for(const i of t)e=e||this._tags.find(s=>s==i);return e}latchClass(t){return this.div.querySelectorAll("._"+t).forEach(i=>i.classList.add(t)),this}set id(t){this._id=t}get id(){return this._id}valRef(t){return this._valRef=t,this}valIO(){return this._valIO=!0,this}set value(t){if(this._valIO&&this._valRef!=null&&this._valRef[0].val!=null){let e=this._valRef.findIndex(i=>i.val==t);e==-1&&(e=0,console.warn(`${this.id} set value(${t}) FAIL not in valRef, using _val:0`)),t=e}this._val=t}get value(){let t=this._val;return this._valIO&&this._valRef!=null&&this._valRef[0].val!=null&&(t=this._valRef[t].val),t}set height(t){this._height=t}get height(){return this._height}tron(t=!0){return this._tron=t,this}clamp(t,e,i){return Math.min(Math.max(t,e),i)}easeLinear(t,e,i,s){return i*t/s+e}easeInQuad(t,e,i,s){return i*(t/=s)*t+e}easeOutQuad(t,e,i,s){return-i*(t/=s)*(t-2)+e}easeInOutQuad(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}easeInSine(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e}easeOutSine(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e}easeInOutSine(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e}easeInCubic(t,e,i,s){return i*(t/=s)*t*t+e}easeOutCubic(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e}easeInOutCubic(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}easeOutElastic(t,e,i,s){let a,u=0,d=i;return t==0?e:(t/=s)==1?e+i:(u||(u=s*.3),d<Math.abs(i)?a=u/4:a=u/(2*Math.PI)*Math.asin(i/d),d*Math.pow(2,-10*t)*Math.sin((t*s-a)*(2*Math.PI)/u)+i+e)}}class le extends H{constructor(e){super(e);o(this,"_enable",!1);o(this,"_dynamic",!1);o(this,"_val",!1);o(this,"onChange");this.div.classList.add("tna_Accord"),this.div.dataset.dynamic!=null&&this.dynamic(),this.div.dataset.open!=null&&this.open(),this.div.dataset.prime!=null&&this.prime(),this._spill=this.div.dataset.spill!=null,this.bSpill=this.spill.bind(this)}prime(){return this.div.classList.add("prime"),this}resize(){const e=this.div.classList.contains("prime");this.div.classList.remove("prime"),this.div.classList.add("open"),this.div.style.setProperty("--accord-h","");const i=this.div.offsetHeight;this.div.style.setProperty("--accord-h",i+"px"),this.div.classList.toggle("open",this._val),this.div.classList.toggle("prime",e)}toggle(e){return this._val=e==null?!this._val:e,this._val?this.open():this.close(),this}open(){return this._val=!0,this.div.classList.add("open"),this._spill&&this.div.addEventListener("transitionend",this.bSpill),this.onChange!=null&&this.onChange(this),this}close(){return this._val=!1,this.div.classList.remove("open","spill"),this.onChange!=null&&this.onChange(this),this}spill(){return console.log(`${this.id} spill`),this.div.classList.add("spill"),this.div.removeEventListener("transitionend",this.bSpill),this}dynamic(e=!0){return e&&!this._dynamic?window.addEventListener("resize",this.resize.bind(this)):window.removeEventListener("resize",this.resize.bind(this)),this.resize(),this._dynamic=e,this}}class xe extends H{constructor(e,i){super(e,i);o(this,"_enable",!1);o(this,"autoEnable",!0);o(this,"primed",!1);o(this,"synced");o(this,"linked");o(this,"linkType");o(this,"linkID");o(this,"valPush");o(this,"valSave");o(this,"lastTime");this._val=0}link(e){e!=null&&(this.linkType=e,this.linked=r.linkControl(this))}sync(e){const i=e.v;this.value=i,this.valPush=this.valSave=i,this.set(e),this.synced||(this.autoEnable&&this._enable!=null&&this.enable(),this.synced=!0)}push(){if(this.linked==!1)return;const e=this.value;e!=this.valPush&&(this.valPush=e,this.send("push",e))}save(){if(this.linked==!1)return;const e=this.value;e!=this.valSave&&(this.valSave=this.valPush=e,this.send("save",e))}send(e,i){const s={a:r.actionID.indexOf(e),t:[]};s.t.push({i:this.linkID,v:i|0}),this.linked!=null&&_.transmit(s,`${this.id} >>`)}}const Vt=`<div id="region" class="region">
    <div id="wrap" class="wrap"></div>
    <div id="label"></div>
  </div>`;class de extends xe{constructor(e,i){super(e);o(this,"_enable",!0);o(this,"_highlight",!1);o(this,"_static",!1);o(this,"_target");o(this,"_index");o(this,"_x0",0);o(this,"_y0",0);o(this,"_x1",100);o(this,"_y1",100);o(this,"_x",0);o(this,"_y",0);o(this,"_scaleX",1);o(this,"_scaleY",1);o(this,"list",[]);o(this,"onExecute");this.link(i),this.target(this.div),this.div.insertAdjacentHTML("beforeend",Vt),this.div.classList.add("tna_Icon"),this.dRegion=this.getDiv("region"),this.dWrap=this.getDiv("wrap"),this.dLabel=this.getDiv("label"),isNaN(this.getPropVal("--icon-w"))&&this.setProp("--icon-w",this.getProp("--icon-h")),this._val=0,this.label=this.getDataAttr("label","string","")}set add(e){const i=`
      <svg class="svg" viewBox="${this._x0} ${this._y0} ${this._x1} ${this._y1}">
        <g><circle cx="0" cy="0" r="50" /></g>
      </svg>`;this.dWrap.insertAdjacentHTML("beforeend",i);const s=this.dWrap.lastChild,a=s.lastElementChild;a.innerHTML=e,this.list.push(s),this.update()}set addCenter(e){this.add=e,this.list.slice(-1)[0].lastElementChild.firstElementChild.setAttribute("transform","translate(-50 -50)")}symbol(e){return window["sym_"+e]==null?console.warn(`${this.id} addSymbol FAIL: ${e}`):this.add=`<use href="#sym_${e}"/>`,this}enable(e=!0){return e==this._enable?this:(this._enable=e,this.render(),this)}render(e=this._view,i){super.render(e,i),this.div.classList.toggle("interact",e&&this._enable&&!this._static),this.div.classList.toggle("disable",!this._enable&&this._view)}set index(e){if(e=Number(e),isNaN(e))return console.warn(`${this.id} set index NaN`);if(e==this._index)return;this._index!=null&&this.list[this._index].classList.remove("show"),this.list[e].classList.add("show"),this._index=e}get index(){return this._index}def(){return this.index=0,this}toggle(e){return this._val=e==null?!this._val:e,this.draw(e),this}cycle(){let e=this._index+1;return e=e>=this.list.length?0:e,this.index=e,this.draw(),this}clear(){this.list.forEach(e=>e.remove()),this.list=[]}update(){const e=`translate(${this._x} ${this._y}) scale(${this._scaleX} ${this._scaleY})`;for(let i in this.list)this.list[i].firstElementChild.setAttribute("transform",e)}execute(){this.onExecute!=null&&this.onExecute(this),this.onChange!=null&&this.onChange(this)}set(e){typeof e!="object"&&(this.value=e),e!=this.lastVal&&(this.index=this.value),super.set(e)}svgRef(e){return e>this.list.length-1?console.warn(`${this.id} svgRef FAIL, bad index`):this.list[e]}gRef(e){return e>this.list.length-1?console.warn(`${this.id} gRef FAIL, bad index`):this.list[e].firstElementChild}viewBox(e,i,s,a){return this._x0=e,this._y0=i,this._x1=s,this._y1=a,this}translate(e,i){return this._x=e,this._y=i,this.update(),this}center(){return this.translate(50,50),this}scaleXY(e,i){return this._scaleX=e,this._scaleY=i,this.update(),this}scale(e){return this._scaleX=this._scaleY=e,this.update(),this}scaleCenter(e){return this._scaleX=this._scaleY=e,this._x=50,this._y=50,this.update(),this}sizeXY(e,i){return this.div.style.setProperty("--icon-h",i+"px"),this.div.style.setProperty("--icon-w",e+"px"),this}size(e){return this.div.style.setProperty("--icon-x",e),this}highlight(e){if(e==-1&&(e=!this._enable),!!this._enable)return this._highlight=e,this.div.classList.toggle("highlight",e),this}static(e=!0){return this._static=e,this.div.classList.toggle("interact",!e),this}set label(e){const i=e.length>0;this.dLabel.innerText=i?e:"",this.dLabel.classList.toggle("label",i)}target(e){return this._target=typeof e=="string"?window[e]:e,this._target.onclick=this.execute.bind(this),e!=this.div&&(this.div.style.pointerEvents="none"),this}enabled(){return this._enable}}class He extends de{constructor(e,i){super(e);o(this,"_class");o(this,"_anim");o(this,"_count",0);o(this,"_duration",0);o(this,"_delay",0);o(this,"onAnimEnd");this.link(i)}async act(e=!0){const i=this._class!=null?"act_"+this._class:"act";if(this.div.classList.contains(i)&&(this.div.classList.remove(i),await this.delay()),this.div.classList.toggle(i,e),e){const s="tna_Icon_"+(this._anim!=null?"act_"+this._anim:"act");this.div.onanimationend=a=>{`${this.id}`,a.animationName==s&&this.div.classList.remove(i),this.div.onanimationend=void 0,this.onAnimEnd!=null&&this.onAnimEnd(this)}}else this.div.onanimationend=void 0;return this}choreo(e,i){return this._anim=e,this._class=e+(i==null?"":"_"+i),this}timing(e,i=this._dur,s=0){this._count=e=Number(e),this._dur=i=Number(i),this._delay=s=Number(s);const a="--icon-act_"+this._anim;return this.setProp(a+"-n",e==0?"infinite":e),this.setProp(a+"-t",i+"ms"),this.setProp(a+"-d",s+"ms"),this}property(e,i){this.dWrap.style.setProperty("--icon-act-"+e,i)}}const Zt=`<g fill="var(--icon-fg)" transform="translate(-50, -50)">
      <use href="#sym_hit" />
    </g>
    <g fill="var(--icon-fg)" transform="translate(-50, -50)">
      <use href="#sym_help" />
    </g>`,Jt=`<circle fill="white" stroke="none" cx="0" cy="0" r="50" />
    <g fill="black" transform="translate(-50, -50)">
      <use href="#sym_help" />
    </g> `;var Fe={help_1:Zt,help_2:Jt};const et={},X={enable:!1},ie={};let b;function Wt(){ti();let n;n=document.querySelectorAll("._help"),n.forEach(t=>Qe.nest(t,"wrap")),n=document.querySelectorAll("._help"),n.forEach((t,e)=>{t.id.length==0&&(t.id=`help_${e}`);const i=t.id.length!=0?t.id:e;t.setAttribute("data-dynamic",""),ie[i]=new le(t.id)}),window.help!=null&&(et.button=b=new de("help").show(),b.add=Fe.help_1,b.add=Fe.help_2,b.translate(50,50).def(),b.onExecute=t=>{t.value^=!0},b.onChange=async t=>{t.index=t.value,t.value||(w.prop.prime_local=!1),localStorage.setItem("help",Number(t.value)),tt()},G.initStorage("help",b,!0)),X.flag=!1}function Yt(){b.onChange(b)}async function Kt(){for(const[n,t]of Object.entries(ie))t.prime()}function Qt(){return!!b.value}function tt(n){X.enable=!!b.value;for(const[t,e]of Object.entries(ie))e.toggle(X.enable);X.onUpdate!=null&&X.onUpdate(X.enable)}function ei(n){ie[n.id]=n}function ti(){let n;n=document.querySelectorAll("._help"),n.forEach((t,e)=>{t.id.length==0&&(t.id=`help_${e}`);const i=t.id.length!=0?t.id:e;ie[i]=new le(t.id)})}var ii={tna:et,prop:X,item:ie,init:Wt,prime:Kt,stage:Yt,state:Qt,update:tt,add:ei};const ee=[];let te;function ni(n,t){const e=window[n];if(e==null)return console.log(`panel.add() FAIL, cannot find ${n}`);e.dataset.index=ee.length,ee.push({id:n,title:t,panel:e})}function si(){if(te!=null)return ee[te].panel}function oi(){return te}function ri(){return te!=null?ee[te].id:void 0}function it(n,t=!1){n<0||(te=n,ee.forEach((e,i)=>{const s=e.panel,a=n==i;t||(s.classList.toggle("show",a),s.children[0].classList.toggle("show",a)),a&&s._tna_begin!=null&&s._tna_begin()}))}function ai(n,t=!1){const e=ee.findIndex(i=>i.id==n);return e!=null&&it(e,t),e}function li(n){return new URLSearchParams(n).get("panel")}var ge={add:ni,current:si,currentID:ri,currentIndex:oi,index:it,setByID:ai,inject:li};class Ee extends H{constructor(e,i){super(e,"div");o(this,"_static",!1);o(this,"_index");o(this,"_label");o(this,"_html");o(this,"_target");o(this,"control");o(this,"bClick");if(i!=null){this.control=i,this.div.classList.add("menu_item"),this.dLabel=this.getDiv("label"),this.bClick=this.click.bind(this);let s=this.div.querySelector("._click");s==null&&(s=this.div),s._tna_target=this.div,this._target=s}else this.div.classList.add("menu_static"),this._target=this.div,this.static();this.enable()}click(e){let i=e.target._tna_target;i==null&&(i=this.parent(e.target,"_item")),this.execute(i),e.preventDefault(),e.stopImmediatePropagation()}async execute(e){this.control.click(this),this.div.classList.remove("hover"),this.div.classList.add("action"),await this.delay(360),this.control.view(!1),await this.delay(300),this.div.classList.remove("action"),this.control.execute(this)}enable(e=!0){return this.enabled=e,this.control!=null&&this.div.classList.toggle("hover",e&&this.control._hover),this.div.classList.toggle("enable",e),this._target.onclick=e&&!this._static?this.bClick:null,this._target.style.pointerEvents=e&&!this._static?"":"none",this}highlight(e=!0){return this.div.classList.toggle("highlight",e),this.enable(!e),this}set label(e){this.dLabel.innerText=this._label=e}get label(){return this._label}set html(e){this.dLabel.innerHTML=this._html=e}static(e=!0){return this._static=e,this._target.onclick=this.enabled&&!this._static?this.bClick:null,this._target.style.pointerEvents=e?"none":"",this}}const di=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="panel" class="panel"></div>
  </div>`,ci=`<div>
    <div id="label" class="label"></div>
  </div>`;class hi extends H{constructor(e,i=di){super(e);o(this,"_enable",!1);o(this,"_index");o(this,"_highlight",!1);o(this,"_hover",!0);o(this,"_static_high",!0);o(this,"_wipe",!1);o(this,"_tm_open");o(this,"_tm_close");o(this,"_block_tm_open");o(this,"_block_tm_close");o(this,"_block_opacity");o(this,"_itemT");o(this,"_staticT");o(this,"_itemN",0);o(this,"_staticN",0);o(this,"pool",[]);o(this,"list",[]);o(this,"last");o(this,"onBegin");o(this,"onEndPrime");o(this,"onEnd");o(this,"onPrime");o(this,"onExecute");o(this,"onResize");this._itemT=ci,this.div.insertAdjacentHTML("afterbegin",i),this.div.classList.add("tna_Menu"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dPanel=this.getDiv("panel"),this.getDiv("banner"),this.blocked=this.div.dataset.block!=null,this.blocked&&(this.dBlock=document.createElement("div"),this.dBlock.id="block",this.div.insertAdjacentElement("afterbegin",this.dBlock),this.getDiv("block"),this.dBlock.classList.add("block"),this.dBlock.onmousedown=this.dBlock.ontouchstart=this.escape.bind(this)),this._highlight=this.div.dataset.highlight!=null,this.enable(this.div.dataset.enable!=null),this._block_opacity=this.getProp("--menu-block-a"),this.itemH=this.getDataAttr("menuIH","pixel",""),this.staticH=this.getDataAttr("menuStaticH","pixel",""),this.merge()}merge(){let e,i;const s=this.div.childElementCount-this.blocked;for(let a=1;a<s;a++)i=this.div.children[1+this.blocked],i.classList.contains("menu_item")?(e=this.add(),e.link=i.dataset.link,e.label=i.innerHTML,i.dataset.highlight!=null&&(this._index=e._index)):i.classList.contains("menu_static")&&(e=this.add("static")),e.view(!0),i.remove();this._index!=null&&this.index(this._index),s>1&&this.update()}add(e="item"){let i,s;switch(e){case"static":if(this._staticT!=null){const a=document.createElement("template");a.innerHTML=this._staticT,s=a.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createStatic(s);break;default:if(this._itemT!=null){const a=document.createElement("template");a.innerHTML=this._itemT,s=a.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createItem(s);break}return i=this.dPanel.appendChild(s),this.pool.push(i),this.last}createItem(e){const i=new Ee(e,this),s=`${this.id}_item_${this._itemN}`;return e.id=i.id=s,i._index=this._itemN,i.link=this._itemN,i.height=this.itemH,this.list.push(e),this._itemN++,i}createStatic(e){const i=new Ee(e).static(),s=`${this.id}_static_${this._itemN}`;return e.id=i.id=s,i.height=this.staticH,this._staticN++,i}index(e){this._index=e;for(let i in this.pool)this.pool[i].tna.highlight(!1);return e>=0&&this.list[e].tna.highlight(),this.setStatic(e),super.set(e),this}setStatic(e){if(!this._static_high)return;let i;if(this.pool.find((s,a)=>{const u=s==this.list[e];return u&&(i=a),u}),i!=null){const s=i-1,a=i+1;s>=0&&this.pool[s].tna.highlight(),a<this.pool.length-1&&this.pool[a].tna.highlight()}}update(){let e=0;return this.pool.forEach((i,s)=>{e+=i.tna.height*i.tna._view}),this.height=e,e}clear(){this.list.forEach(e=>{e.tna=void 0,e.remove()}),this.list=[],this.pool=[],this._itemN=this._staticN=0,this.update()}click(e){this.last=e,this._wipe&&this.index(-1),this.setStatic(e._index),this.onPrime!=null&&this.onPrime(e,e.link)}execute(e){this._highlight&&(e.enable(!1),this.index(e._index)),this.onExecute!=null&&this.onExecute(this,e.link)&&this.end()}async escape(e){e!=null&&(e.stopImmediatePropagation(),e.preventDefault()),this.view(!1),this.transBlock(this._block_tm_close),this.onEnd!=null&&this.onEnd(this)}begin(){this.transRegion(this._tm_open,"ease-out"),this.transBlock(this._block_tm_open,"ease"),this.onBegin!=null&&this.onBegin(this,!0)}endPrime(){this.transRegion(this._tm_close,"ease-in"),this.onEndPrime!=null&&this.onEndPrime(this)}end(){this.transBlock(),this.onEnd!=null&&this.onEnd(this)}render(e=this._view){super.render(e),this.div.classList.toggle("open",e),e?this.begin():this.endPrime()}find(e){return this.list.find(s=>s.tna.label==e)}wipe(e=!0){return this._wipe=e,this}hover(e=!0){return this._hover=e,this}set height(e){this._height=e,this.div.style.setProperty("--menu-h",e+"px"),this.onResize!=null&&this.onResize(this)}get height(){return this._height}get count(){return Object.keys(this.list).length}get next(){if(this.last._index<this.count)return this.list[this.last._index+1]}get previous(){if(this.last._index>0)return this.list[this.last._index-1]}set template(e){this._itemT=e}set templateStatic(e){this._staticT=e}staticHigh(e=!0){return this._static_high=e,this}timing(e,i){return this._tm_open=e,this._tm_close=i,this}timingBlock(e,i){return this._block_tm_open=e,this._block_tm_close=i,this}transRegion(e=0,i=""){const s=e+"ms";return this.dRegion.style.transitionDuration=s,this.dRegion.style.transitionTimingFunction=i,this}transBlock(e=0,i=""){const s=e+"ms",a=this._view?this._block_opacity:0;return this.dBlock.style.transitionDuration=s,this.dBlock.style.transitionTimingFunction=i,this.dBlock.style.opacity=a,this.dBlock.style.visibility="visible",e==0?this.transBlockEnd():this.dBlock.ontransitionend=this.transBlockEnd.bind(this),this}transBlockEnd(){this._view||(this.dBlock.style.visibility="hidden"),this.dBlock.ontransitionend=void 0}}var fi={control:hi,item:Ee};const ui=`<g stroke-width="6.7">
    <polygon
      points="89.5 72.8 50 95.6 10.5 72.8 10.5 27.2 50 4.4 89.5 27.2 89.5 72.8"
    />
    <polyline id="badge_N" points="28.4 62 28.4 38 71.6 62 71.6 38" />
  </g>`,gi=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="banner" class="banner">
      <div class="banner_wrap">
        <div>C</div><div>u</div><div>b</div><div>e</div>
        <div>C</div><div>o</div><div>r</div><div>e</div></div></div>
    <div id="panel" class="panel"></div>
    </div>
  </div>`;const pe={},$e=[];let p,x,ne,Le,nt=!1,fe=!1;function pi(){if(pe.badge=x=new He("badge").show(),x.div.classList.add("connect"),x.add=ui,x.value=!1,x.def(),x.ext_onExecute=t=>{t.choreo("3D_flip").timing(1,250).act(),p.view(!p._view),p._view||p.escape()},ot(!w.prop.modeExt),pe.dot=ne=new de("badge_dot"),ne.add='<circle cx="50" cy="50" r="50" />',ne.static().prime().def(),ne.onRender=t=>ne.div.classList.toggle("orbit",t._view),window.menu!=null){pe.menu=p=new fi.control("menu",gi).wipe(),Le=p._index,p.timing(250,250).timingBlock(500,250),p.onExecute=(e,i)=>{e.last.index==0;const s=st(i);return s&&(Le=e._index),n(),s},p.onBegin=p.onEnd=e=>{x.highlight(e._view);const i=e._view?"blur(3px)":"",s=e._view?e._block_tm_open:e._block_tm_close;ze(s,"ease",i),fe=!1},je("Admin");const t=je("R/Con","rc");t.html='R<span style="padding-left: 2px; font-size: 130%; position: relative; top: 1.5px;">/</span>Con'}const n=async()=>{fe=!0,await G.delay(2e3),fe&&(x.highlight(!1),p.index(Le),p.transBlock(),ze(),fe=!1)}}function je(n,t){const e=p.find(n);if(e==null){let i=p.add("static").enable();return $e.push(i),i=p.add().enable(),$e.push(i),i.label=n,i.link=`/${t!=null?t:n.toLowerCase()}/`,nt=!0,i}else return e.tna}function ze(n=0,t="",e=""){const i=n+"ms",s=window.fit!=null?ge.current():window.page;if(s==null)return console.warn("nav menuBG FAIL");s.style.filter=e,s.style.transitionProperty="filter",s.style.transitionDuration=`${i}`,s.style.transitionTimingFunction=t}function st(n){console.log(`hyper -> "${n}"`);const t=ge.currentIndex(),e=new URL(n,"http://x"),i=e.pathname==document.location.pathname;if(i){const s=ge.inject(e.search);ge.setByID(s)}else!w.prop.local&&n.length>1&&n.slice(-1)=="/"&&(n=n.slice(0,-1)),window.location=n,p.index(t);return i}function _i(n){!nt||($e.forEach(t=>t.view(n)),p.update())}function ot(n=!0){x.div.classList.toggle("static",!n),x.div.classList.toggle("dim",!n),x.onExecute=n?x.ext_onExecute:void 0,x.enable(n)}var j={tna:pe,init:pi,enable:ot,hyper:st,access:_i};class B extends xe{constructor(e,i=void 0,s="info"){super(e,i);o(this,"onChange");this.link(s)}}const T={cast:"border-radius: 9px; padding: 1px 7px 0; font-style: italic; font-weight: bold",test:"border: 0.25px solid gray; border-style: solid solid solid none; border-radius: 0 9px 9px 0; padding: 1px 7px 0 0; font-style: italic; font-weight: bold",gray:"border: 0.25px solid gray; background: gray; color: white;",black:"border: 0.25px solid black; background: black; color: white;",red:"border: 0.25px solid red; background: red; color: white;",gold:"border: 0.25px solid gray; background: gold; color: black;"},N=["fail","cache","cache_end","tear","touch","normal","warn","error","alert","bold"],Ce={},z={},S={};let _e,ve,Oe=0;function vi(){_e=r.callID.indexOf("call_console"),Ce.rc=new B("call_console","object","call"),Ce.rc.onChange=(n,t)=>{switch(t.v){case 0:S.fail!=null?S.fail():E("fail","Access Not Authorized");break;case 1:t.n==1&&(ve=0);const e=JSON.stringify(t);console.groupCollapsed("cache n:%o, count:%o",t.n,t.z.length),console.log(e),console.groupEnd(),t.z.length&&t.z.forEach(i=>{z.last_format=N[i.f],z.last_msg=i.m,E(Oe?N[i.f]:"tear",i.m),Oe++}),ve+=t.z.length;break;case 2:console.warn("cache EOL chunks:%o count:%o",t.n,ve),t.c!=null&&(z.capacity=t.c),t.f!=null&&(z.full=t.f),S.cache!=null&&S.cache();break;default:z.last_format=N[t.v],z.last_msg=t.x,S.msg!=null&&S.msg(),E(N[t.v],t.x);break}}}function mi(){Oe=ve=0}function E(n,t){if(S.output!=null)return S.output(n,t);switch(n){case"normal":console.log("%cRC",T.gray+T.cast,t);break;case"warn":const e="border: 0.25px black solid;";console.log("%cRC",e+T.gold+T.cast+e,t);break;case"error":console.log("%cRC%c %s",T.red+T.cast,"color: red",t);break;case"bold":console.log("%cRC%c %s",T.black+T.cast,"font-weight: bold",t);break}}function yi(){w.prop.preflight||xi()}function xi(){const n=new CustomEvent("meh"),t="rc.test format:",e={a:r.actionID.indexOf("call"),t:[{i:_e,v:N.indexOf("normal"),x:t+"normal"},{i:_e,v:N.indexOf("warn"),x:t+"warn"},{i:_e,v:N.indexOf("error"),x:t+"error"}]};n.data=JSON.stringify(e),_.parse(n)}function wi(n){E("normal",n)}function bi(n){E("warn",n)}function ki(n){E("error",n)}function Ii(n){E("tear",n)}function Di(n){E("alert",n)}function Li(n){E("bold",n)}var F={formatID:N,style:T,tna:Ce,prop:z,upon:S,init:vi,prime:yi,reset:mi,log:wi,warn:bi,error:ki,tear:Ii,alert:Di,bold:Li};const Ei=1,$i=2;class Ci extends H{constructor(){super("tron","object");o(this,"_enable",!0);o(this,"state",!1);o(this,"STAGE",Object.freeze({BEGIN:1,END:0}));o(this,"holdTime");o(this,"delayTime");o(this,"showTimeout");o(this,"hideTimeout");o(this,"onWrite");this.setHold().setDelay()}assign(e){const i=window[e];return i==null?console.warn("tron assign FAIL: %o",e):(i.classList.add("tna_Tron"),this.div=i,this)}enable(e=!0){if(this.div!=null&&e!=this._enable)return this.div.classList.toggle("disable",!e),this._enable=e,this}async write(e,i=this.holdTime){this.div!=null&&(clearTimeout(this.hideTimeout),this.div.innerText=e,this.div.classList.add("show","prime"),this.state=!0,this.hideTimeout=setTimeout(this.writeEnd.bind(this),i*1e3),this.onPrime!=null&&this.onWrite(this,STAGE.BEGIN))}async writeEnd(){this.state=!1,this.hideTimeout=void 0,this.div.classList.remove("show"),this.div.ontransitionend=()=>{this.div.classList.remove("prime"),this.onPrime!=null&&this.onWrite(this,STAGE.END),this.div.ontransitionend=void 0}}writeDelay(e,i=this.holdTime,s=this.delayTime){this.div!=null&&(clearTimeout(this.showTimeout),this.state?(this.div.innerText=e,this.write(e,i)):this.showTimeout=setTimeout(this.write.bind(this),s*1e3,e,i))}cancel(){clearTimeout(this.showTimeout)}kill(){this.cancel(),this.writeEnd()}add(e){return e.onTron=i=>this.write(i),this}setHold(e=Ei){return this.holdTime=e,this}setDelay(e=$i){return this.delayTime=e,this}}var Oi=new Ci;class Ti extends xe{constructor(){r.prefID.indexOf("ux_index")<0&&console.warn("tna_UX constructor FAIL, cannot find prefID");super("ux_index","object");o(this,"_lastIndex");o(this,"_lastDialog");o(this,"_nextDialog");o(this,"_currentDialog");this.link("pref")}set(e){const i=e.v;if(this._lastIndex!=i&&(this._nextDialog=r.getDialogByIndex(i),this._lastDialog=r.getDialogByIndex(this._lastIndex),this._nextDialog!=null)){this.tron&&this._lastDialog!=null&&`${this._lastDialog.id}`,this._lastDialog!=null&&this.last.exit(),this._nextDialog.begin(),this._lastIndex=this._val=i,this._currentDialog=this._nextDialog,super.set(e);return}}get last(){return this._lastDialog!=null?this._lastDialog:{id:"NULL"}}get lastID(){return this._lastDialog!=null?this._lastDialog.id:void 0}get next(){return this._nextDialog}get current(){return this._currentDialog}get currentID(){return this._currentDialog!=null?this._currentDialog.id:void 0}}const rt="3.1.04",at={}.VITE_PREFLIGHT==="true",Si=!0;at||console.warn("core PREFLIGHT: %o",!1);const $={},k={preflight:at,modeExt:Si,modeAP:!1,prime_local:!1},P={},Te={},W={},R={};let ue,Y,I,Se=!1;function Pi(){Oi.assign("tron_output"),Mi(),$.title=Y=new H("head_title"),Y.div.classList.add("click"),Y.div.onclick=()=>{let t=Te.title!=null?Te.title():!1;t=t==null?!1:t,t||console.log("core title click default")},Y.fuse().shy(!k.modeExt).view(),Ai(),window.diag_client.innerText=G.versionString(rt);const n=String(document.location);k.local=n.includes("host:")||n.includes("local:"),ue=new B("developFPO","object"),ue.onDefault=()=>k.prime_local=!0,G.initStorage("develop",ue),k.develop=ue.value,$.ux=new Ti().tron(),j.init()}function Ai(){window.socket!=null&&(I=new de("socket").prime().show().enable(),I.symbol("x").symbol("o"),I.value=!0,I.index=1,I.onExecute=n=>{n.toggle(),n.index=n.value,_.monitor(n.value),n.value?_.init():_.kill()},$.socket_button=I)}function Mi(){if(window.rc_ind==null||k.user==0)return;const n=new B("info_rc","object");F.upon.msg=(t=F.prop.last_format)=>{const e=k.user!=null?k.user:0;$.rc_ind.view(t!=F.formatID.indexOf("touch")&&e)},n.onChange=(t,e)=>{F.upon.msg(e.v)},$.rc_ind=new He("rc_ind").symbol("dot").def(),$.rc_ind.onExecute=async t=>{t.choreo("blink","hot").timing(3,150).act(),t.onAnimEnd=()=>j.hyper("/rc/")}}async function Re(){for(const[n,t]of Object.entries($))t.ext_no_prime==null&&t.prime();return Re=!0}function lt(){Se=!1,j.tna.badge.div.classList.add("connect","prime"),j.tna.dot.viewStaged(!1),I!=null&&(I.index=1),P.open!=null&&P.open()}async function Pe(){Se||(Se=!0,j.tna.badge.div.classList.add("prime"),j.tna.badge.div.classList.remove("connect"),j.tna.dot.view(!0),window.head.classList.remove("gradient"),await G.delay(250),I!=null&&I.def(),P.close!=null&&P.close(),Y.shy(!1),await G.delay(250),Y.view())}function Hi(){_.onOpen(lt),_.onClose(Pe),new B("info_install","object").onChange=(e,i)=>{e.ext_prime==null&&(W.display=(i.v&r.hwMask.display)>>r.hwOffset.display,W.piezo=(i.v&r.hwMask.piezo)>>r.hwOffset.piezo,W.xpio=(i.v&r.hwMask.xpio)>>r.hwOffset.xpio,W.gps=(i.v&r.hwMask.gps)>>r.hwOffset.gps,i.z,R.display=(i.z&r.hwMask.display)>>r.hwOffset.display,R.piezo=(i.z&r.hwMask.piezo)>>r.hwOffset.piezo,R.xpio=(i.z&r.hwMask.xpio)>>r.hwOffset.xpio,R.gps=(i.z&r.hwMask.gps)>>r.hwOffset.gps,Object.keys(R).forEach(function(s,a){R[s]||document.querySelectorAll("._"+s).forEach(d=>d.style.display="none")}))},new B("call_prime","object","call").onChange=e=>{Re(),e.ext_prime==null&&(P.prime!=null&&P.prime(W,R),e.ext_prime=!0)},$.user=new B("info_user","object"),$.user.onChange=e=>{k.user=e.data.v,j.access(k.user),P.user!=null&&P.user(e.data)};let n=new B("call_restart","object","call");n.onChange=async e=>{F.bold("system ESP restart"),Pe(),await e.delay(1e3),_.send("ping")};let t=new B("call_warn","object","call");t.onChange=(e,i)=>{let s=parseInt(i.v);s=s<r.warnID.length?s:-1;let a;s>=0&&(a=r.warnID[s]),a!=null&&console.error(`system warning ${a}`)}}function Ri(n=k.user){let t=document.querySelectorAll("._admin");t.forEach(e=>e.style.display=n?"":"none"),t=document.querySelectorAll("._admin_alt"),t.forEach(e=>e.style.display=n?"none":"inherit")}var w={tna:$,prop:k,upon:P,click:Te,version:rt,install:W,activate:R,init:Pi,prime:Re,open:lt,close:Pe,patch:Hi,admin:Ri};let ye=!1,V=!1,dt=!1,U,ct,Ae,Me;const Bi=`ws://${window.location.hostname}/ws`;let A,ae=!1;function Be(){ye||(ye=!0,A=new WebSocket(Bi),A.onopen=Fi,A.onclose=ji,A.onmessage=ct,V=!1,U=clearTimeout(U))}function Ni(n){n!=ae&&(console.log(`socket monitor b:${n} state:${V}`),ae=n,n&&(!V&&U==null?Be():U=clearTimeout(U)))}function ht(){return V=(A!=null?A.readyState:qe.closed)==qe.connected,V}function Fi(){console.warn("socket open"),V=!0,Ae!=null&&Ae()}function ji(){console.error(`socket close, squelch:${dt} check:${ae}`),ye=!1,V=!1,Me!=null&&Me(),ae&&(clearInterval(U),U=setTimeout(Be,1e3))}function zi(){console.warn("socket kill"),A&&A.close(),dt=!0,ye=!1}function ft(n){ct=n}function qi(n){Ae=n}function Xi(n){Me=n}const qe=Object.freeze({connecting:0,connected:1,closing:2,closed:3});let C=!1;var _={onOpen:qi,onClose:Xi,onParse:ft,check:ae,init:Be,ready:ht,monitor:Ni,kill:zi,parse:we,sendUX:Wi,sendTune:Yi,sendObject:ut,send:gt,fakeMessage:Qi,fakeObject:Ki,transmit:ce,fill:en,tron:Ui};ft(we);function Ui(n=!0){C=n}function Gi(n){let t;for(let e in n)t=r.getControlByIndex("info",n[e].i),t!=null?(n.length>1&&(C?console.log(`<< info #${e} %o ${n[e].v}`,t.id):t.id!="info_display"&&C&&console.log(`<< info %o ${n[e].v}`,t.id)),t.set(n[e])):C&&console.log(`parseInfo #${e} no object id %o`,r.infoID[n[e].i])}function Vi(n){for(let t in n){const e=n[t].i,i=r.getControlByIndex(e<r.prefBase?"admin":"pref",e);i!=null?(C&&(n.length>1?console.log(`<< pref #${t} ${i.id} ${n[t].v}`):console.log(`<< pref ${i.id} ${n[t].v}`)),i.sync(n[t])):C&&console.log(`parseSync #${t} no object id %o`,e)}}function Zi(n){for(let t in n){const e=r.getControlByIndex("call",n[t].i);e!=null&&e.set(n[t])}}function Ji(n){for(let t in n){const e=n[t],i=r.getControlByIndex("ux",e.i);if(i!=null){if(e.s<0)return console.warn("parseUX FAIL bad stage value %o",r.stageID[e.v]);i.parse(e)}else C&&console.log("parsUX no object %o",r.infoID[e.i])}}function we(n){let t=JSON.parse(n.data),e=r.actionID[t.a],i=t.t;switch(e){case"call":Zi(i);break;case"ux":Ji(i);break;case"info":Gi(i);break;case"sync":Vi(i);break}}function Wi(n,t,e){const i="ux",s=r.uxID.indexOf(n);if(s<0)return console.warn("sendUX FAIL no dialog %o",n);const a={i:s},u=r.stageID.indexOf(t);u>=0&&(a.v=u),e!=null&&(a.x=e);const d={a:r.actionID.indexOf(i),t:[a]};ce(d,`${i} >>`)}function Yi(n="default"){const t="call",e=r.tuneID.indexOf(n);if(e<0)return console.warn("sendTune FAIL no melody %o",n);r.callID.indexOf("call_tune");const i={a:r.actionID.indexOf(t),t:[{i:r.callID.indexOf("call_tune"),v:e}]};ce(i,`${t} >>`)}function ut(n,t,e){const i=r.actionID.indexOf(n);if(i<0)return console.log("sendObject FAIL no action %o",n);let s={a:i,t:[]},a={i:r.getPrefID(t)};return Object.assign(a,e),s.t.push(a),ce(s,`${n} >>`),s}function Ki(n,t,e){const i=ut(n,t,e);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),we(s)}}function gt(n,t,e){let i=r.actionID.indexOf(n);if(i<0){C&&console.log("send FAIL no action %o",n);return}let s={a:i,t:[]},a=-1;switch(n){case"push":case"save":case"sync":a=r.getPrefID(t);break;case"call":a=r.callID.indexOf(t);break;case"ping":a=e=0}if(a<0){C&&console.log("send FAIL no id %o in action %o",t,n);return}return s.t.push({i:a,v:e|0}),ce(s,`${n} >>`),s}function Qi(n,t,e){const i=gt(n,t,e);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),we(s)}}function ce(n,t){const e=JSON.stringify(n);C&&console.log(`${t} ${e}`),ht()&&A.send(e)}async function en(n,t,e){let i={};try{const s=await fetch(t,{method:"GET"});if(s.status===200)i=await s.json();else throw new Error(`${t} FAIL fetch code:${s.status}`)}catch(s){console.warn(`${t} FAIL, using test data`,s),w.prop.preflight||Object.assign(i,e)}console.groupCollapsed(`comm fill ${t}`),console.log(i),console.groupEnd(),Object.assign(n,i)}const me=Math.floor(new Date().getTime()/1e3);r.actionID.indexOf("info"),r.infoID.indexOf("info_hardware"),r.infoID.indexOf("info_mfg"),r.infoID.indexOf("info_reg");const tn={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_rc"),v:4},{i:r.infoID.indexOf("info_install"),v:r.hwMask.display+r.hwMask.piezo+r.hwMask.xpio+r.hwMask.gps+0,z:r.hwMask.display+r.hwMask.piezo+r.hwMask.xpio+r.hwMask.gps+0},{i:r.infoID.indexOf("info_user"),v:1},{i:r.infoID.indexOf("info_firmware"),v:"8.8.88"},{i:r.infoID.indexOf("info_uptime"),v:me-3600*24*99},{i:r.infoID.indexOf("info_net"),v:"expresso",p:"8C:CE:4E:D5:36:9D",q:"192.168.2.100"},{i:r.infoID.indexOf("info_rssi"),v:"-79"},{i:r.infoID.indexOf("info_status"),v:r.serviceID.indexOf("GPS"),g:1,n:1},{i:r.infoID.indexOf("info_tap"),v:4,m:884,c:4},{i:r.infoID.indexOf("info_gps"),t:me,d:1200,v:13,max:12,min:12,rec:22},{i:r.infoID.indexOf("info_ntp"),v:0,s:me,f:28,p:64,e:0,r:60*30},{i:r.infoID.indexOf("info_display"),v:[0,0,0,0,0]}]},nn={a:r.actionID.indexOf("sync"),t:[{i:r.getPrefID("net_alert"),v:1},{i:r.getPrefID("ui_bright"),v:0,x:5},{i:r.getPrefID("ui_sound"),v:1},{i:r.getPrefID("tap_mode"),v:0},{i:r.getPrefID("tap_tilt"),v:1},{i:r.getPrefID("tap_alert"),v:0},{i:r.getPrefID("tap"),v:7,t:1023},{i:r.getPrefID("gps_alert"),v:0},{i:r.getPrefID("gps_log_int"),v:1200},{i:r.getPrefID("clock_static"),v:1},{i:r.getPrefID("clock_disp"),v:r.clockID.indexOf("CLOCK_HHMM")},{i:r.getPrefID("clock_24h"),v:0},{i:r.getPrefID("clock_tz"),v:-6},{i:r.getPrefID("clock_dst"),v:1},{i:r.getPrefID("clock_pps"),v:0},{i:r.getPrefID("daily"),v:1,h:9,m:32},{i:r.getPrefID("daily_vol"),v:1},{i:r.getPrefID("daily_ind"),v:1},{i:r.getPrefID("daily_snooze"),v:1},{i:r.getPrefID("ux_index"),v:r.uxID.indexOf("clock_static")}]};r.infoID.indexOf("info_gps_log"),me-200;const sn={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_display"),v:[127,127,127,127,2]}]},on={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_display"),v:[120,121,109,120,0]}]},rn={a:r.actionID.indexOf("call"),t:[{i:r.callID.indexOf("call_prime"),v:0}]};function an(){const n=w.prop.local?500:75;setTimeout(async()=>{if(_.ready())return;w.open(),console.log("%ccomm test",F.style.test,"info + sync");const t=new CustomEvent("meh");t.data=JSON.stringify(tn),_.parse(t),t.data=JSON.stringify(nn),_.parse(t),await G.delay(75),t.data=JSON.stringify(rn),_.parse(t)},n),setTimeout(()=>{if(_.ready())return;console.log("%ccomm test",F.style.test,"display");const t=new CustomEvent("meh");t.data=JSON.stringify(sn),_.parse(t)},n*2),setTimeout(()=>{if(_.ready())return;const t=new CustomEvent("meh");t.data=JSON.stringify(on),_.parse(t)},n*3)}var ln={init:an};const dn=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="label" class="label"></div>
  </div>`;class cn extends H{constructor(e){super(e);o(this,"_label");this._label=this.div.innerHTML,this.div.innerText="",this.div.insertAdjacentHTML("beforeend",dn),this.div.classList.add("tna_RetroT"),this.dRegion=this.getDiv("region"),this.dLabel=this.getDiv("label"),this.dBg=this.getDiv("bg"),this.dLabel.innerText=this._label}}const be={};function hn(){un(),gn(),pt()}async function fn(){for(const[n,t]of Object.entries(be))t.prime()}function un(){document.querySelectorAll("._tna_Accord").forEach((t,e)=>{t.id.length==0&&(t.id=`accord_${e}`);const i=t.id.length!=0?t.id:e;be[i]=new le(t.id)})}function gn(){document.querySelectorAll("._hr").forEach((t,e)=>{t.id.length==0&&(t.id=`hr_${e}`);const i=t.id.length!=0?t.id:e;be[i]=new H(t.id).fuse(),t.classList.add("hr_wrap");const s=document.createElement("hr");t.insertAdjacentElement("afterbegin",s)})}function pt(){let n;n=document.querySelectorAll(".tna_RetroT"),n.forEach((t,e)=>{t.id.length==0&&(t.id=`retro_text_${e}`),new cn(t.id)})}var re={init:hn,prime:fn,items:be,retro:pt};const pn=`<div class="region">
    <div id="label" class="label">X</div>
  </div>`;class _t extends H{constructor(e,i,s=pn){super(e,"div");o(this,"_index");o(this,"_label");o(this,"_target");o(this,"control");o(this,"bClick");this.control=i,this.div.id=this.id=`${i.id}_item_${i.itemN}`,this._label=this.div.innerHTML,this.div.innerText="",this.div.insertAdjacentHTML("afterbegin",s),this.div.classList.add("tna_Radio_item"),this.dLabel=this.getDiv("label"),this.label=this._label;let a=this.div.querySelector("._click");a==null&&(a=this.div),a._tna_target=this.div,this._target=a,this.bClick=this.click.bind(this),this.enable()}click(e){let i=e.target._tna_target;i==null&&(i=this.parent(e.target,"_item")),this.execute(i),e.preventDefault(),e.stopImmediatePropagation()}execute(e){this.control.last=this,this.control.execute(this),this.control.view(!1)}enable(e=!0){return this.enabled=e,this.div.classList.toggle("enable",e),this._target.onclick=e&&!this._static?this.bClick:null,this._target.style.pointerEvents=e&&!this._static?"":"none",this}highlight(e=!0){this.div.classList.toggle("act",e);const i=e&&this._index==0&&!this.control.attrOff;return this.div.classList.toggle("off",i),this.enable(!e||this.control._persist),this}set label(e){this.dLabel.innerText=e}}const _n=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="rule" class="rule"></div>
    <div id="cursor" class="cursor"></div>
    <div id="panel" class="panel"></div>
  </div>`;class vn extends xe{constructor(e){super(e);o(this,"_primed",!1);o(this,"_persist",!1);o(this,"_rule");o(this,"_ruleLimit");o(this,"_itemN",0);o(this,"_defP");o(this,"_itemDef",_t);o(this,"list",[]);o(this,"listR",[]);o(this,"last");o(this,"onChange");o(this,"onExecute");this.link("pref"),this.div.insertAdjacentHTML("afterbegin",_n),this.div.classList.add("tna_Radio"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dRule=this.getDiv("rule"),this.dCursor=this.getDiv("cursor"),this.dPanel=this.getDiv("panel"),this._defP=this.getPropVal("--radio-p"),this._rule=this.div.dataset.rule!=null,this._ruleLimit=this.div.dataset.ruleLimit!=null,this.attrOff=this.div.dataset.radioOff!=null,this.enable(this.div.dataset.enable!=null),this.dCursor.style.left=0}init(e){for(let i=0;i<e;i++){const s=document.createElement("div");this.div.appendChild(s)}return this.merge(),this}prime(){return this._primed=!0,this}merge(){const e=this.div.childElementCount;this.setProp("--radio-n",e-1);for(let i=1;i<e;i++){const s=this.div.children[1];this.create(s).touchPrime(),this.dPanel.insertAdjacentElement("beforeend",s)}return this.rule(),this}create(e){const i=new this._itemDef(e,this),s=`${this.id}_item_${this._itemN}`;return e.id=i.id=s,i._index=this._itemN,this.list.push(i),this._itemN++,i}rule(e=this._rule){if(e)for(let i=0;i<=this._itemN;i++){const s=document.createElement("div");this.dRule.appendChild(s),this.listR.push(s),this.dRule.classList.toggle("limit",this._ruleLimit)}return this}index(e){if(this.list.forEach(i=>i.highlight(!1)),e>=0&&this.list[e].highlight(),this._primed&&(this.dCursor.style.transition="left 0.25s"),this.dCursor.style.left=`calc(${this._defP}px + ${e/this._itemN*100}%)`,this.dCursor.style.opacity=1,this._val=e,this.dCursor.classList.toggle("solid",e!=0||this.attrOff),this._rule)for(let i=0;i<=this._itemN;i++){const s=e==i||e+1==i;this.listR[i].classList.toggle("show",!s)}return this}execute(e){this.index(e._index),this.onChange!=null&&this.onChange(this),this.onExecute!=null&&this.onExecute(this),this.push()}set(e=this._val){return this.index(this._val),super.set(this._val),this}enable(e=!0){if(e!=this._enable)return this._enable=e,this.div.classList.toggle("disable",!e),this}persist(e=!0){return this._persist=e,this}label(e){return this.list[e].dLabel}}class vt extends de{constructor(t,e){super(t),this.link(e),this.div.classList.add("tna_Twirl"),this.add='<polygon points="0,88 100,88 50,0"/>',this.def()}draw(){this.div.classList.toggle("open",this.value)}}const mn=`<div class="region">
    <div id="bg" class="bg">
      <div class="folder"></div>
    </div>
    <div id="label" class="label">X</div>
  </div>`;class yn extends _t{constructor(e,i){super(e,i,mn);o(this,"_ind",!1);this.id=`${i.id}_${i._itemN}`,this.dBg=this.getDiv("bg",this.id)}highlight(e=!0){return super.highlight(e),this.div.classList.toggle("ind",e?this._ind:!1),this}indicate(e=!0){return this._ind=e,this.div.classList.toggle("ind",e),this}}class xn extends vn{constructor(e){super(e);o(this,"_itemDef",yn);this.div.classList.add("tna_Tab"),this.merge()}}const wn='<div id="twirl"></div>',D={},L=[];let q,se=0;function bn(){window.head_title.innerHTML="CubeCore User Guide",q=new He("guide_icon").symbol("guide").static().def(),D.tab=new xn("tab").persist(),D.tab.div.classList.add("ready"),D.tab.onExecute=i=>Ue(i.value),document.querySelectorAll(".insert").forEach(i=>{const s=new le(i);s._index=L.length,L.push(s)}),L.forEach((i,s)=>kn(i)),In(),re.items.web_app_2.dynamic();const t=re.items.web_apple;t.dynamic();const e=L[1].sections.Web_Application;e._execute=i=>{re.items.web_app_2.toggle(i.value),t.toggle(i.value?D.appleTwirl.value:0)},D.appleTwirl=new vt("apple_twirl").target("apple_item").show().prime(),D.appleTwirl.onExecute=async i=>{i.toggle(),t.toggle(i.value)},Ue(se)}function kn(n){n.sections={},n.div.querySelectorAll(".insert_section").forEach((e,i)=>{const a=Qe.nest(e,"wrap").createDivFirst();a.innerHTML=wn,a.classList.add("twirl_item");const u=a.querySelector("#twirl");if(u==null)return console.warn("getDiv FAIL");u.id="";const d=new vt(u).target(a).show().prime();d.label=e.dataset.label,d.ext_insert=n,d.ext_insert_index=n._index,d.onExecute=(f,g)=>{f.toggle(g),f.ext_section.toggle(f.value),a.classList.toggle("open",f.value),Dn(f.ext_insert),f._execute!=null&&f._execute(f)},n.sections[e.dataset.label.replace(" ","_")]=d,d.ext_section=new le(e).dynamic(),e.classList.add("insert","inset")})}function In(){document.querySelectorAll("p").forEach((t,e)=>{t.classList.add("txt","clear")})}function Dn(n){let t=!1;for(const[e,i]of Object.entries(n.sections))t=t||i.value;try{n.ext_unfolded=t,D.tab.list[n._index].indicate(t)}catch{}return t}let Xe=!1;function Ue(n){L[se]._scroll=document.querySelector("html").scrollTop,L.forEach((e,i)=>e.toggle(i==n)),D.tab.set(n);const t=L[n]._scroll;if(se!=n)window.scrollTo(0,t!=null?t:0);else if(Xe){const e=L[se].ext_unfolded;for(const[i,s]of Object.entries(L[n].sections))s.onExecute(s,!e)}else Xe=!0;se=n}function Ln(){for(const[n,t]of Object.entries(D))t.prime();L.forEach((n,t)=>{n.prime();for(const[e,i]of Object.entries(n.sections))i.ext_section.prime()}),q!=null&&(q.show().choreo("blink","hal_hot").timing(3,600).act(),q.onAnimEnd=async()=>{await q.delay(100),q.onAnimEnd=void 0,q.choreo("blink","hot").timing(5,100).act()})}function En(){}var Ne={tna:D,init:bn,prime:Ln,close:En};async function $n(){document.title=window.location.hostname.split(".")[0]+" \u2022 Guide",re.init(),ii.init(),w.init(),F.init(),Ne.init(),w.patch(),_.monitor(w.prop.preflight),!w.prop.preflight&&ln.init()}w.upon.prime=()=>{re.prime(),Ne.prime(),window.page.classList.add("show"),window.tab_item.classList.remove("shy")};w.upon.close=()=>Ne.close();function Cn(){}window.addEventListener("load",$n);window.addEventListener("visibilitychange",Cn);
