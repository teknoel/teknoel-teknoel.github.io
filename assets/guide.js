var It=Object.defineProperty;var Dt=(n,t,e)=>t in n?It(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>(Dt(n,typeof t!="symbol"?t+"":t,e),e);const Lt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}};Lt();var Et={};(function(n){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(d){return s(f(d),arguments)}function i(d,u){return e.apply(null,[d].concat(u||[]))}function s(d,u){var g=1,W=d.length,l,S="",w,m,c,ge,Le,Ee,$e,Y;for(w=0;w<W;w++)if(typeof d[w]=="string")S+=d[w];else if(typeof d[w]=="object"){if(c=d[w],c.keys)for(l=u[g],m=0;m<c.keys.length;m++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[m],c.keys[m-1]));l=l[c.keys[m]]}else c.param_no?l=u[c.param_no]:l=u[g++];if(t.not_type.test(c.type)&&t.not_primitive.test(c.type)&&l instanceof Function&&(l=l()),t.numeric_arg.test(c.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(t.number.test(c.type)&&($e=l>=0),c.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,c.width?parseInt(c.width):0);break;case"e":l=c.precision?parseFloat(l).toExponential(c.precision):parseFloat(l).toExponential();break;case"f":l=c.precision?parseFloat(l).toFixed(c.precision):parseFloat(l);break;case"g":l=c.precision?String(Number(l.toPrecision(c.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=c.precision?l.substring(0,c.precision):l;break;case"t":l=String(!!l),l=c.precision?l.substring(0,c.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=c.precision?l.substring(0,c.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=c.precision?l.substring(0,c.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}t.json.test(c.type)?S+=l:(t.number.test(c.type)&&(!$e||c.sign)?(Y=$e?"+":"-",l=l.toString().replace(t.sign,"")):Y="",Le=c.pad_char?c.pad_char==="0"?"0":c.pad_char.charAt(1):" ",Ee=c.width-(Y+l).length,ge=c.width&&Ee>0?Le.repeat(Ee):"",S+=c.align?Y+l+ge:Le==="0"?Y+ge+l:ge+Y+l)}return S}var a=Object.create(null);function f(d){if(a[d])return a[d];for(var u=d,g,W=[],l=0;u;){if((g=t.text.exec(u))!==null)W.push(g[0]);else if((g=t.modulo.exec(u))!==null)W.push("%");else if((g=t.placeholder.exec(u))!==null){if(g[2]){l|=1;var S=[],w=g[2],m=[];if((m=t.key.exec(w))!==null)for(S.push(m[1]);(w=w.substring(m[0].length))!=="";)if((m=t.key_access.exec(w))!==null)S.push(m[1]);else if((m=t.index_access.exec(w))!==null)S.push(m[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");g[2]=S}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");W.push({placeholder:g[0],param_no:g[1],keys:g[2],sign:g[3],pad_char:g[4],align:g[5],width:g[6],precision:g[7],type:g[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");u=u.substring(g[0].length)}return a[d]=W}n.sprintf=e,n.vsprintf=i,typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=i)})()})(Et);function $t(n){return new Promise(t=>{setTimeout(()=>{t()},n)})}String.prototype.camelKabob=function(){let n="";return this.split("").map(t=>{n+=t.toUpperCase()==t?`-${t.toLowerCase()}`:t}),n};String.prototype.kabobCamel=function(){return this.replace(/-./g,n=>n[1].toUpperCase())};function Ct(n,t,e){if(t.value==null){console.warn(`initStorage FAIL name:${n} target:${t}`);return}const i=localStorage.getItem(n);if(i!=null)return t.value=parseFloat(i),console.log(`initStorage ${n}:${t.value} data:${parseFloat(i)}`),t.value;if(e==null)localStorage.setItem(n,Number(t.value)),console.warn(`initStorage none:${n}, target:${t.value}`),t.onDefault!=null&&t.onDefault();else return localStorage.setItem(n,Number(e)),console.warn(`initStorage none:${n}, default:${e}`),t.value=e,e}function Tt(n){const t=n.split(".");let e="";for(let i in t)e+=i!=1?t[i]:Number("0x"+t[1]),i<t.length-1&&(e+=".");return e}var N={delay:$t,initStorage:Ct,versionString:Tt};let re;function Ot(){document.body.insertAdjacentHTML("beforeend",'<svg height="0" width="0" style="visibility: hidden"></svg>'),re=document.body.lastChild}function St(n,t){re.insertAdjacentHTML("beforeend",'<symbol id="" viewBox="0 0 100 100"></symbol>'),re.lastChild.id="sym_"+n,re.lastChild.innerHTML=t}function Pt(n){re.insertAdjacentHTML("beforeend",n)}Ot();var h={add:St,def:Pt};function At(){h.add("warn_ui",`<g stroke-width="12" stroke-linecap="round" stroke-linejoin="round" >  
      <polygon stroke="var(--icon-fg)" fill="var(--icon-fg)" points="50 12.69 7.5 86.31 92.5 86.31 50 12.69" />
      <g>
        <polyline stroke="var(--icon-bg)" fill="none" points="50 55 50 32" />
        <circle fill="var(--icon-bg)" stroke="none" cx="50" cy="78" r="7" />
      </g>    
    </g>`),h.add("warn_text",`<g stroke="var(--icon-fg)" fill="none">
      <path stroke-width="6px" stroke-linejoin="round" d="M66,91.39H90.59A6.2,6.2,0,0,0,96,82.08L55.37,11.78a6.2,6.2,0,0,0-10.74,0L4,82.08a6.2,6.2,0,0,0,5.37,9.31H34" />    
      <polyline stroke-width="14px" points="50 73 50 55.5 50 38" />
      <polyline stroke-width="14px" points="50 94.5 50 80.5" />
    </g>`),h.add("hit",`<defs>
      <radialGradient id="grad">
        <stop offset="0%" stop-color="rgb(0,0,0,1)" />
        <stop offset="33%" stop-color="rgb(0,0,0,0.3)" />
        <stop offset="90%" stop-color="transparent" />
      </radialGradient>
    </defs>
    <g transform="translate(50 50)">
      <circle fill="url('#grad')" stroke-width="4px" stroke="var(--icon-bg)" cx="0" cy="0" r="48" />
    </g>`),h.add("halo",`<g transform="translate(50 50)">
      <circle fill="none" stroke-width="4px" stroke="var(--icon-fg)" cx="0" cy="0" r="48" />
    </g>`),h.add("show",`<g fill="var(--icon-fg)">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM50,31A19,19,0,1,0,69,50,19,19,0,0,0,50,31Zm0,9A10,10,0,1,0,60,50,10,10,0,0,0,50,40Z" />
    </g>`),h.add("hide",`<g fill="var(--icon-fg)" stroke="none">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM89.82,50C79.39,38.17,63.45,30,50,30S20.62,38.17,10.19,50C20.62,61.83,36.55,70,50,70S79.39,61.83,89.82,50Z" />
      <circle cx="50" cy="50" r="14" />
    </g>
    <g stroke-linecap="butt" transform="translate(50 50) rotate(45)">
      <line stroke="var(--icon-bg)" stroke-width="16" x1="-40" y1="0" x2="40" y2="0" />
      <line stroke="var(--icon-fav)" stroke-width="5" x1="-50" y1="0" x2="50" y2="0" />
    </g>`),h.add("wifi_def",`<g fill="none">
      <circle stroke="var(--icon-fg)" stroke-width="16" cx="0" cy="0" r="8"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="32"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="52"></circle>
   </g>`),h.add("wifi",`<g transform="translate(50, 84) rotate(-135) scale(1.25)">
      <use href="#sym_wifi_def" />
    </g>`),h.add("info",`<g stroke="var(--icon-fg)" fill="none">
      <circle stroke-width="5" cx="50" cy="50" r="47.5"></circle>
      <g stroke-width="16" transform="translate(11) skewX(-12)">
        <line x1="50" y1="82" x2="50" y2="44" />
        <line x1="50" y1="34" x2="50" y2="18" />
      </g>
    </g>`),h.add("help",`<g transform="translate(50 50)" stroke="none">
      <path d="M8.6,33.2H-8.6V23.6H8.6Zm12-60.4H-20.6c-5,0-10.3,3.6-10.3,8.3v8.8h16.5v-10H14.4v18H.7c-5.6,0-9.3,3.5-9.3,9.4v9.1H8.6V7.9c0-2.7,1-3.3,3.7-3.3h8.3C25.2,4.6,30.9.8,30.9-4V-18.9C30.9-23.6,25.6-27.2,20.6-27.2Z" /> 
    </g>`),h.add("help_button",`<g>
      <use href="#sym_halo" />
      <use href="#sym_help" />
    </g>`),h.add("tap",`<g>
      <polygon fill="var(--icon-fg)" stroke="none" points="86.76 0 66.96 0 49.87 17.09 32.84 0 13.08 0 49.85 36.91 86.76 0" />
      <g stroke="var(--icon-fg)">
        <line stroke-width="14px" y1="50" x2="100" y2="50" />
        <g stroke-width="10px" >
          <line class="cls-3" x1="50" y1="100" x2="50" y2="77" />
          <line class="cls-3" x1="14.64" y1="85.36" x2="30.91" y2="69.09" />
          <line class="cls-3" x1="85.36" y1="85.36" x2="69.09" y2="69.09" />
        </g>
      </g>
    </g>`),h.add("twirl",`<g fill="var(--icon-fg)" stroke="none">
    <polygon points="0,88 100,88 50,0"/>
  </g>`),h.add("refresh",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <polyline points="3.536 52.75 19.036 37.25 34.536 52.75" transform="translate(-49.75 -48)" />
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),h.add("refresh_run",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),h.add("undo",`<g transform="scale(-1 1) translate(-100 0)" stroke="var(--icon-fg)" stroke-width="8" fill="none">
      <polyline points="46.21 53.21 30 37 46.21 20.79" />
      <path d="M33,79H60.48a21,21,0,1,0,0-42H30" />
      <line x1="18" y1="18" x2="18" y2="56" />
    </g>`),h.add("dot",`<g transform="translate(50, 50)">
      <circle fill="var(--icon-fg)" cx="0" cy="0" r="50"></circle>
    </g>`),h.add("o",`<g transform="translate(50, 50)">
      <circle stroke="var(--icon-fg)" stroke-width="22" fill="none" cx="0" cy="0" r="39"></circle>
    </g>`),h.add("x",`<g stroke="var(--icon-fg)" stroke-width="22">
        <line x1="12" y1="12" x2="88" y2="88"></line>
        <line x1="12" y1="88" x2="88" y2="12"></line>
    </g>`),h.add("bar_1",`<g transform="translate(0, 0)">
      <line stroke="var(--icon-fg)" stroke-width="22" x1="50" y1="0" x2="50" y2="100"></line>
    </g>`),h.add("bar_2",`<g stroke="var(--icon-fg)" stroke-width="22" transform="translate(0, 0)">
      <line x1="20" y1="0" x2="20" y2="100"></line>
      <line x1="80" y1="0" x2="80" y2="100"></line>
    </g>`),h.add("vol_wave_0",`<g transform="translate(0, 0)">
      <g transform="scale(0.5) translate(100, 50)">
        <use href="#sym_x" />
      </g>
    </g>`),h.add("vol_wave_1",`<g transform="translate(0, 0)">
      <path stroke="var(--icon-fg)" stroke-width="10" fill="none" d="M62.7,31.63a28.5,28.5,0,0,1-.45,36.29"/>
     </g>`),h.add("vol_wave_2",`<g transform="translate(0, 0)">
      <use href="#sym_vol_wave_1" />
      <path stroke="var(--icon-fg)" stroke-width="12" fill="none" d="M80.21,14.44a52.94,52.94,0,0,1-.06,71.07"/>
     </g >`),h.add("lock",`<g>
      <path transform="translate(62 55)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
      </g>`),h.add("unlock",`<g>
      <path transform="translate(25 50)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
    </g>`),h.add("bell",`<g transform="translate(5 10)" stroke-width="10" stroke="var(--icon-fg)" fill="none">
      <g transform="translate(-7 -9.73)">
        <path d="M60.59,74a11,11,0,1,1-21.18,0Z" />
        <path d="M79,73,68.5,33.16C67.31,29,63.94,26,59.7,26H40.63a9.42,9.42,0,0,0-8.8,7.12L21.33,73" />
      </g>
      <line x1="43" y1="19.31" x2="43" />
      <line y1="63.27" x2="86" y2="63.27" />
    </g>`),h.add("tna_hex",`<g stroke="var(--icon-fg)" fill="none">
        <polygon points="88.97 72.5 50 95 11.03 72.5 11.03 27.5 50 5 88.97 27.5 88.97 72.5" />
    </g>`),h.add("tna_n",`<g stroke="var(--icon-fg)" fill="none">
        <polyline stroke-linecap="round" stroke-linejoin="round" points="28.71 61.84 28.71 38.16 71.29 61.84 71.29 38.16" />
    </g>`),h.add("tna",`<g>
      <use href="#sym_tna_hex" />
      <use href="#sym_tna_n" />
    </g>`),h.add("warn_tna",`<g fill="var(--icon-fg)" stroke="none" transform="translate(50, 50)">
      <path d="M-17-25.7l-8.2-14.2,4.7-2.7h41l4.7,2.7L17-25.7l16.5,9.5,8.2-14.2L50-25.6l-24.8,43H9.5v-30h-19v30H-25.2L-50-25.6l8.3-4.8,8.2,14.2Zm22.5,52h-11l-9.4,16.3H14.9Z"/>
    </g>`)}At();function Mt(){h.add("button_L",`<g>
      <circle fill="var(--icon-fg)" cx="50" cy="50" r="50"></circle>
      <path fill="var(--icon-bg)" transform="translate(14) skewX(-12)" d="M26.06,23.17H40.84V63H74.08V76.75h-48Z" />
    </g>`),h.add("button_R",`<g>
      <circle fill="var(--icon-fg)" cx="50" cy="50" r="50"></circle>
      <path fill="var(--icon-bg)" transform="translate(12) skewX(-12)" d="M23.96,23.17H62.59c11.39,0,14.45,6.29,14.45,15.91v3.4c0,7.18-1.47,11.4-8.26,13.17v.15c4.4,.89,8.06,3.03,8.06,11.84v9.1h-14.79v-6.44c0-5.62-1.47-7.47-6.06-7.47h-17.24v13.91h-14.79V23.17Zm14.79,26.35h18.44c4,0,5.46-1.78,5.46-5.62v-1.78c0-4.74-2.13-5.62-6.79-5.62h-17.11v13.02Z"> </g>`),h.add("repeat",`<g fill="var(--icon-fg)" stroke="none">
      <circle cx="15" cy="50" r="24"></circle>
      <circle cx="70" cy="50" r="12"></circle>
    </g>`),h.add("button_seq",`<g stroke="var(--icon-fg)" stroke-width="12" stroke-opacity="0.5" fill="none">
      <line x1="50" y1="0" x2="50" y2="100" />
    </g>`),h.add("button_seq_end",`<g stroke="var(--icon-fg)" stroke-width="12" stroke-opacity="0.5" fill="none">
      <line x1="50" y1="0" x2="50" y2="30" />
      <line x1="50" y1="45" x2="50" y2="70" />
      <line x1="50" y1="85" x2="50" y2="100" />
    </g>`),h.add("arrow",`<g stroke="var(--icon-fg)" fill="none">
      <line x1="0" y1="50" x2="88" y2="50" />
      <polyline points="52 86 88 50 52 14" />
    </g>`),h.add("guide",`<g transform="translate(0 -3)">
      <g stroke-width="7px" stroke="var(--icon-fg)" fill="none">
        <path d="M96,26.5v66H70.18c-6.81,0-11.42,3-14.09,7H43.91c-2.67-4-7.28-7-14.09-7H4v-66" />
      </g>
      <g fill="var(--icon-fg)" stroke="none">
        <path d="M67.18,15.5H86v67H69c-8.12,0-13.14,2.93-15.75,6v-68c2.67-3,7.12-5,13.93-5" />
        <path d="M46.75,21.5c0-11.34-6.84-18-19.25-18v65c11.76,0,17.56,8.33,19.25,20Z" />
        <path d="M27.5,75.5h-7v-60H14v67H31a27,27,0,0,1,7.35,1C35.73,76.45,31.07,75.5,27.5,75.5Z" />
      </g>
    </g>`)}Mt();const We=["ping","call","ux","info","push","save","sync"],Ye=["call_prime","call_console","call_tune","call_warn","call_restart","call_admin","call_photo","call_gps_log"],Rt=["none","default","notify","toggle_on","toggle_off","alarm","close_encounter","charge_fanfare","bonanza","guantanamera","rhythm_dancer"],Ht=["OK",'"index.html" served from FS'],Ke=["null","sys_splash","sys_boot","sys_ap","sys_ota","sys_restart","sys_fail","reset_user","reset_admin","net_setup","net_menu","net_fail","set_bright","set_sound","tap_menu","tap_test","tap_notify","clock_static","clock_hide","clock_switch","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","alarm_menu","alarm_set","alarm_notify","alarm_snooze","diag_info","diag_serial","diag_console","diag_net","diag_net_mac","diag_gps","diag_led","photo"],Qe=["idle","init","begin","splash","prime","ready","run","update","wait","confirm","notify","commit","end","exit","cancel","expire","fail"],et=["info_rc","info_user","info_mfg","info_reg","info_hardware","info_firmware","info_install","info_uptime","info_net","info_rssi","info_display","info_status","info_tap","info_ntp","info_gps","info_gps_log"],tt=["admin_sign","admin_fpo","ota_version","ota_version_fs","ota_time","ota_time_fs","ota_fpo","mfg_product","mfg_version","mfg_date","mfg_serial","mfg_logic","mfg_display","mfg_color","mfg_note","mfg_fpo","reg_date","reg_name_1","reg_name_2","reg_user","reg_gift","reg_gp_1","reg_gp_2","reg_fpo","sys_output","sys_console","sys_fpo","def_name","def_device","def_ssid","def_pass","def_alert","def_net_fpo","def_bright","def_sound","def_av_fpo","def_tap_act","def_tap","def_tilt","def_tap_fpo","def_ntp_serve","def_ntp_int","def_ntp_fpo","def_nts_fpo","def_gps_alert","def_gps_log_i","def_gps_log_x","def_gps_fpo","def_tz","def_dst","def_24h","def_pps","def_clock_fpo","def_alarm_ind"],Nt=100,it=["ux_boot","ux_index","ux_fpo","user_consent","user_fpo","net_name","net_device","net_ssid","net_pass","net_alert","net_fpo","ui_bright","ui_sound","ui_fpo","tap","tap_mode","tap_tilt","tap_alert","tap_fpo","ntp_server","ntp_interval","ntp_fpo","nts_fpo","gps_alert","gps_log_int","gps_log_ratio","gps_fpo","clock_static","clock_disp","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","clock_fpo","alarm_tap","alarm_fpo","daily","daily_ind","daily_tone","daily_vol","daily_d","daily_h","daily_m","daily_snooze"],Bt={display:0,piezo:1,xpio:2,gps:3},Ft={display:1,piezo:2,xpio:4,gps:8},jt=["CLOCK_HHMM","CLOCK_DATE","CLOCK_MMSS"],zt=["NTP","GPS","pps","none"],qt={action:We,call:Ye,ux:Ke,info:et,admin:tt,pref:it,stage:Qe};var y={master:qt,hwOffset:Bt,hwMask:Ft,actionID:We,callID:Ye,tuneID:Rt,warnID:Ht,uxID:Ke,stageID:Qe,infoID:et,prefBase:Nt,prefID:it,adminID:tt,clockID:jt,serviceID:zt};const Q={},ee={};let B=!1;var r={...y,getPrefID:Vt,controls:Q,linkControl:Xt,getControlByID:Gt,getControlByIndex:Ut,dialogs:ee,linkDialog:Jt,printDialogs:Yt,getDialogByIndex:Wt,tron:Zt};function Xt(n){const t=y.master[n.linkType];if(t==null){B&&console.log(`linkControl FAIL id:${n.id}, bad type:${n.linkType}`);return}const e=t.indexOf(n.id),i=n.linkType=="pref"?y.prefBase:0;return e<0?(B&&console.log(`linkControl FAIL not found id:${n.id}`),!1):(n.linkID=e+i,Q[n.id]={obj:n},!0)}function Gt(n){if(Q.hasOwnProperty(n))return Q[n].obj;B&&console.log(`map.getControlByID FAIL no table entry for ${n}`)}function Ut(n,t){let e=0;switch(n){case"action":e=y.actionID[t];break;case"call":e=y.callID[t];break;case"ux":e=y.uxID[t];break;case"info":e=y.infoID[t];break;case"pref":e=y.prefID[t-y.prefBase];break;case"admin":e=y.adminID[t];break}if(e==0){B&&console.log(`map.getControlByIndex FAIL not registered ${typeID}: ${t}`);return}if(Q.hasOwnProperty(e))return Q[e].obj;B&&console.log(`map.getControlByIndex FAIL no object ${typeID}:${t}`)}function Vt(n){let t=y.prefID.indexOf(n);if(t!=-1)return t+y.prefBase;console.warn(`getPrefID FAIL ${n} not found`)}function Zt(n=!0){B=n}function Jt(n){const t=y.uxID.indexOf(n.id);switch(t){case-1:return B&&console.log(`map.linkDialog FAIL id:${n.id}`),!1;default:n.linkID=t,ee[n.id]={obj:n};break}return!0}function Wt(n){const t=y.uxID[n];if(t==null){B&&console.log(`map.getDialogByIndex FAIL ux not registered for ${n}`);return}if(ee.hasOwnProperty(t))return ee[t].obj;B&&console.log(`map.getDialogByIndex FAIL no object for :${t}`)}function Yt(){console.warn("printDialogs");for(const n in ee)console.log(`  ${ee[n].obj.id}`)}Element.prototype.createDiv=function(n){const t=document.createElement("div");return t.id=n,this.appendChild(t),t};Element.prototype.createDivFirst=function(n){const t=document.createElement("div");return n!=null&&(t.id=n),this.insertAdjacentElement("afterbegin",t),t};function Kt(n,t){const e=document.createElement("div"),i=n.id;return n.insertAdjacentElement("afterend",e),e.appendChild(n),i.length!=0&&(e.id=i),e.classList.value=n.classList.value,n.classList.value="",n.removeAttribute("id"),t!=null&&n.classList.add(t),e}var nt={nest:Kt};class F{constructor(t,e){o(this,"_id");o(this,"_tags",[]);o(this,"_valRef");o(this,"_valIO",!1);o(this,"_val");o(this,"_valLast");o(this,"_tron",!1);o(this,"_view",!1);o(this,"_height",0);o(this,"div");o(this,"data");o(this,"onChange");o(this,"onRender");switch(e=t.nodeType!=null?"div":e,e){case"object":case"obj":this.id=t;break;case"div":this.div=t,this.div.tna=this,this.id=t.id;break;case"id":default:this.div=document.getElementById(t),this.div!=null?this.div.tna=this:console.error(`tna construct no element for ${t}`),this.id=this.div==null?t:this.div.id;break}this.bRenderEnd=this.renderEnd.bind(this)}fuse(){return this.div==null?console.warn(`${this.id} fuse no div`):(this.div.classList.add("_tna"),this)}shy(t=!0){return this.div.classList.toggle("shy",t),this}prime(t=!0){if(this.div!=null)return this.div.classList.toggle("prime",t),this}touchPrime(){return this.div.ontouchstart=()=>{},this}show(){return this.render(!0),this}hide(){return this.render(!1),this}view(t=!0,e=!1){return this.render(t,e),this}viewStaged(t){return this.view(t,!0)}render(t=this._view,e=!1){this._view=t,this.div.classList.toggle("show",t),e?this.div.addEventListener("transitionend",this.bRenderEnd):this.callRender()}draw(){}renderEnd(){this.div.removeEventListener("transitionend",this.bRenderEnd),this.div.style.transition="",this.callRender()}callRender(){this.onRender!=null?this.onRender(this):this._view&&(this.onShow!=null?this.onShow(this):this.onHide!=null&&this.onHide(this))}display(t=!0){return console.log(`${this.id} display b:%o`,t),this.div.style.display=t?"":"none",this}getDiv(t,e){const i=this.div.querySelector(`#${t}`);if(i==null){console.warn(`${this.id} getDiv FAIL for "${t}"`);return}const s=e==null?this.div.id:e;return i.id=`${t}_${s}`,i}setProp(t,e){this.div.style.setProperty(t,e)}getProp(t){return getComputedStyle(this.div).getPropertyValue(t)}getPropVal(t){return parseFloat(this.getProp(t))}getDataAttr(t,e,i){const s=this.div.dataset[t],a=`--${t.camelKabob()}`,f=this.getProp(a);let d,u="";switch(e){case"pixel":u="px";case"integer":d=parseInt(s);break;case"percent":u="%";case"number":case"float":d=parseFloat(s);break;case"s":d=parseFloat(s)*1e3;break;case"string":return s==null?f.length>0?f:i:(d=s,d);default:d=parseFloat(s),s.indexOf("%")>0&&(u="%"),s.indexOf("px")>0&&(u="px");break}return isNaN(d)&&(d=parseInt(f),f.indexOf("%")>0&&(u="%"),f.indexOf("px")>0&&(u="px")),isNaN(d)&&d!=null&&(d=i),this.div.style.setProperty(a,d+u),d}parent(t,e){for(;!(t.id.indexOf(e)!=-1||t.parentElement==null);)t=t.parentElement;return t}async delay(t=1){return new Promise(e=>{setTimeout(()=>{e()},t)})}set(t){return this.data=t,t!=this._valLast&&(this.draw(),this.onChange!=null&&this.onChange(this,t),this._valLast=t),this}enable(t=!0){return this._enable=t,this}tag(...t){for(const e of t)this._tags.push(e);return this}hasTag(...t){let e=!1;for(const i of t)e=e||this._tags.find(s=>s==i);return e}latchClass(t){return this.div.querySelectorAll("._"+t).forEach(i=>i.classList.add(t)),this}set id(t){this._id=t}get id(){return this._id}valRef(t){return this._valRef=t,this}valIO(){return this._valIO=!0,this}set value(t){if(this._valIO&&this._valRef!=null&&this._valRef[0].val!=null){let e=this._valRef.findIndex(i=>i.val==t);e==-1&&(e=0,console.warn(`${this.id} set value(${t}) FAIL not in valRef, using _val:0`)),t=e}this._val=t}get value(){let t=this._val;return this._valIO&&this._valRef!=null&&this._valRef[0].val!=null&&(t=this._valRef[t].val),t}set height(t){this._height=t}get height(){return this._height}tron(t=!0){return this._tron=t,this}clamp(t,e,i){return Math.min(Math.max(t,e),i)}easeLinear(t,e,i,s){return i*t/s+e}easeInQuad(t,e,i,s){return i*(t/=s)*t+e}easeOutQuad(t,e,i,s){return-i*(t/=s)*(t-2)+e}easeInOutQuad(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}easeInSine(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e}easeOutSine(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e}easeInOutSine(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e}easeInCubic(t,e,i,s){return i*(t/=s)*t*t+e}easeOutCubic(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e}easeInOutCubic(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}easeOutElastic(t,e,i,s){let a,f=0,d=i;return t==0?e:(t/=s)==1?e+i:(f||(f=s*.3),d<Math.abs(i)?a=f/4:a=f/(2*Math.PI)*Math.asin(i/d),d*Math.pow(2,-10*t)*Math.sin((t*s-a)*(2*Math.PI)/f)+i+e)}}class ce extends F{constructor(e){super(e);o(this,"_enable",!1);o(this,"_dynamic",!1);o(this,"_val",!1);o(this,"onChange");this.div.classList.add("tna_Accord"),this.div.dataset.dynamic!=null&&this.dynamic(),this.div.dataset.open!=null&&this.open(),this.div.dataset.prime!=null&&this.prime(),this._spill=this.div.dataset.spill!=null,this.bSpill=this.spill.bind(this)}prime(){return this.div.classList.add("prime"),this}resize(){const e=this.div.classList.contains("prime");this.div.classList.remove("prime"),this.div.classList.add("open"),this.div.style.setProperty("--accord-h","");const i=this.div.offsetHeight;this.div.style.setProperty("--accord-h",i+"px"),this.div.classList.toggle("open",this._val),this.div.classList.toggle("prime",e)}toggle(e){return this._val=e==null?!this._val:e,this._val?this.open():this.close(),this}open(){return this._val=!0,this.div.classList.add("open"),this._spill&&this.div.addEventListener("transitionend",this.bSpill),this.onChange!=null&&this.onChange(this),this}close(){return this._val=!1,this.div.classList.remove("open","spill"),this.onChange!=null&&this.onChange(this),this}spill(){return console.log(`${this.id} spill`),this.div.classList.add("spill"),this.div.removeEventListener("transitionend",this.bSpill),this}dynamic(e=!0){return e&&!this._dynamic?window.addEventListener("resize",this.resize.bind(this)):window.removeEventListener("resize",this.resize.bind(this)),this.resize(),this._dynamic=e,this}}class he extends F{constructor(e,i){super(e,i);o(this,"_enable",!1);o(this,"autoEnable",!0);o(this,"primed",!1);o(this,"synced");o(this,"linked");o(this,"linkType");o(this,"linkID");o(this,"valPush");o(this,"valSave");o(this,"lastTime");this._val=0}link(e){e!=null&&(this.linkType=e,this.linked=r.linkControl(this))}sync(e){const i=e.v;this.value=i,this.valPush=this.valSave=i,this.set(e),this.synced||(this.autoEnable&&this._enable!=null&&this.enable(),this.synced=!0)}push(){if(this.linked==!1)return;const e=this.value;e!=this.valPush&&(this.valPush=e,this.send("push",e))}save(){if(this.linked==!1)return;const e=this.value;e!=this.valSave&&(this.valSave=this.valPush=e,this.send("save",e))}send(e,i){const s={a:r.actionID.indexOf(e),t:[]};s.t.push({i:this.linkID,v:i|0}),this.linked!=null&&p.transmit(s,`${this.id} >>`)}}const Qt=`<div id="region" class="region">
    <div id="wrap" class="wrap"></div>
    <div id="label"></div>
  </div>`;class fe extends he{constructor(e,i){super(e);o(this,"_enable",!0);o(this,"_highlight",!1);o(this,"_static",!1);o(this,"_target");o(this,"_index");o(this,"_x0",0);o(this,"_y0",0);o(this,"_x1",100);o(this,"_y1",100);o(this,"_x",0);o(this,"_y",0);o(this,"_scaleX",1);o(this,"_scaleY",1);o(this,"list",[]);o(this,"onExecute");this.link(i),this.target(this.div),this.div.insertAdjacentHTML("beforeend",Qt),this.div.classList.add("tna_Icon"),this.dRegion=this.getDiv("region"),this.dWrap=this.getDiv("wrap"),this.dLabel=this.getDiv("label"),isNaN(this.getPropVal("--icon-w"))&&this.setProp("--icon-w",this.getProp("--icon-h")),this._val=0,this.label=this.getDataAttr("label","string","")}set add(e){const i=`
      <svg class="svg" viewBox="${this._x0} ${this._y0} ${this._x1} ${this._y1}">
        <g><circle cx="0" cy="0" r="50" /></g>
      </svg>`;this.dWrap.insertAdjacentHTML("beforeend",i);const s=this.dWrap.lastChild,a=s.lastElementChild;a.innerHTML=e,this.list.push(s),this.update()}set addCenter(e){this.add=e,this.list.slice(-1)[0].lastElementChild.firstElementChild.setAttribute("transform","translate(-50 -50)")}symbol(e){return window["sym_"+e]==null?console.warn(`${this.id} addSymbol FAIL: ${e}`):this.add=`<use href="#sym_${e}"/>`,this}enable(e=!0){return e==this._enable?this:(this._enable=e,this.render(),this)}render(e=this._view,i){super.render(e,i),this.div.classList.toggle("interact",e&&this._enable&&!this._static),this.div.classList.toggle("disable",!this._enable&&this._view)}set index(e){if(e=Number(e),isNaN(e))return console.warn(`${this.id} set index NaN`);if(e==this._index)return;this._index!=null&&this.list[this._index].classList.remove("show"),this.list[e].classList.add("show"),this._index=e}get index(){return this._index}def(){return this.index=0,this}toggle(e){return this._val=e==null?!this._val:e,this.draw(e),this}cycle(){let e=this._index+1;return e=e>=this.list.length?0:e,this.index=e,this.draw(),this}clear(){this.list.forEach(e=>e.remove()),this.list=[]}update(){const e=`translate(${this._x} ${this._y}) scale(${this._scaleX} ${this._scaleY})`;for(let i in this.list)this.list[i].firstElementChild.setAttribute("transform",e)}execute(){this.onExecute!=null&&this.onExecute(this),this.onChange!=null&&this.onChange(this)}set(e){typeof e!="object"&&(this.value=e),e!=this.lastVal&&(this.index=this.value),super.set(e)}svgRef(e){return e>this.list.length-1?console.warn(`${this.id} svgRef FAIL, bad index`):this.list[e]}gRef(e){return e>this.list.length-1?console.warn(`${this.id} gRef FAIL, bad index`):this.list[e].firstElementChild}viewBox(e,i,s,a){return this._x0=e,this._y0=i,this._x1=s,this._y1=a,this}translate(e,i){return this._x=e,this._y=i,this.update(),this}center(){return this.translate(50,50),this}scaleXY(e,i){return this._scaleX=e,this._scaleY=i,this.update(),this}scale(e){return this._scaleX=this._scaleY=e,this.update(),this}scaleCenter(e){return this._scaleX=this._scaleY=e,this._x=50,this._y=50,this.update(),this}sizeXY(e,i){return this.div.style.setProperty("--icon-h",i+"px"),this.div.style.setProperty("--icon-w",e+"px"),this}size(e){return this.div.style.setProperty("--icon-x",e),this}highlight(e){if(e==-1&&(e=!this._enable),!!this._enable)return this._highlight=e,this.div.classList.toggle("highlight",e),this}static(e=!0){return this._static=e,this.div.classList.toggle("interact",!e),this}set label(e){const i=e.length>0;this.dLabel.innerText=i?e:"",this.dLabel.classList.toggle("label",i)}target(e){return this._target=typeof e=="string"?window[e]:e,this._target.onclick=this.execute.bind(this),e!=this.div&&(this.div.style.pointerEvents="none"),this}enabled(){return this._enable}}class Be extends fe{constructor(e,i){super(e);o(this,"_class");o(this,"_anim");o(this,"_count",0);o(this,"_duration",0);o(this,"_delay",0);o(this,"onAnimEnd");this.link(i)}async act(e=!0){const i=this._class!=null?"act_"+this._class:"act";if(this.div.classList.contains(i)&&(this.div.classList.remove(i),await this.delay()),this.div.classList.toggle(i,e),e){const s="tna_Icon_"+(this._anim!=null?"act_"+this._anim:"act");this.div.onanimationend=a=>{`${this.id}`,a.animationName==s&&this.div.classList.remove(i),this.div.onanimationend=void 0,this.onAnimEnd!=null&&this.onAnimEnd(this)}}else this.div.onanimationend=void 0;return this}choreo(e,i){return this._anim=e,this._class=e+(i==null?"":"_"+i),this}timing(e,i=this._dur,s=0){this._count=e=Number(e),this._dur=i=Number(i),this._delay=s=Number(s);const a="--icon-act_"+this._anim;return this.setProp(a+"-n",e==0?"infinite":e),this.setProp(a+"-t",i+"ms"),this.setProp(a+"-d",s+"ms"),this}property(e,i){this.dWrap.style.setProperty("--icon-act-"+e,i)}}const ei=`<g fill="var(--icon-fg)" transform="translate(-50, -50)">
      <use href="#sym_hit" />
    </g>
    <g fill="var(--icon-fg)" transform="translate(-50, -50)">
      <use href="#sym_help" />
    </g>`,ti=`<circle fill="white" stroke="none" cx="0" cy="0" r="50" />
    <g fill="black" transform="translate(-50, -50)">
      <use href="#sym_help" />
    </g> `;var qe={help_1:ei,help_2:ti};const st={},V={enable:!1},ne={};let I;function ii(){ai();let n;n=document.querySelectorAll("._help"),n.forEach(t=>nt.nest(t,"wrap")),n=document.querySelectorAll("._help"),n.forEach((t,e)=>{t.id.length==0&&(t.id=`help_${e}`);const i=t.id.length!=0?t.id:e;t.setAttribute("data-dynamic",""),ne[i]=new ce(t.id)}),window.help!=null&&(st.button=I=new fe("help").show(),I.add=qe.help_1,I.add=qe.help_2,I.translate(50,50).def(),I.onExecute=t=>{t.value^=!0},I.onChange=async t=>{t.index=t.value,t.value||(x.prop.prime_local=!1),localStorage.setItem("help",Number(t.value)),ot()},N.initStorage("help",I,!0)),V.flag=!1}function ni(){I.onChange(I)}async function si(){for(const[n,t]of Object.entries(ne))t.prime()}function oi(){return!!I.value}function ot(n){V.enable=!!I.value;for(const[t,e]of Object.entries(ne))e.toggle(V.enable);V.onUpdate!=null&&V.onUpdate(V.enable)}function ri(n){ne[n.id]=n}function ai(){let n;n=document.querySelectorAll("._help"),n.forEach((t,e)=>{t.id.length==0&&(t.id=`help_${e}`);const i=t.id.length!=0?t.id:e;ne[i]=new ce(t.id)})}var li={tna:st,prop:V,item:ne,init:ii,prime:si,stage:ni,state:oi,update:ot,add:ri};const te=[];let ie;function di(n,t){const e=window[n];if(e==null)return console.log(`panel.add() FAIL, cannot find ${n}`);e.dataset.index=te.length,te.push({id:n,title:t,panel:e})}function ci(){if(ie!=null)return te[ie].panel}function hi(){return ie}function fi(){return ie!=null?te[ie].id:void 0}function rt(n,t=!1){n<0||(ie=n,te.forEach((e,i)=>{const s=e.panel,a=n==i;t||(s.classList.toggle("show",a),s.children[0].classList.toggle("show",a)),a&&s._tna_begin!=null&&s._tna_begin()}))}function ui(n,t=!1){const e=te.findIndex(i=>i.id==n);return e!=null&&rt(e,t),e}function gi(n){return new URLSearchParams(n).get("panel")}var ve={add:di,current:ci,currentID:fi,currentIndex:hi,index:rt,setByID:ui,inject:gi};class Oe extends F{constructor(e,i){super(e,"div");o(this,"_static",!1);o(this,"_index");o(this,"_label");o(this,"_html");o(this,"_target");o(this,"control");o(this,"bClick");if(i!=null){this.control=i,this.div.classList.add("menu_item"),this.dLabel=this.getDiv("label"),this.bClick=this.click.bind(this);let s=this.div.querySelector("._click");s==null&&(s=this.div),s._tna_target=this.div,this._target=s}else this.div.classList.add("menu_static"),this._target=this.div,this.static();this.enable()}click(e){let i=e.target._tna_target;i==null&&(i=this.parent(e.target,"_item")),this.execute(i),e.preventDefault(),e.stopImmediatePropagation()}async execute(e){this.control.click(this),this.div.classList.remove("hover"),this.div.classList.add("action"),await this.delay(360),this.control.view(!1),await this.delay(300),this.div.classList.remove("action"),this.control.execute(this)}enable(e=!0){return this.enabled=e,this.control!=null&&this.div.classList.toggle("hover",e&&this.control._hover),this.div.classList.toggle("enable",e),this._target.onclick=e&&!this._static?this.bClick:null,this._target.style.pointerEvents=e&&!this._static?"":"none",this}highlight(e=!0){return this.div.classList.toggle("highlight",e),this.enable(!e),this}set label(e){this.dLabel.innerText=this._label=e}get label(){return this._label}set html(e){this.dLabel.innerHTML=this._html=e}static(e=!0){return this._static=e,this._target.onclick=this.enabled&&!this._static?this.bClick:null,this._target.style.pointerEvents=e?"none":"",this}}const pi=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="panel" class="panel"></div>
  </div>`,_i=`<div>
    <div id="label" class="label"></div>
  </div>`;class vi extends F{constructor(e,i=pi){super(e);o(this,"_enable",!1);o(this,"_index");o(this,"_highlight",!1);o(this,"_hover",!0);o(this,"_static_high",!0);o(this,"_wipe",!1);o(this,"_tm_open");o(this,"_tm_close");o(this,"_block_tm_open");o(this,"_block_tm_close");o(this,"_block_opacity");o(this,"_itemT");o(this,"_staticT");o(this,"_itemN",0);o(this,"_staticN",0);o(this,"pool",[]);o(this,"list",[]);o(this,"last");o(this,"onBegin");o(this,"onEndPrime");o(this,"onEnd");o(this,"onPrime");o(this,"onExecute");o(this,"onResize");this._itemT=_i,this.div.insertAdjacentHTML("afterbegin",i),this.div.classList.add("tna_Menu"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dPanel=this.getDiv("panel"),this.getDiv("banner"),this.blocked=this.div.dataset.block!=null,this.blocked&&(this.dBlock=document.createElement("div"),this.dBlock.id="block",this.div.insertAdjacentElement("afterbegin",this.dBlock),this.getDiv("block"),this.dBlock.classList.add("block"),this.dBlock.onmousedown=this.dBlock.ontouchstart=this.escape.bind(this)),this._highlight=this.div.dataset.highlight!=null,this.enable(this.div.dataset.enable!=null),this._block_opacity=this.getProp("--menu-block-a"),this.itemH=this.getDataAttr("menuIH","pixel",""),this.staticH=this.getDataAttr("menuStaticH","pixel",""),this.merge()}merge(){let e,i;const s=this.div.childElementCount-this.blocked;for(let a=1;a<s;a++)i=this.div.children[1+this.blocked],i.classList.contains("menu_item")?(e=this.add(),e.link=i.dataset.link,e.label=i.innerHTML,i.dataset.highlight!=null&&(this._index=e._index)):i.classList.contains("menu_static")&&(e=this.add("static")),e.view(!0),i.remove();this._index!=null&&this.index(this._index),s>1&&this.update()}add(e="item"){let i,s;switch(e){case"static":if(this._staticT!=null){const a=document.createElement("template");a.innerHTML=this._staticT,s=a.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createStatic(s);break;default:if(this._itemT!=null){const a=document.createElement("template");a.innerHTML=this._itemT,s=a.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createItem(s);break}return i=this.dPanel.appendChild(s),this.pool.push(i),this.last}createItem(e){const i=new Oe(e,this),s=`${this.id}_item_${this._itemN}`;return e.id=i.id=s,i._index=this._itemN,i.link=this._itemN,i.height=this.itemH,this.list.push(e),this._itemN++,i}createStatic(e){const i=new Oe(e).static(),s=`${this.id}_static_${this._itemN}`;return e.id=i.id=s,i.height=this.staticH,this._staticN++,i}index(e){this._index=e;for(let i in this.pool)this.pool[i].tna.highlight(!1);return e>=0&&this.list[e].tna.highlight(),this.setStatic(e),super.set(e),this}setStatic(e){if(!this._static_high)return;let i;if(this.pool.find((s,a)=>{const f=s==this.list[e];return f&&(i=a),f}),i!=null){const s=i-1,a=i+1;s>=0&&this.pool[s].tna.highlight(),a<this.pool.length-1&&this.pool[a].tna.highlight()}}update(){let e=0;return this.pool.forEach((i,s)=>{e+=i.tna.height*i.tna._view}),this.height=e,e}clear(){this.list.forEach(e=>{e.tna=void 0,e.remove()}),this.list=[],this.pool=[],this._itemN=this._staticN=0,this.update()}click(e){this.last=e,this._wipe&&this.index(-1),this.setStatic(e._index),this.onPrime!=null&&this.onPrime(e,e.link)}execute(e){this._highlight&&(e.enable(!1),this.index(e._index)),this.onExecute!=null&&this.onExecute(this,e.link)&&this.end()}async escape(e){e!=null&&(e.stopImmediatePropagation(),e.preventDefault()),this.view(!1),this.transBlock(this._block_tm_close),this.onEnd!=null&&this.onEnd(this)}begin(){this.transRegion(this._tm_open,"ease-out"),this.transBlock(this._block_tm_open,"ease"),this.onBegin!=null&&this.onBegin(this,!0)}endPrime(){this.transRegion(this._tm_close,"ease-in"),this.onEndPrime!=null&&this.onEndPrime(this)}end(){this.transBlock(),this.onEnd!=null&&this.onEnd(this)}render(e=this._view){super.render(e),this.div.classList.toggle("open",e),e?this.begin():this.endPrime()}find(e){return this.list.find(s=>s.tna.label==e)}wipe(e=!0){return this._wipe=e,this}hover(e=!0){return this._hover=e,this}set height(e){this._height=e,this.div.style.setProperty("--menu-h",e+"px"),this.onResize!=null&&this.onResize(this)}get height(){return this._height}get count(){return Object.keys(this.list).length}get next(){if(this.last._index<this.count)return this.list[this.last._index+1]}get previous(){if(this.last._index>0)return this.list[this.last._index-1]}set template(e){this._itemT=e}set templateStatic(e){this._staticT=e}staticHigh(e=!0){return this._static_high=e,this}timing(e,i){return this._tm_open=e,this._tm_close=i,this}timingBlock(e,i){return this._block_tm_open=e,this._block_tm_close=i,this}transRegion(e=0,i=""){const s=e+"ms";return this.dRegion.style.transitionDuration=s,this.dRegion.style.transitionTimingFunction=i,this}transBlock(e=0,i=""){const s=e+"ms",a=this._view?this._block_opacity:0;return this.dBlock.style.transitionDuration=s,this.dBlock.style.transitionTimingFunction=i,this.dBlock.style.opacity=a,this.dBlock.style.visibility="visible",e==0?this.transBlockEnd():this.dBlock.ontransitionend=this.transBlockEnd.bind(this),this}transBlockEnd(){this._view||(this.dBlock.style.visibility="hidden"),this.dBlock.ontransitionend=void 0}}var mi={control:vi,item:Oe};const yi=`<g stroke-width="6.7">
    <polygon
      points="89.5 72.8 50 95.6 10.5 72.8 10.5 27.2 50 4.4 89.5 27.2 89.5 72.8"
    />
    <polyline id="badge_N" points="28.4 62 28.4 38 71.6 62 71.6 38" />
  </g>`,xi=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="banner" class="banner">
      <div class="banner_wrap">
        <div>C</div><div>u</div><div>b</div><div>e</div>
        <div>C</div><div>o</div><div>r</div><div>e</div></div></div>
    <div id="panel" class="panel"></div>
    </div>
  </div>`;const me={},Se=[];let _,b,se,Ce,at=!1,pe=!1;function wi(){if(me.badge=b=new Be("badge").show(),b.div.classList.add("connect"),b.add=yi,b.value=!1,b.def(),b.ext_onExecute=t=>{t.choreo("3D_flip").timing(1,250).act(),_.view(!_._view),_._view||_.escape()},dt(!x.prop.modeExt),me.dot=se=new fe("badge_dot"),se.add='<circle cx="50" cy="50" r="50" />',se.static().prime().def(),se.onRender=t=>se.div.classList.toggle("orbit",t._view),window.menu!=null){me.menu=_=new mi.control("menu",xi).wipe(),Ce=_._index,_.timing(250,250).timingBlock(500,250),_.onExecute=(e,i)=>{e.last.index==0;const s=lt(i);return s&&(Ce=e._index),n(),s},_.onBegin=_.onEnd=e=>{b.highlight(e._view);const i=e._view?"blur(3px)":"",s=e._view?e._block_tm_open:e._block_tm_close;Ge(s,"ease",i),pe=!1},Xe("Admin");const t=Xe("R/Con","rc");t.html='R<span style="padding-left: 2px; font-size: 130%; position: relative; top: 1.5px;">/</span>Con'}const n=async()=>{pe=!0,await N.delay(2e3),pe&&(b.highlight(!1),_.index(Ce),_.transBlock(),Ge(),pe=!1)}}function Xe(n,t){const e=_.find(n);if(e==null){let i=_.add("static").enable();return Se.push(i),i=_.add().enable(),Se.push(i),i.label=n,i.link=`/${t!=null?t:n.toLowerCase()}/`,at=!0,i}else return e.tna}function Ge(n=0,t="",e=""){const i=n+"ms",s=window.fit!=null?ve.current():window.page;if(s==null)return console.warn("nav menuBG FAIL");s.style.filter=e,s.style.transitionProperty="filter",s.style.transitionDuration=`${i}`,s.style.transitionTimingFunction=t}function lt(n){console.log(`hyper -> "${n}"`);const t=ve.currentIndex(),e=new URL(n,"http://x"),i=e.pathname==document.location.pathname;if(i){const s=ve.inject(e.search);ve.setByID(s)}else!x.prop.local&&n.length>1&&n.slice(-1)=="/"&&(n=n.slice(0,-1)),window.location=n,_.index(t);return i}function bi(n){!at||(Se.forEach(t=>t.view(n)),_.update())}function dt(n=!0){b.div.classList.toggle("static",!n),b.div.classList.toggle("dim",!n),b.onExecute=n?b.ext_onExecute:void 0,b.enable(n)}var X={tna:me,init:wi,enable:dt,hyper:lt,access:bi};class A extends he{constructor(e,i=void 0,s="info"){super(e,i);o(this,"onChange");this.link(s)}}const P={cast:"border-radius: 9px; padding: 1px 7px 0; font-style: italic; font-weight: bold",test:"border: 0.25px solid gray; border-style: solid solid solid none; border-radius: 0 9px 9px 0; padding: 1px 7px 0 0; font-style: italic; font-weight: bold",gray:"border: 0.25px solid gray; background: gray; color: white;",black:"border: 0.25px solid black; background: black; color: white;",red:"border: 0.25px solid red; background: red; color: white;",gold:"border: 0.25px solid gray; background: gold; color: black;"},z=["fail","cache","cache_end","tear","touch","normal","warn","error","alert","bold"],Pe={},G={},M={};let ye,xe,Ae=0;function ki(){ye=r.callID.indexOf("call_console"),Pe.rc=new A("call_console","object","call"),Pe.rc.onChange=(n,t)=>{switch(t.v){case 0:M.fail!=null?M.fail():T("fail","Access Not Authorized");break;case 1:t.n==1&&(xe=0);const e=JSON.stringify(t);console.groupCollapsed("cache n:%o, count:%o",t.n,t.z.length),console.log(e),console.groupEnd(),t.z.length&&t.z.forEach(i=>{G.last_format=z[i.f],G.last_msg=i.m,T(Ae?z[i.f]:"tear",i.m),Ae++}),xe+=t.z.length;break;case 2:console.warn("cache EOL chunks:%o count:%o",t.n,xe),t.c!=null&&(G.capacity=t.c),t.f!=null&&(G.full=t.f),M.cache!=null&&M.cache();break;default:G.last_format=z[t.v],G.last_msg=t.x,M.msg!=null&&M.msg(),T(z[t.v],t.x);break}}}function Ii(){Ae=xe=0}function T(n,t){if(M.output!=null)return M.output(n,t);switch(n){case"normal":console.log("%cRC",P.gray+P.cast,t);break;case"warn":const e="border: 0.25px black solid;";console.log("%cRC",e+P.gold+P.cast+e,t);break;case"error":console.log("%cRC%c %s",P.red+P.cast,"color: red",t);break;case"bold":console.log("%cRC%c %s",P.black+P.cast,"font-weight: bold",t);break}}function Di(){x.prop.preflight||Li()}function Li(){const n=new CustomEvent("meh"),t="rc.test format:",e={a:r.actionID.indexOf("call"),t:[{i:ye,v:z.indexOf("normal"),x:t+"normal"},{i:ye,v:z.indexOf("warn"),x:t+"warn"},{i:ye,v:z.indexOf("error"),x:t+"error"}]};n.data=JSON.stringify(e),p.parse(n)}function Ei(n){T("normal",n)}function $i(n){T("warn",n)}function Ci(n){T("error",n)}function Ti(n){T("tear",n)}function Oi(n){T("alert",n)}function Si(n){T("bold",n)}var q={formatID:z,style:P,tna:Pe,prop:G,upon:M,init:ki,prime:Di,reset:Ii,log:Ei,warn:$i,error:Ci,tear:Ti,alert:Oi,bold:Si};const Pi=1,Ai=2;class Mi extends F{constructor(){super("tron","object");o(this,"_enable",!0);o(this,"state",!1);o(this,"STAGE",Object.freeze({BEGIN:1,END:0}));o(this,"holdTime");o(this,"delayTime");o(this,"showTimeout");o(this,"hideTimeout");o(this,"onWrite");this.setHold().setDelay()}assign(e){const i=window[e];return i==null?console.warn("tron assign FAIL: %o",e):(i.classList.add("tna_Tron"),this.div=i,this)}enable(e=!0){if(this.div!=null&&e!=this._enable)return this.div.classList.toggle("disable",!e),this._enable=e,this}async write(e,i=this.holdTime){this.div!=null&&(clearTimeout(this.hideTimeout),this.div.innerText=e,this.div.classList.add("show","prime"),this.state=!0,this.hideTimeout=setTimeout(this.writeEnd.bind(this),i*1e3),this.onPrime!=null&&this.onWrite(this,STAGE.BEGIN))}async writeEnd(){this.state=!1,this.hideTimeout=void 0,this.div.classList.remove("show"),this.div.ontransitionend=()=>{this.div.classList.remove("prime"),this.onPrime!=null&&this.onWrite(this,STAGE.END),this.div.ontransitionend=void 0}}writeDelay(e,i=this.holdTime,s=this.delayTime){this.div!=null&&(clearTimeout(this.showTimeout),this.state?(this.div.innerText=e,this.write(e,i)):this.showTimeout=setTimeout(this.write.bind(this),s*1e3,e,i))}cancel(){clearTimeout(this.showTimeout)}kill(){this.cancel(),this.writeEnd()}add(e){return e.onTron=i=>this.write(i),this}setHold(e=Pi){return this.holdTime=e,this}setDelay(e=Ai){return this.delayTime=e,this}}var Ri=new Mi;class Hi extends he{constructor(){r.prefID.indexOf("ux_index")<0&&console.warn("tna_UX constructor FAIL, cannot find prefID");super("ux_index","object");o(this,"_lastIndex");o(this,"_lastDialog");o(this,"_nextDialog");o(this,"_currentDialog");this.link("pref")}set(e){const i=e.v;if(this._lastIndex!=i&&(this._nextDialog=r.getDialogByIndex(i),this._lastDialog=r.getDialogByIndex(this._lastIndex),this._nextDialog!=null)){this.tron&&this._lastDialog!=null&&`${this._lastDialog.id}`,this._lastDialog!=null&&this.last.exit(),this._nextDialog.begin(),this._lastIndex=this._val=i,this._currentDialog=this._nextDialog,super.set(e);return}}get last(){return this._lastDialog!=null?this._lastDialog:{id:"NULL"}}get lastID(){return this._lastDialog!=null?this._lastDialog.id:void 0}get next(){return this._nextDialog}get current(){return this._currentDialog}get currentID(){return this._currentDialog!=null?this._currentDialog.id:void 0}}const Ni='<div id="region" class="region"></div>',Bi=`
    <svg id="svg" viewBox="0 0 12 13.8" class="digit">
      <g id="a" class="seg">
        <polygon points="9.76 0 10.03 0.31 8.66 1.5 4.33 1.5 3.31 0.34 3.7 0 9.76 0"/>
      </g>
      <g id="b" class="seg">
        <polygon points="10.63 1 9.96 5.77 9.07 6.55 8.44 5.82 8.99 1.88 10.36 0.69 10.63 1"/>
      </g>
      <g id="c" class="seg">
        <polygon points="7.57 11.97 8.13 8.03 9.02 7.25 9.65 7.98 8.97 12.8 8.58 13.14 7.57 11.97"/>
      </g>
      <g id="d" class="seg">
        <polygon points="2.86 12.3 7.19 12.3 8.21 13.46 7.82 13.8 1.76 13.8 1.49 13.49 2.86 12.3"/>
      </g>
      <g id="e" class="seg">
        <polygon points="0.89 12.8 1.56 8.03 2.45 7.25 3.08 7.98 2.53 11.92 1.16 13.11 0.89 12.8"/>
      </g>
      <g id="f" class="seg">
        <polygon points="2.5 6.55 1.87 5.82 2.55 1 2.94 0.66 3.95 1.83 3.39 5.77 2.5 6.55"/>
      </g>
      <g id="g" class="seg">
        <polygon points="8.06 6.15 8.69 6.88 7.8 7.65 3.46 7.65 2.83 6.92 3.72 6.15 8.06 6.15"/>
      </g>
      <g id="dp" class="seg"><circle cx="10.77" cy="13.05" r="0.75" /></g>
    </svg>`,Fi=`<svg id="svg" viewBox="0 0 12.47 13.8" class="colon">
    <g class="seg" transform="translate(0.2 0)">
      <circle cx="1.72" cy="3.45" r="0.75" />
      <circle cx="0.75" cy="10.35" r="0.75" />
    </g>
  </svg>`;var Te={HTML:Ni,DIGIT:Bi,COLON:Fi};class ji extends he{constructor(e){super(e);o(this,"_primeD",!1);o(this,"_primeN",0);o(this,"_bright",0);o(this,"digits",[]);o(this,"onPrime");this.fuse(),this.link("info"),this.div.insertAdjacentHTML("beforeend",Te.HTML),this.div.classList.add("tna_Retro7"),this.dRegion=this.getDiv("region");for(let s=0;s<4;s++){this.dRegion.insertAdjacentHTML("beforeend",Te.DIGIT);const a=this.dRegion.querySelector("#svg");a.id=`svg_${this.digits.length}_${this.id}`,a.style.setProperty("--retro-i",s),this.digits.push(a)}this.dRegion.insertAdjacentHTML("beforeend",Te.COLON);const i=this.dRegion.querySelector("#svg");i.id=`colon_${this.id}`,this.divColon=i.children[0]}print(e){for(let i=0;i<4;i++)this.digitRaw(i,e[i])}digitRaw(e,i){let s=this.digits[e].children;for(let a=0;a<8;a++){const f=i>>a&1;s[a].classList.toggle("show",f)}}colon(e=2){this.divColon.classList.toggle("show",e==2)}clear(){this.print([0,0,0,0]),this.colon(!1),this.onChange!=null&&this.onChange(this,this._val)}async reset(){this._primeD=!1,this._primeN=0,this.view(!1),await this.delay(500),this.clear(),this.prime(!1)}async set(e){if(this._val=e.v,!this._primeD&&(this.onBegin!=null?this.onBegin(this):this.show(),this._primeN<2)){let i=0;for(let s=0;s<e.v.length;s++)i+=e.v[s];i>0&&this._primeN++,this._primeN=Math.min(this._primeN,2),this._primeN>1&&this.onPrime!=null&&this.onPrime(this)}this.print(e.v),this.colon(e.v[4]),this.onChange!=null&&this.onChange(this,e)}bright(e=0){return this._bright=e,this.div.classList.toggle("dim",e==0),this}}const ct="3.1.05",ht={}.VITE_PREFLIGHT==="true",zi={}.VITE_EXT_SERVE==="true";ht||console.warn("core PREFLIGHT: %o",!1);const v={},k={preflight:ht,modeExt:zi,modeAP:!1,prime_local:!1},R={},le={},K={},j={};let _e,ft,D,L,be,E,Me=!1;function qi(){Ri.assign("tron_output"),Vi(),Gi(),v.title=D=new F("head_title"),D.div.classList.add("click"),D.div.onclick=()=>{let t=le.title!=null?le.title():!1;t=t==null?!1:t,t||console.log("core title click default")},D.fuse().shy(!(k.modeExt||!be)).view(),Xi(),window.diag_client.innerText=N.versionString(ct);const n=String(document.location);k.local=n.includes("host:")||n.includes("local:"),_e=new A("developFPO","object"),_e.onDefault=()=>k.prime_local=!0,N.initStorage("develop",_e),k.develop=_e.value,v.ux=ft=new Hi().tron(),X.init()}function Xi(){window.socket!=null&&(E=new fe("socket").prime().show().enable(),E.symbol("x").symbol("o"),E.value=!0,E.index=1,E.onExecute=n=>{n.toggle(),n.index=n.value,p.monitor(n.value),n.value?p.init():p.kill()},v.socket_button=E)}function Gi(){k.modeExt||(be=window.info_display!=null,be&&(v.retro=L=new ji("info_display"),L.ext_no_prime=!0,L.ext_view=void 0,L.onBegin=n=>{},L.onRender=(n,t)=>{const e=t!=null?t:n._view;n.ext_view!=e&&(n.ext_view=e,n.div.classList.toggle("click",e),n._view&&n.shy(!1))},L.div.onclick=Ui))}function Ui(){let n=le.retro!=null?le.retro():!1;n=n==null?!1:n,n||(console.log("RD click default, ux:",ft.currentID),p.send("save","clock_disp",-1))}function Vi(){if(window.rc_ind==null||k.user==0)return;const n=new A("info_rc","object");q.upon.msg=(t=q.prop.last_format)=>{const e=k.user!=null?k.user:0;v.rc_ind.view(t!=q.formatID.indexOf("touch")&&e)},n.onChange=(t,e)=>{q.upon.msg(e.v)},v.rc_ind=new Be("rc_ind").symbol("dot").def(),v.rc_ind.onExecute=async t=>{t.choreo("blink","hot").timing(3,150).act(),t.onAnimEnd=()=>X.hyper("/rc/")}}let Ue=!1;async function Fe(){for(const[n,t]of Object.entries(v))t.ext_no_prime==null&&t.prime();if(be)D.shy(!1);else return Fe=!0;Ue||await N.delay(1250),D.view(!1),D.div.classList.add("slide"),window.head.classList.add("gradient"),v.retro.prime(),v.retro.shy(!1),await N.delay(250),v.retro.view(),D.shy(),D.div.classList.remove("slide"),Ue=!0,gt()}function ut(){Me=!1,X.tna.badge.div.classList.add("connect","prime"),X.tna.dot.viewStaged(!1),E!=null&&(E.index=1),R.open!=null&&R.open()}async function Re(){Me||(Me=!0,X.tna.badge.div.classList.add("prime"),X.tna.badge.div.classList.remove("connect"),X.tna.dot.view(!0),window.head.classList.remove("gradient"),await N.delay(250),L!=null&&L.reset(),E!=null&&E.def(),R.close!=null&&R.close(),D.shy(!1),await N.delay(250),D.view())}function Zi(){p.onOpen(ut),p.onClose(Re),new A("info_install","object").onChange=(e,i)=>{e.ext_prime==null&&(K.display=(i.v&r.hwMask.display)>>r.hwOffset.display,K.piezo=(i.v&r.hwMask.piezo)>>r.hwOffset.piezo,K.xpio=(i.v&r.hwMask.xpio)>>r.hwOffset.xpio,K.gps=(i.v&r.hwMask.gps)>>r.hwOffset.gps,i.z,j.display=(i.z&r.hwMask.display)>>r.hwOffset.display,j.piezo=(i.z&r.hwMask.piezo)>>r.hwOffset.piezo,j.xpio=(i.z&r.hwMask.xpio)>>r.hwOffset.xpio,j.gps=(i.z&r.hwMask.gps)>>r.hwOffset.gps,Object.keys(j).forEach(function(s,a){j[s]||document.querySelectorAll("._"+s).forEach(d=>d.style.display="none")}))},new A("call_prime","object","call").onChange=e=>{Fe(),e.ext_prime==null&&(R.prime!=null&&R.prime(K,j),e.ext_prime=!0)},v.user=new A("info_user","object"),v.user.onChange=e=>{k.user=e.data.v,X.access(k.user),R.user!=null&&R.user(e.data)};let n=new A("call_restart","object","call");n.onChange=async e=>{q.bold("system ESP restart"),Re(),await e.delay(1e3),p.send("ping")};let t=new A("call_warn","object","call");if(t.onChange=(e,i)=>{let s=parseInt(i.v);s=s<r.warnID.length?s:-1;let a;s>=0&&(a=r.warnID[s]),a!=null&&console.error(`system warning ${a}`)},L!=null&&r.getControlByID("ui_bright")==null){const e=new A("ui_bright","object","pref");e.onChange=(i,s)=>L.bright(s.v),v[e.id]=e}}function gt(n=k.user){let t=document.querySelectorAll("._admin");t.forEach(e=>e.style.display=n?"":"none"),t=document.querySelectorAll("._admin_alt"),t.forEach(e=>e.style.display=n?"none":"inherit")}var x={tna:v,prop:k,upon:R,click:le,version:ct,install:K,activate:j,init:qi,prime:Fe,open:ut,close:Re,patch:Zi,admin:gt};let ke=!1,J=!1,pt=!1,Z,_t,He,Ne;const Ji=`ws://${window.location.hostname}/ws`;let H,de=!1;function je(){ke||(ke=!0,H=new WebSocket(Ji),H.onopen=Yi,H.onclose=Ki,H.onmessage=_t,J=!1,Z=clearTimeout(Z))}function Wi(n){n!=de&&(console.log(`socket monitor b:${n} state:${J}`),de=n,n&&(!J&&Z==null?je():Z=clearTimeout(Z)))}function vt(){return J=(H!=null?H.readyState:Ve.closed)==Ve.connected,J}function Yi(){console.warn("socket open"),J=!0,He!=null&&He()}function Ki(){console.error(`socket close, squelch:${pt} check:${de}`),ke=!1,J=!1,Ne!=null&&Ne(),de&&(clearInterval(Z),Z=setTimeout(je,1e3))}function Qi(){console.warn("socket kill"),H&&H.close(),pt=!0,ke=!1}function mt(n){_t=n}function en(n){He=n}function tn(n){Ne=n}const Ve=Object.freeze({connecting:0,connected:1,closing:2,closed:3});let O=!1;var p={onOpen:en,onClose:tn,onParse:mt,check:de,init:je,ready:vt,monitor:Wi,kill:Qi,parse:Ie,sendUX:ln,sendTune:dn,sendObject:yt,send:xt,fakeMessage:hn,fakeObject:cn,transmit:ue,fill:fn,tron:nn};mt(Ie);function nn(n=!0){O=n}function sn(n){let t;for(let e in n)t=r.getControlByIndex("info",n[e].i),t!=null?(n.length>1&&(O?console.log(`<< info #${e} %o ${n[e].v}`,t.id):t.id!="info_display"&&O&&console.log(`<< info %o ${n[e].v}`,t.id)),t.set(n[e])):O&&console.log(`parseInfo #${e} no object id %o`,r.infoID[n[e].i])}function on(n){for(let t in n){const e=n[t].i,i=r.getControlByIndex(e<r.prefBase?"admin":"pref",e);i!=null?(O&&(n.length>1?console.log(`<< pref #${t} ${i.id} ${n[t].v}`):console.log(`<< pref ${i.id} ${n[t].v}`)),i.sync(n[t])):O&&console.log(`parseSync #${t} no object id %o`,e)}}function rn(n){for(let t in n){const e=r.getControlByIndex("call",n[t].i);e!=null&&e.set(n[t])}}function an(n){for(let t in n){const e=n[t],i=r.getControlByIndex("ux",e.i);if(i!=null){if(e.s<0)return console.warn("parseUX FAIL bad stage value %o",r.stageID[e.v]);i.parse(e)}else O&&console.log("parsUX no object %o",r.infoID[e.i])}}function Ie(n){let t=JSON.parse(n.data),e=r.actionID[t.a],i=t.t;switch(e){case"call":rn(i);break;case"ux":an(i);break;case"info":sn(i);break;case"sync":on(i);break}}function ln(n,t,e){const i="ux",s=r.uxID.indexOf(n);if(s<0)return console.warn("sendUX FAIL no dialog %o",n);const a={i:s},f=r.stageID.indexOf(t);f>=0&&(a.v=f),e!=null&&(a.x=e);const d={a:r.actionID.indexOf(i),t:[a]};ue(d,`${i} >>`)}function dn(n="default"){const t="call",e=r.tuneID.indexOf(n);if(e<0)return console.warn("sendTune FAIL no melody %o",n);r.callID.indexOf("call_tune");const i={a:r.actionID.indexOf(t),t:[{i:r.callID.indexOf("call_tune"),v:e}]};ue(i,`${t} >>`)}function yt(n,t,e){const i=r.actionID.indexOf(n);if(i<0)return console.log("sendObject FAIL no action %o",n);let s={a:i,t:[]},a={i:r.getPrefID(t)};return Object.assign(a,e),s.t.push(a),ue(s,`${n} >>`),s}function cn(n,t,e){const i=yt(n,t,e);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),Ie(s)}}function xt(n,t,e){let i=r.actionID.indexOf(n);if(i<0){O&&console.log("send FAIL no action %o",n);return}let s={a:i,t:[]},a=-1;switch(n){case"push":case"save":case"sync":a=r.getPrefID(t);break;case"call":a=r.callID.indexOf(t);break;case"ping":a=e=0}if(a<0){O&&console.log("send FAIL no id %o in action %o",t,n);return}return s.t.push({i:a,v:e|0}),ue(s,`${n} >>`),s}function hn(n,t,e){const i=xt(n,t,e);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),Ie(s)}}function ue(n,t){const e=JSON.stringify(n);O&&console.log(`${t} ${e}`),vt()&&H.send(e)}async function fn(n,t,e){let i={};if(x.prop.preflight)try{const s=await fetch(t,{method:"GET"});if(s.status===200)i=await s.json();else throw new Error(`${t} FAIL fetch code:${s.status}`)}catch(s){console.warn(`${t} FAIL, use test data`,s),Object.assign(i,e)}else console.warn(`${t} !preflight, use test data`),Object.assign(i,e);console.groupCollapsed(`comm fill ${t}`),console.log(i),console.groupEnd(),Object.assign(n,i)}const we=Math.floor(new Date().getTime()/1e3);r.actionID.indexOf("info"),r.infoID.indexOf("info_hardware"),r.infoID.indexOf("info_mfg"),r.infoID.indexOf("info_reg");const un={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_rc"),v:4},{i:r.infoID.indexOf("info_install"),v:r.hwMask.display+r.hwMask.piezo+r.hwMask.xpio+r.hwMask.gps+0,z:r.hwMask.display+r.hwMask.piezo+r.hwMask.xpio+r.hwMask.gps+0},{i:r.infoID.indexOf("info_user"),v:1},{i:r.infoID.indexOf("info_firmware"),v:"8.8.88"},{i:r.infoID.indexOf("info_uptime"),v:we-3600*24*99},{i:r.infoID.indexOf("info_net"),v:"expresso",p:"8C:CE:4E:D5:36:9D",q:"192.168.2.100"},{i:r.infoID.indexOf("info_rssi"),v:"-78"},{i:r.infoID.indexOf("info_status"),v:r.serviceID.indexOf("GPS"),g:1,n:1},{i:r.infoID.indexOf("info_tap"),v:4,m:884,c:4},{i:r.infoID.indexOf("info_gps"),t:we,d:1200,v:13,max:12,min:12,rec:22},{i:r.infoID.indexOf("info_ntp"),v:0,s:we,f:28,p:64,e:0,r:60*30},{i:r.infoID.indexOf("info_display"),v:[0,0,0,0,0]}]},gn={a:r.actionID.indexOf("sync"),t:[{i:r.getPrefID("net_alert"),v:1},{i:r.getPrefID("ui_bright"),v:0,x:5},{i:r.getPrefID("ui_sound"),v:1},{i:r.getPrefID("tap_mode"),v:0},{i:r.getPrefID("tap_tilt"),v:1},{i:r.getPrefID("tap_alert"),v:0},{i:r.getPrefID("tap"),v:7,t:1023},{i:r.getPrefID("gps_alert"),v:0},{i:r.getPrefID("gps_log_int"),v:1200},{i:r.getPrefID("clock_static"),v:1},{i:r.getPrefID("clock_disp"),v:r.clockID.indexOf("CLOCK_HHMM")},{i:r.getPrefID("clock_24h"),v:0},{i:r.getPrefID("clock_tz"),v:-6},{i:r.getPrefID("clock_dst"),v:1},{i:r.getPrefID("clock_pps"),v:0},{i:r.getPrefID("daily"),v:1,h:9,m:32},{i:r.getPrefID("daily_vol"),v:1},{i:r.getPrefID("daily_ind"),v:1},{i:r.getPrefID("daily_snooze"),v:1},{i:r.getPrefID("ux_index"),v:r.uxID.indexOf("clock_static")}]};r.infoID.indexOf("info_gps_log"),we-200;const pn={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_display"),v:[127,127,127,127,2]}]},_n={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_display"),v:[120,121,109,120,0]}]},vn={a:r.actionID.indexOf("call"),t:[{i:r.callID.indexOf("call_prime"),v:0}]};function mn(){const n=x.prop.local?500:75;setTimeout(async()=>{if(p.ready())return;x.open(),console.log("%ccomm test",q.style.test,"info + sync");const t=new CustomEvent("meh");t.data=JSON.stringify(un),p.parse(t),t.data=JSON.stringify(gn),p.parse(t),await N.delay(75),t.data=JSON.stringify(vn),p.parse(t)},n),setTimeout(()=>{if(p.ready())return;console.log("%ccomm test",q.style.test,"display");const t=new CustomEvent("meh");t.data=JSON.stringify(pn),p.parse(t)},n*2),setTimeout(()=>{if(p.ready())return;const t=new CustomEvent("meh");t.data=JSON.stringify(_n),p.parse(t)},n*3)}var yn={init:mn};const xn=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="label" class="label"></div>
  </div>`;class wn extends F{constructor(e){super(e);o(this,"_label");this._label=this.div.innerHTML,this.div.innerText="",this.div.insertAdjacentHTML("beforeend",xn),this.div.classList.add("tna_RetroT"),this.dRegion=this.getDiv("region"),this.dLabel=this.getDiv("label"),this.dBg=this.getDiv("bg"),this.dLabel.innerText=this._label}}const De={};function bn(){In(),Dn(),wt()}async function kn(){for(const[n,t]of Object.entries(De))t.prime()}function In(){document.querySelectorAll("._tna_Accord").forEach((t,e)=>{t.id.length==0&&(t.id=`accord_${e}`);const i=t.id.length!=0?t.id:e;De[i]=new ce(t.id)})}function Dn(){document.querySelectorAll("._hr").forEach((t,e)=>{t.id.length==0&&(t.id=`hr_${e}`);const i=t.id.length!=0?t.id:e;De[i]=new F(t.id).fuse(),t.classList.add("hr_wrap");const s=document.createElement("hr");t.insertAdjacentElement("afterbegin",s)})}function wt(){let n;n=document.querySelectorAll(".tna_RetroT"),n.forEach((t,e)=>{t.id.length==0&&(t.id=`retro_text_${e}`),new wn(t.id)})}var ae={init:bn,prime:kn,items:De,retro:wt};const Ln=`<div class="region">
    <div id="label" class="label">X</div>
  </div>`;class bt extends F{constructor(e,i,s=Ln){super(e,"div");o(this,"_index");o(this,"_label");o(this,"_target");o(this,"control");o(this,"bClick");this.control=i,this.div.id=this.id=`${i.id}_item_${i.itemN}`,this._label=this.div.innerHTML,this.div.innerText="",this.div.insertAdjacentHTML("afterbegin",s),this.div.classList.add("tna_Radio_item"),this.dLabel=this.getDiv("label"),this.label=this._label;let a=this.div.querySelector("._click");a==null&&(a=this.div),a._tna_target=this.div,this._target=a,this.bClick=this.click.bind(this),this.enable()}click(e){let i=e.target._tna_target;i==null&&(i=this.parent(e.target,"_item")),this.execute(i),e.preventDefault(),e.stopImmediatePropagation()}execute(e){this.control.last=this,this.control.execute(this),this.control.view(!1)}enable(e=!0){return this.enabled=e,this.div.classList.toggle("enable",e),this._target.onclick=e&&!this._static?this.bClick:null,this._target.style.pointerEvents=e&&!this._static?"":"none",this}highlight(e=!0){this.div.classList.toggle("act",e);const i=e&&this._index==0&&!this.control.attrOff;return this.div.classList.toggle("off",i),this.enable(!e||this.control._persist),this}set label(e){this.dLabel.innerText=e}}const En=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="rule" class="rule"></div>
    <div id="cursor" class="cursor"></div>
    <div id="panel" class="panel"></div>
  </div>`;class $n extends he{constructor(e){super(e);o(this,"_primed",!1);o(this,"_persist",!1);o(this,"_rule");o(this,"_ruleLimit");o(this,"_itemN",0);o(this,"_defP");o(this,"_itemDef",bt);o(this,"list",[]);o(this,"listR",[]);o(this,"last");o(this,"onChange");o(this,"onExecute");this.link("pref"),this.div.insertAdjacentHTML("afterbegin",En),this.div.classList.add("tna_Radio"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dRule=this.getDiv("rule"),this.dCursor=this.getDiv("cursor"),this.dPanel=this.getDiv("panel"),this._defP=this.getPropVal("--radio-p"),this._rule=this.div.dataset.rule!=null,this._ruleLimit=this.div.dataset.ruleLimit!=null,this.attrOff=this.div.dataset.radioOff!=null,this.enable(this.div.dataset.enable!=null),this.dCursor.style.left=0}init(e){for(let i=0;i<e;i++){const s=document.createElement("div");this.div.appendChild(s)}return this.merge(),this}prime(){return this._primed=!0,this}merge(){const e=this.div.childElementCount;this.setProp("--radio-n",e-1);for(let i=1;i<e;i++){const s=this.div.children[1];this.create(s).touchPrime(),this.dPanel.insertAdjacentElement("beforeend",s)}return this.rule(),this}create(e){const i=new this._itemDef(e,this),s=`${this.id}_item_${this._itemN}`;return e.id=i.id=s,i._index=this._itemN,this.list.push(i),this._itemN++,i}rule(e=this._rule){if(e)for(let i=0;i<=this._itemN;i++){const s=document.createElement("div");this.dRule.appendChild(s),this.listR.push(s),this.dRule.classList.toggle("limit",this._ruleLimit)}return this}index(e){if(this.list.forEach(i=>i.highlight(!1)),e>=0&&this.list[e].highlight(),this._primed&&(this.dCursor.style.transition="left 0.25s"),this.dCursor.style.left=`calc(${this._defP}px + ${e/this._itemN*100}%)`,this.dCursor.style.opacity=1,this._val=e,this.dCursor.classList.toggle("solid",e!=0||this.attrOff),this._rule)for(let i=0;i<=this._itemN;i++){const s=e==i||e+1==i;this.listR[i].classList.toggle("show",!s)}return this}execute(e){this.index(e._index),this.onChange!=null&&this.onChange(this),this.onExecute!=null&&this.onExecute(this),this.push()}set(e=this._val){return this.index(this._val),super.set(this._val),this}enable(e=!0){if(e!=this._enable)return this._enable=e,this.div.classList.toggle("disable",!e),this}persist(e=!0){return this._persist=e,this}label(e){return this.list[e].dLabel}}class kt extends fe{constructor(t,e){super(t),this.link(e),this.div.classList.add("tna_Twirl"),this.add='<polygon points="0,88 100,88 50,0"/>',this.def()}draw(){this.div.classList.toggle("open",this.value)}}const Cn=`<div class="region">
    <div id="bg" class="bg">
      <div class="folder"></div>
    </div>
    <div id="label" class="label">X</div>
  </div>`;class Tn extends bt{constructor(e,i){super(e,i,Cn);o(this,"_ind",!1);this.id=`${i.id}_${i._itemN}`,this.dBg=this.getDiv("bg",this.id)}highlight(e=!0){return super.highlight(e),this.div.classList.toggle("ind",e?this._ind:!1),this}indicate(e=!0){return this._ind=e,this.div.classList.toggle("ind",e),this}}class On extends $n{constructor(e){super(e);o(this,"_itemDef",Tn);this.div.classList.add("tna_Tab"),this.merge()}}const Sn='<div id="twirl"></div>',$={},C=[];let U,oe=0;function Pn(){x.prop.modeExt&&(window.head_title.innerHTML="CubeCore User Guide",U=new Be("guide_icon").symbol("guide").static().def()),$.tab=new On("tab").persist(),$.tab.div.classList.add("ready"),$.tab.onExecute=i=>Je(i.value),document.querySelectorAll(".insert").forEach(i=>{const s=new ce(i);s._index=C.length,C.push(s)}),C.forEach((i,s)=>An(i)),Mn(),ae.items.web_app_2.dynamic();const t=ae.items.web_apple;t.dynamic();const e=C[1].sections.Web_Application;e._execute=i=>{ae.items.web_app_2.toggle(i.value),t.toggle(i.value?$.appleTwirl.value:0)},$.appleTwirl=new kt("apple_twirl").target("apple_item").show().prime(),$.appleTwirl.onExecute=async i=>{i.toggle(),t.toggle(i.value)},Je(oe)}function An(n){n.sections={},n.div.querySelectorAll(".insert_section").forEach((e,i)=>{const a=nt.nest(e,"wrap").createDivFirst();a.innerHTML=Sn,a.classList.add("twirl_item");const f=a.querySelector("#twirl");if(f==null)return console.warn("getDiv FAIL");f.id="";const d=new kt(f).target(a).show().prime();d.label=e.dataset.label,d.ext_insert=n,d.ext_insert_index=n._index,d.onExecute=(u,g)=>{u.toggle(g),u.ext_section.toggle(u.value),a.classList.toggle("open",u.value),Rn(u.ext_insert),u._execute!=null&&u._execute(u)},n.sections[e.dataset.label.replace(" ","_")]=d,d.ext_section=new ce(e).dynamic(),e.classList.add("insert","inset")})}function Mn(){document.querySelectorAll("p").forEach((t,e)=>{t.classList.add("txt","clear")})}function Rn(n){let t=!1;for(const[e,i]of Object.entries(n.sections))t=t||i.value;try{n.ext_unfolded=t,$.tab.list[n._index].indicate(t)}catch{}return t}let Ze=!1;function Je(n){C[oe]._scroll=document.querySelector("html").scrollTop,C.forEach((e,i)=>e.toggle(i==n)),$.tab.set(n);const t=C[n]._scroll;if(oe!=n)window.scrollTo(0,t!=null?t:0);else if(Ze){const e=C[oe].ext_unfolded;for(const[i,s]of Object.entries(C[n].sections))s.onExecute(s,!e)}else Ze=!0;oe=n}function Hn(){for(const[n,t]of Object.entries($))t.prime();C.forEach((n,t)=>{n.prime();for(const[e,i]of Object.entries(n.sections))i.ext_section.prime()}),U!=null&&(U.show().choreo("blink","hal_hot").timing(3,600).act(),U.onAnimEnd=async()=>{await U.delay(100),U.onAnimEnd=void 0,U.choreo("blink","hot").timing(5,100).act()})}function Nn(){}var ze={tna:$,init:Pn,prime:Hn,close:Nn};async function Bn(){document.title=window.location.hostname.split(".")[0]+" \u2022 Guide",ae.init(),li.init(),x.init(),q.init(),ze.init(),x.patch(),p.monitor(x.prop.preflight),!x.prop.preflight&&yn.init()}x.upon.prime=()=>{ae.prime(),ze.prime(),window.page.classList.add("show"),window.tab_item.classList.remove("shy")};x.upon.close=()=>ze.close();function Fn(){}window.addEventListener("load",Bn);window.addEventListener("visibilitychange",Fn);
