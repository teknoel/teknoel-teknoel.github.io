var pt=Object.defineProperty;var _t=(n,t,e)=>t in n?pt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>(_t(n,typeof t!="symbol"?t+"":t,e),e);const vt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}};vt();var mt={};(function(n){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(d){return s(c(d),arguments)}function i(d,g){return e.apply(null,[d].concat(g||[]))}function s(d,g){var p=1,A=d.length,l,$="",D,w,h,re,xe,we,be,Z;for(D=0;D<A;D++)if(typeof d[D]=="string")$+=d[D];else if(typeof d[D]=="object"){if(h=d[D],h.keys)for(l=g[p],w=0;w<h.keys.length;w++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[w],h.keys[w-1]));l=l[h.keys[w]]}else h.param_no?l=g[h.param_no]:l=g[p++];if(t.not_type.test(h.type)&&t.not_primitive.test(h.type)&&l instanceof Function&&(l=l()),t.numeric_arg.test(h.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(t.number.test(h.type)&&(be=l>=0),h.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,h.width?parseInt(h.width):0);break;case"e":l=h.precision?parseFloat(l).toExponential(h.precision):parseFloat(l).toExponential();break;case"f":l=h.precision?parseFloat(l).toFixed(h.precision):parseFloat(l);break;case"g":l=h.precision?String(Number(l.toPrecision(h.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=h.precision?l.substring(0,h.precision):l;break;case"t":l=String(!!l),l=h.precision?l.substring(0,h.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=h.precision?l.substring(0,h.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=h.precision?l.substring(0,h.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}t.json.test(h.type)?$+=l:(t.number.test(h.type)&&(!be||h.sign)?(Z=be?"+":"-",l=l.toString().replace(t.sign,"")):Z="",xe=h.pad_char?h.pad_char==="0"?"0":h.pad_char.charAt(1):" ",we=h.width-(Z+l).length,re=h.width&&we>0?xe.repeat(we):"",$+=h.align?Z+l+re:xe==="0"?Z+re+l:re+Z+l)}return $}var r=Object.create(null);function c(d){if(r[d])return r[d];for(var g=d,p,A=[],l=0;g;){if((p=t.text.exec(g))!==null)A.push(p[0]);else if((p=t.modulo.exec(g))!==null)A.push("%");else if((p=t.placeholder.exec(g))!==null){if(p[2]){l|=1;var $=[],D=p[2],w=[];if((w=t.key.exec(D))!==null)for($.push(w[1]);(D=D.substring(w[0].length))!=="";)if((w=t.key_access.exec(D))!==null)$.push(w[1]);else if((w=t.index_access.exec(D))!==null)$.push(w[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");p[2]=$}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");A.push({placeholder:p[0],param_no:p[1],keys:p[2],sign:p[3],pad_char:p[4],align:p[5],width:p[6],precision:p[7],type:p[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");g=g.substring(p[0].length)}return r[d]=A}n.sprintf=e,n.vsprintf=i,typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=i)})()})(mt);function yt(n){return new Promise(t=>{setTimeout(()=>{t()},n)})}String.prototype.camelKabob=function(){let n="";return this.split("").map(t=>{n+=t.toUpperCase()==t?`-${t.toLowerCase()}`:t}),n};String.prototype.kabobCamel=function(){return this.replace(/-./g,n=>n[1].toUpperCase())};function xt(n,t,e){if(t.value==null){console.warn(`initStorage FAIL name:${n} target:${t}`);return}const i=localStorage.getItem(n);if(i!=null)return t.value=parseFloat(i),console.log(`initStorage ${n}:${t.value} data:${parseFloat(i)}`),t.value;if(e==null)localStorage.setItem(n,Number(t.value)),console.warn(`initStorage none:${n}, target:${t.value}`),t.onDefault!=null&&t.onDefault();else return localStorage.setItem(n,Number(e)),console.warn(`initStorage none:${n}, default:${e}`),t.value=e,e}function wt(n){const t=n.split(".");let e="";for(let i in t)e+=i!=1?t[i]:Number("0x"+t[1]),i<t.length-1&&(e+=".");return e}var O={delay:yt,initStorage:xt,versionString:wt};const qe=["ping","call","ux","info","push","save","sync"],Xe=["call_prime","call_console","call_tune","call_warn","call_restart","call_admin","call_photo","call_gps_log"],bt=["none","default","notify","toggle_on","toggle_off","alarm","close_encounter","charge_fanfare","bonanza","guantanamera","rhythm_dancer"],kt=["OK",'"index.html" served from FS'],Ue=["null","sys_splash","sys_boot","sys_ap","sys_ota","sys_restart","sys_fail","reset_user","reset_admin","net_setup","net_menu","net_fail","set_bright","set_sound","tap_menu","tap_test","tap_notify","clock_static","clock_hide","clock_switch","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","alarm_menu","alarm_set","alarm_notify","alarm_snooze","diag_info","diag_serial","diag_console","diag_net","diag_net_mac","diag_gps","diag_led","photo"],Ze=["idle","init","begin","splash","prime","ready","run","update","wait","confirm","notify","commit","end","exit","cancel","expire","fail"],Je=["info_rc","info_user","info_mfg","info_reg","info_hardware","info_firmware","info_install","info_uptime","info_net","info_rssi","info_display","info_status","info_tap","info_ntp","info_gps","info_gps_log"],We=["admin_sign","admin_fpo","ota_version","ota_version_fs","ota_time","ota_time_fs","ota_fpo","mfg_product","mfg_version","mfg_date","mfg_serial","mfg_logic","mfg_display","mfg_color","mfg_note","mfg_fpo","reg_date","reg_name_1","reg_name_2","reg_user","reg_gift","reg_gp_1","reg_gp_2","reg_fpo","sys_output","sys_console","sys_fpo","def_name","def_device","def_ssid","def_pass","def_alert","def_net_fpo","def_bright","def_sound","def_av_fpo","def_tap_act","def_tap","def_tilt","def_tap_fpo","def_ntp_serve","def_ntp_int","def_ntp_fpo","def_nts_fpo","def_gps_alert","def_gps_log_i","def_gps_log_x","def_gps_fpo","def_tz","def_dst","def_24h","def_pps","def_clock_fpo","def_alarm_ind"],It=100,Ye=["ux_boot","ux_index","ux_fpo","user_consent","user_fpo","net_name","net_device","net_ssid","net_pass","net_alert","net_fpo","ui_bright","ui_sound","ui_fpo","tap","tap_mode","tap_tilt","tap_alert","tap_fpo","ntp_server","ntp_interval","ntp_fpo","nts_fpo","gps_alert","gps_log_int","gps_log_ratio","gps_fpo","clock_static","clock_disp","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","clock_fpo","alarm_tap","alarm_fpo","daily","daily_ind","daily_tone","daily_vol","daily_d","daily_h","daily_m","daily_snooze"],Dt={display:0,piezo:1,xpio:2,gps:3},Lt={display:1,piezo:2,xpio:4,gps:8},$t=["CLOCK_HHMM","CLOCK_DATE","CLOCK_MMSS"],Et=["NTP","GPS","pps","none"],Ot={action:qe,call:Xe,ux:Ue,info:Je,admin:We,pref:Ye,stage:Ze};var k={master:Ot,hwOffset:Dt,hwMask:Lt,actionID:qe,callID:Xe,tuneID:bt,warnID:kt,uxID:Ue,stageID:Ze,infoID:Je,prefBase:It,prefID:Ye,adminID:We,clockID:$t,serviceID:Et};const W={},Y={};let N=!1;var a={...k,getPrefID:St,controls:W,linkControl:Ct,getControlByID:Tt,getControlByIndex:Mt,dialogs:Y,linkDialog:At,printDialogs:Ft,getDialogByIndex:Rt,tron:Pt};function Ct(n){const t=k.master[n.linkType];if(t==null){N&&console.log(`linkControl FAIL id:${n.id}, bad type:${n.linkType}`);return}const e=t.indexOf(n.id),i=n.linkType=="pref"?k.prefBase:0;return e<0?(N&&console.log(`linkControl FAIL not found id:${n.id}`),!1):(n.linkID=e+i,W[n.id]={obj:n},!0)}function Tt(n){if(W.hasOwnProperty(n))return W[n].obj;N&&console.log(`map.getControlByID FAIL no table entry for ${n}`)}function Mt(n,t){let e=0;switch(n){case"action":e=k.actionID[t];break;case"call":e=k.callID[t];break;case"ux":e=k.uxID[t];break;case"info":e=k.infoID[t];break;case"pref":e=k.prefID[t-k.prefBase];break;case"admin":e=k.adminID[t];break}if(e==0){N&&console.log(`map.getControlByIndex FAIL not registered ${typeID}: ${t}`);return}if(W.hasOwnProperty(e))return W[e].obj;N&&console.log(`map.getControlByIndex FAIL no object ${typeID}:${t}`)}function St(n){let t=k.prefID.indexOf(n);if(t!=-1)return t+k.prefBase;console.warn(`getPrefID FAIL ${n} not found`)}function Pt(n=!0){N=n}function At(n){const t=k.uxID.indexOf(n.id);switch(t){case-1:return N&&console.log(`map.linkDialog FAIL id:${n.id}`),!1;default:n.linkID=t,Y[n.id]={obj:n};break}return!0}function Rt(n){const t=k.uxID[n];if(t==null){N&&console.log(`map.getDialogByIndex FAIL ux not registered for ${n}`);return}if(Y.hasOwnProperty(t))return Y[t].obj;N&&console.log(`map.getDialogByIndex FAIL no object for :${t}`)}function Ft(){console.warn("printDialogs");for(const n in Y)console.log(`  ${Y[n].obj.id}`)}Element.prototype.createDiv=function(n){const t=document.createElement("div");return t.id=n,this.appendChild(t),t};Element.prototype.createDivFirst=function(n){const t=document.createElement("div");return n!=null&&(t.id=n),this.insertAdjacentElement("afterbegin",t),t};class ee{constructor(t,e){o(this,"_id");o(this,"_tags",[]);o(this,"_valRef");o(this,"_valIO",!1);o(this,"_val");o(this,"_valLast");o(this,"_tron",!1);o(this,"_view",!1);o(this,"_height",0);o(this,"div");o(this,"data");o(this,"onChange");o(this,"onRender");switch(e=t.nodeType!=null?"div":e,e){case"object":case"obj":this.id=t;break;case"div":this.div=t,this.div.tna=this,this.id=t.id;break;case"id":default:this.div=document.getElementById(t),this.div!=null?this.div.tna=this:console.error(`tna construct no element for ${t}`),this.id=this.div==null?t:this.div.id;break}this.bRenderEnd=this.renderEnd.bind(this)}fuse(){return this.div==null?console.warn(`${this.id} fuse no div`):(this.div.classList.add("_tna"),this)}shy(t=!0){return this.div.classList.toggle("shy",t),this}prime(t=!0){if(this.div!=null)return this.div.classList.toggle("prime",t),this}touchPrime(){return this.div.ontouchstart=()=>{},this}show(){return this.render(!0),this}hide(){return this.render(!1),this}view(t=!0,e=!1){return this.render(t,e),this}viewStaged(t){return this.view(t,!0)}render(t=this._view,e=!1){this._view=t,this.div.classList.toggle("show",t),e?this.div.addEventListener("transitionend",this.bRenderEnd):this.callRender()}draw(){}renderEnd(){this.div.removeEventListener("transitionend",this.bRenderEnd),this.div.style.transition="",this.callRender()}callRender(){this.onRender!=null?this.onRender(this):this._view&&(this.onShow!=null?this.onShow(this):this.onHide!=null&&this.onHide(this))}display(t=!0){return console.log(`${this.id} display b:%o`,t),this.div.style.display=t?"":"none",this}getDiv(t,e){const i=this.div.querySelector(`#${t}`);if(i==null){console.warn(`${this.id} getDiv FAIL for "${t}"`);return}const s=e==null?this.div.id:e;return i.id=`${t}_${s}`,i}setProp(t,e){this.div.style.setProperty(t,e)}getProp(t){return getComputedStyle(this.div).getPropertyValue(t)}getPropVal(t){return parseFloat(this.getProp(t))}getDataAttr(t,e,i){const s=this.div.dataset[t],r=`--${t.camelKabob()}`,c=this.getProp(r);let d,g="";switch(e){case"pixel":g="px";case"integer":d=parseInt(s);break;case"percent":g="%";case"number":case"float":d=parseFloat(s);break;case"s":d=parseFloat(s)*1e3;break;case"string":return s==null?c.length>0?c:i:(d=s,d);default:d=parseFloat(s),s.indexOf("%")>0&&(g="%"),s.indexOf("px")>0&&(g="px");break}return isNaN(d)&&(d=parseInt(c),c.indexOf("%")>0&&(g="%"),c.indexOf("px")>0&&(g="px")),isNaN(d)&&d!=null&&(d=i),this.div.style.setProperty(r,d+g),d}parent(t,e){for(;!(t.id.indexOf(e)!=-1||t.parentElement==null);)t=t.parentElement;return t}async delay(t=1){return new Promise(e=>{setTimeout(()=>{e()},t)})}set(t){return this.data=t,t!=this._valLast&&(this.draw(),this.onChange!=null&&this.onChange(this,t),this._valLast=t),this}enable(t=!0){return this._enable=t,this}tag(...t){for(const e of t)this._tags.push(e);return this}hasTag(...t){let e=!1;for(const i of t)e=e||this._tags.find(s=>s==i);return e}latchClass(t){return this.div.querySelectorAll("._"+t).forEach(i=>i.classList.add(t)),this}set id(t){this._id=t}get id(){return this._id}valRef(t){return this._valRef=t,this}valIO(){return this._valIO=!0,this}set value(t){if(this._valIO&&this._valRef!=null&&this._valRef[0].val!=null){let e=this._valRef.findIndex(i=>i.val==t);e==-1&&(e=0,console.warn(`${this.id} set value(${t}) FAIL not in valRef, using _val:0`)),t=e}this._val=t}get value(){let t=this._val;return this._valIO&&this._valRef!=null&&this._valRef[0].val!=null&&(t=this._valRef[t].val),t}set height(t){this._height=t}get height(){return this._height}tron(t=!0){return this._tron=t,this}clamp(t,e,i){return Math.min(Math.max(t,e),i)}easeLinear(t,e,i,s){return i*t/s+e}easeInQuad(t,e,i,s){return i*(t/=s)*t+e}easeOutQuad(t,e,i,s){return-i*(t/=s)*(t-2)+e}easeInOutQuad(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}easeInSine(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e}easeOutSine(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e}easeInOutSine(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e}easeInCubic(t,e,i,s){return i*(t/=s)*t*t+e}easeOutCubic(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e}easeInOutCubic(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}easeOutElastic(t,e,i,s){let r,c=0,d=i;return t==0?e:(t/=s)==1?e+i:(c||(c=s*.3),d<Math.abs(i)?r=c/4:r=c/(2*Math.PI)*Math.asin(i/d),d*Math.pow(2,-10*t)*Math.sin((t*s-r)*(2*Math.PI)/c)+i+e)}}class He extends ee{constructor(e){super(e);o(this,"_enable",!1);o(this,"_dynamic",!1);o(this,"_val",!1);o(this,"onChange");this.div.classList.add("tna_Accord"),this.div.dataset.dynamic!=null&&this.dynamic(),this.div.dataset.open!=null&&this.open(),this.div.dataset.prime!=null&&this.prime(),this._spill=this.div.dataset.spill!=null,this.bSpill=this.spill.bind(this)}prime(){return this.div.classList.add("prime"),this}resize(){const e=this.div.classList.contains("prime");this.div.classList.remove("prime"),this.div.classList.add("open"),this.div.style.setProperty("--accord-h","");const i=this.div.offsetHeight;this.div.style.setProperty("--accord-h",i+"px"),this.div.classList.toggle("open",this._val),this.div.classList.toggle("prime",e)}toggle(e){return this._val=e==null?!this._val:e,this._val?this.open():this.close(),this}open(){return this._val=!0,this.div.classList.add("open"),this._spill&&this.div.addEventListener("transitionend",this.bSpill),this.onChange!=null&&this.onChange(this),this}close(){return this._val=!1,this.div.classList.remove("open","spill"),this.onChange!=null&&this.onChange(this),this}spill(){return console.log(`${this.id} spill`),this.div.classList.add("spill"),this.div.removeEventListener("transitionend",this.bSpill),this}dynamic(e=!0){return e&&!this._dynamic?window.addEventListener("resize",this.resize.bind(this)):window.removeEventListener("resize",this.resize.bind(this)),this.resize(),this._dynamic=e,this}}class oe extends ee{constructor(e,i){super(e,i);o(this,"_enable",!1);o(this,"autoEnable",!0);o(this,"primed",!1);o(this,"synced");o(this,"linked");o(this,"linkType");o(this,"linkID");o(this,"valPush");o(this,"valSave");o(this,"lastTime");this._val=0}link(e){e!=null&&(this.linkType=e,this.linked=a.linkControl(this))}sync(e){const i=e.v;this.value=i,this.valPush=this.valSave=i,this.set(e),this.synced||(this.autoEnable&&this._enable!=null&&this.enable(),this.synced=!0)}push(){if(this.linked==!1)return;const e=this.value;e!=this.valPush&&(this.valPush=e,this.send("push",e))}save(){if(this.linked==!1)return;const e=this.value;e!=this.valSave&&(this.valSave=this.valPush=e,this.send("save",e))}send(e,i){const s={a:a.actionID.indexOf(e),t:[]};s.t.push({i:this.linkID,v:i|0}),this.linked!=null&&v.transmit(s,`${this.id} >>`)}}const Ht=`<div id="region" class="region">
    <div id="wrap" class="wrap"></div>
    <div id="label"></div>
  </div>`;class Pe extends oe{constructor(e,i){super(e);o(this,"_enable",!0);o(this,"_highlight",!1);o(this,"_static",!1);o(this,"_target");o(this,"_index");o(this,"_x0",0);o(this,"_y0",0);o(this,"_x1",100);o(this,"_y1",100);o(this,"_x",0);o(this,"_y",0);o(this,"_scaleX",1);o(this,"_scaleY",1);o(this,"list",[]);o(this,"onExecute");this.link(i),this.target(this.div),this.div.insertAdjacentHTML("beforeend",Ht),this.div.classList.add("tna_Icon"),this.dRegion=this.getDiv("region"),this.dWrap=this.getDiv("wrap"),this.dLabel=this.getDiv("label"),isNaN(this.getPropVal("--icon-w"))&&this.setProp("--icon-w",this.getProp("--icon-h")),this._val=0,this.label=this.getDataAttr("label","string","")}set add(e){const i=`
      <svg class="svg" viewBox="${this._x0} ${this._y0} ${this._x1} ${this._y1}">
        <g><circle cx="0" cy="0" r="50" /></g>
      </svg>`;this.dWrap.insertAdjacentHTML("beforeend",i);const s=this.dWrap.lastChild,r=s.lastElementChild;r.innerHTML=e,this.list.push(s),this.update()}set addCenter(e){this.add=e,this.list.slice(-1)[0].lastElementChild.firstElementChild.setAttribute("transform","translate(-50 -50)")}symbol(e){return window["sym_"+e]==null?console.warn(`${this.id} addSymbol FAIL: ${e}`):this.add=`<use href="#sym_${e}"/>`,this}enable(e=!0){return e==this._enable?this:(this._enable=e,this.render(),this)}render(e=this._view,i){super.render(e,i),this.div.classList.toggle("interact",e&&this._enable&&!this._static),this.div.classList.toggle("disable",!this._enable&&this._view)}set index(e){if(e=Number(e),isNaN(e))return console.warn(`${this.id} set index NaN`);if(e==this._index)return;this._index!=null&&this.list[this._index].classList.remove("show"),this.list[e].classList.add("show"),this._index=e}get index(){return this._index}def(){return this.index=0,this}toggle(e){return this._val=e==null?!this._val:e,this.draw(e),this}cycle(){let e=this._index+1;return e=e>=this.list.length?0:e,this.index=e,this.draw(),this}clear(){this.list.forEach(e=>e.remove()),this.list=[]}update(){const e=`translate(${this._x} ${this._y}) scale(${this._scaleX} ${this._scaleY})`;for(let i in this.list)this.list[i].firstElementChild.setAttribute("transform",e)}execute(){this.onExecute!=null&&this.onExecute(this),this.onChange!=null&&this.onChange(this)}set(e){typeof e!="object"&&(this.value=e),e!=this.lastVal&&(this.index=this.value),super.set(e)}svgRef(e){return e>this.list.length-1?console.warn(`${this.id} svgRef FAIL, bad index`):this.list[e]}gRef(e){return e>this.list.length-1?console.warn(`${this.id} gRef FAIL, bad index`):this.list[e].firstElementChild}viewBox(e,i,s,r){return this._x0=e,this._y0=i,this._x1=s,this._y1=r,this}translate(e,i){return this._x=e,this._y=i,this.update(),this}center(){return this.translate(50,50),this}scaleXY(e,i){return this._scaleX=e,this._scaleY=i,this.update(),this}scale(e){return this._scaleX=this._scaleY=e,this.update(),this}scaleCenter(e){return this._scaleX=this._scaleY=e,this._x=50,this._y=50,this.update(),this}sizeXY(e,i){return this.div.style.setProperty("--icon-h",i+"px"),this.div.style.setProperty("--icon-w",e+"px"),this}size(e){return this.div.style.setProperty("--icon-x",e),this}highlight(e){if(e==-1&&(e=!this._enable),!!this._enable)return this._highlight=e,this.div.classList.toggle("highlight",e),this}static(e=!0){return this._static=e,this.div.classList.toggle("interact",!e),this}set label(e){const i=e.length>0;this.dLabel.innerText=i?e:"",this.dLabel.classList.toggle("label",i)}target(e){return this._target=typeof e=="string"?window[e]:e,this._target.onclick=this.execute.bind(this),e!=this.div&&(this.div.style.pointerEvents="none"),this}enabled(){return this._enable}}class q extends Pe{constructor(e,i){super(e);o(this,"_class");o(this,"_anim");o(this,"_count",0);o(this,"_duration",0);o(this,"_delay",0);o(this,"onAnimEnd");this.link(i)}async act(e=!0){const i=this._class!=null?"act_"+this._class:"act";if(this.div.classList.contains(i)&&(this.div.classList.remove(i),await this.delay()),this.div.classList.toggle(i,e),e){const s="tna_Icon_"+(this._anim!=null?"act_"+this._anim:"act");this.div.onanimationend=r=>{`${this.id}`,r.animationName==s&&this.div.classList.remove(i),this.div.onanimationend=void 0,this.onAnimEnd!=null&&this.onAnimEnd(this)}}else this.div.onanimationend=void 0;return this}choreo(e,i){return this._anim=e,this._class=e+(i==null?"":"_"+i),this}timing(e,i=this._dur,s=0){this._count=e=Number(e),this._dur=i=Number(i),this._delay=s=Number(s);const r="--icon-act_"+this._anim;return this.setProp(r+"-n",e==0?"infinite":e),this.setProp(r+"-t",i+"ms"),this.setProp(r+"-d",s+"ms"),this}property(e,i){this.dWrap.style.setProperty("--icon-act-"+e,i)}}const K=[];let Q;function Bt(n,t){const e=window[n];if(e==null)return console.log(`panel.add() FAIL, cannot find ${n}`);e.dataset.index=K.length,K.push({id:n,title:t,panel:e})}function Nt(){if(Q!=null)return K[Q].panel}function zt(){return Q}function jt(){return Q!=null?K[Q].id:void 0}function Ke(n,t=!1){n<0||(Q=n,K.forEach((e,i)=>{const s=e.panel,r=n==i;t||(s.classList.toggle("show",r),s.children[0].classList.toggle("show",r)),r&&s._tna_begin!=null&&s._tna_begin()}))}function Vt(n,t=!1){const e=K.findIndex(i=>i.id==n);return e!=null&&Ke(e,t),e}function Gt(n){return new URLSearchParams(n).get("panel")}var ce={add:Bt,current:Nt,currentID:jt,currentIndex:zt,index:Ke,setByID:Vt,inject:Gt};class Le extends ee{constructor(e,i){super(e,"div");o(this,"_static",!1);o(this,"_index");o(this,"_label");o(this,"_html");o(this,"_target");o(this,"control");o(this,"bClick");if(i!=null){this.control=i,this.div.classList.add("menu_item"),this.dLabel=this.getDiv("label"),this.bClick=this.click.bind(this);let s=this.div.querySelector("._click");s==null&&(s=this.div),s._tna_target=this.div,this._target=s}else this.div.classList.add("menu_static"),this._target=this.div,this.static();this.enable()}click(e){let i=e.target._tna_target;i==null&&(i=this.parent(e.target,"_item")),this.execute(i),e.preventDefault(),e.stopImmediatePropagation()}async execute(e){this.control.click(this),this.div.classList.remove("hover"),this.div.classList.add("action"),await this.delay(360),this.control.view(!1),await this.delay(300),this.div.classList.remove("action"),this.control.execute(this)}enable(e=!0){return this.enabled=e,this.control!=null&&this.div.classList.toggle("hover",e&&this.control._hover),this.div.classList.toggle("enable",e),this._target.onclick=e&&!this._static?this.bClick:null,this._target.style.pointerEvents=e&&!this._static?"":"none",this}highlight(e=!0){return this.div.classList.toggle("highlight",e),this.enable(!e),this}set label(e){this.dLabel.innerText=this._label=e}get label(){return this._label}set html(e){this.dLabel.innerHTML=this._html=e}static(e=!0){return this._static=e,this._target.onclick=this.enabled&&!this._static?this.bClick:null,this._target.style.pointerEvents=e?"none":"",this}}const qt=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="panel" class="panel"></div>
  </div>`,Xt=`<div>
    <div id="label" class="label"></div>
  </div>`;class Ut extends ee{constructor(e,i=qt){super(e);o(this,"_enable",!1);o(this,"_index");o(this,"_highlight",!1);o(this,"_hover",!0);o(this,"_static_high",!0);o(this,"_wipe",!1);o(this,"_tm_open");o(this,"_tm_close");o(this,"_block_tm_open");o(this,"_block_tm_close");o(this,"_block_opacity");o(this,"_itemT");o(this,"_staticT");o(this,"_itemN",0);o(this,"_staticN",0);o(this,"pool",[]);o(this,"list",[]);o(this,"last");o(this,"onBegin");o(this,"onEndPrime");o(this,"onEnd");o(this,"onPrime");o(this,"onExecute");o(this,"onResize");this._itemT=Xt,this.div.insertAdjacentHTML("afterbegin",i),this.div.classList.add("tna_Menu"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dPanel=this.getDiv("panel"),this.getDiv("banner"),this.blocked=this.div.dataset.block!=null,this.blocked&&(this.dBlock=document.createElement("div"),this.dBlock.id="block",this.div.insertAdjacentElement("afterbegin",this.dBlock),this.getDiv("block"),this.dBlock.classList.add("block"),this.dBlock.onmousedown=this.dBlock.ontouchstart=this.escape.bind(this)),this._highlight=this.div.dataset.highlight!=null,this.enable(this.div.dataset.enable!=null),this._block_opacity=this.getProp("--menu-block-a"),this.itemH=this.getDataAttr("menuIH","pixel",""),this.staticH=this.getDataAttr("menuStaticH","pixel",""),this.merge()}merge(){let e,i;const s=this.div.childElementCount-this.blocked;for(let r=1;r<s;r++)i=this.div.children[1+this.blocked],i.classList.contains("menu_item")?(e=this.add(),e.link=i.dataset.link,e.label=i.innerHTML,i.dataset.highlight!=null&&(this._index=e._index)):i.classList.contains("menu_static")&&(e=this.add("static")),e.view(!0),i.remove();this._index!=null&&this.index(this._index),s>1&&this.update()}add(e="item"){let i,s;switch(e){case"static":if(this._staticT!=null){const r=document.createElement("template");r.innerHTML=this._staticT,s=r.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createStatic(s);break;default:if(this._itemT!=null){const r=document.createElement("template");r.innerHTML=this._itemT,s=r.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createItem(s);break}return i=this.dPanel.appendChild(s),this.pool.push(i),this.last}createItem(e){const i=new Le(e,this),s=`${this.id}_item_${this._itemN}`;return e.id=i.id=s,i._index=this._itemN,i.link=this._itemN,i.height=this.itemH,this.list.push(e),this._itemN++,i}createStatic(e){const i=new Le(e).static(),s=`${this.id}_static_${this._itemN}`;return e.id=i.id=s,i.height=this.staticH,this._staticN++,i}index(e){this._index=e;for(let i in this.pool)this.pool[i].tna.highlight(!1);return e>=0&&this.list[e].tna.highlight(),this.setStatic(e),super.set(e),this}setStatic(e){if(!this._static_high)return;let i;if(this.pool.find((s,r)=>{const c=s==this.list[e];return c&&(i=r),c}),i!=null){const s=i-1,r=i+1;s>=0&&this.pool[s].tna.highlight(),r<this.pool.length-1&&this.pool[r].tna.highlight()}}update(){let e=0;return this.pool.forEach((i,s)=>{e+=i.tna.height*i.tna._view}),this.height=e,e}clear(){this.list.forEach(e=>{e.tna=void 0,e.remove()}),this.list=[],this.pool=[],this._itemN=this._staticN=0,this.update()}click(e){this.last=e,this._wipe&&this.index(-1),this.setStatic(e._index),this.onPrime!=null&&this.onPrime(e,e.link)}execute(e){this._highlight&&(e.enable(!1),this.index(e._index)),this.onExecute!=null&&this.onExecute(this,e.link)&&this.end()}async escape(e){e!=null&&(e.stopImmediatePropagation(),e.preventDefault()),this.view(!1),this.transBlock(this._block_tm_close),this.onEnd!=null&&this.onEnd(this)}begin(){this.transRegion(this._tm_open,"ease-out"),this.transBlock(this._block_tm_open,"ease"),this.onBegin!=null&&this.onBegin(this,!0)}endPrime(){this.transRegion(this._tm_close,"ease-in"),this.onEndPrime!=null&&this.onEndPrime(this)}end(){this.transBlock(),this.onEnd!=null&&this.onEnd(this)}render(e=this._view){super.render(e),this.div.classList.toggle("open",e),e?this.begin():this.endPrime()}find(e){return this.list.find(s=>s.tna.label==e)}wipe(e=!0){return this._wipe=e,this}hover(e=!0){return this._hover=e,this}set height(e){this._height=e,this.div.style.setProperty("--menu-h",e+"px"),this.onResize!=null&&this.onResize(this)}get height(){return this._height}get count(){return Object.keys(this.list).length}get next(){if(this.last._index<this.count)return this.list[this.last._index+1]}get previous(){if(this.last._index>0)return this.list[this.last._index-1]}set template(e){this._itemT=e}set templateStatic(e){this._staticT=e}staticHigh(e=!0){return this._static_high=e,this}timing(e,i){return this._tm_open=e,this._tm_close=i,this}timingBlock(e,i){return this._block_tm_open=e,this._block_tm_close=i,this}transRegion(e=0,i=""){const s=e+"ms";return this.dRegion.style.transitionDuration=s,this.dRegion.style.transitionTimingFunction=i,this}transBlock(e=0,i=""){const s=e+"ms",r=this._view?this._block_opacity:0;return this.dBlock.style.transitionDuration=s,this.dBlock.style.transitionTimingFunction=i,this.dBlock.style.opacity=r,this.dBlock.style.visibility="visible",e==0?this.transBlockEnd():this.dBlock.ontransitionend=this.transBlockEnd.bind(this),this}transBlockEnd(){this._view||(this.dBlock.style.visibility="hidden"),this.dBlock.ontransitionend=void 0}}var Zt={control:Ut,item:Le};const Jt=`<g stroke-width="6.7">
    <polygon
      points="89.5 72.8 50 95.6 10.5 72.8 10.5 27.2 50 4.4 89.5 27.2 89.5 72.8"
    />
    <polyline id="badge_N" points="28.4 62 28.4 38 71.6 62 71.6 38" />
  </g>`,Wt=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="banner" class="banner">
      <div class="banner_wrap">
        <div>C</div><div>u</div><div>b</div><div>e</div>
        <div>C</div><div>o</div><div>r</div><div>e</div></div></div>
    <div id="panel" class="panel"></div>
    </div>
  </div>`;const he={},$e=[];let y,L,te,ke,Qe=!1,le=!1;function Yt(){if(he.badge=L=new q("badge").show(),L.div.classList.add("connect"),L.add=Jt,L.value=!1,L.def(),L.ext_onExecute=t=>{t.choreo("3D_flip").timing(1,250).act(),y.view(!y._view),y._view||y.escape()},tt(!m.prop.modeExt),he.dot=te=new Pe("badge_dot"),te.add='<circle cx="50" cy="50" r="50" />',te.static().prime().def(),te.onRender=t=>te.div.classList.toggle("orbit",t._view),window.menu!=null){he.menu=y=new Zt.control("menu",Wt).wipe(),ke=y._index,y.timing(250,250).timingBlock(500,250),y.onExecute=(e,i)=>{e.last.index==0;const s=et(i);return s&&(ke=e._index),n(),s},y.onBegin=y.onEnd=e=>{L.highlight(e._view);const i=e._view?"blur(3px)":"",s=e._view?e._block_tm_open:e._block_tm_close;Ne(s,"ease",i),le=!1},Be("Admin");const t=Be("R/Con","rc");t.html='R<span style="padding-left: 2px; font-size: 130%; position: relative; top: 1.5px;">/</span>Con'}const n=async()=>{le=!0,await O.delay(2e3),le&&(L.highlight(!1),y.index(ke),y.transBlock(),Ne(),le=!1)}}function Be(n,t){const e=y.find(n);if(e==null){let i=y.add("static").enable();return $e.push(i),i=y.add().enable(),$e.push(i),i.label=n,i.link=`/${t!=null?t:n.toLowerCase()}/`,Qe=!0,i}else return e.tna}function Ne(n=0,t="",e=""){const i=n+"ms",s=window.fit!=null?ce.current():window.page;if(s==null)return console.warn("nav menuBG FAIL");s.style.filter=e,s.style.transitionProperty="filter",s.style.transitionDuration=`${i}`,s.style.transitionTimingFunction=t}function et(n){console.log(`hyper -> "${n}"`);const t=ce.currentIndex(),e=new URL(n,"http://x"),i=e.pathname==document.location.pathname;if(i){const s=ce.inject(e.search);ce.setByID(s)}else!m.prop.local&&n.length>1&&n.slice(-1)=="/"&&(n=n.slice(0,-1)),window.location=n,y.index(t);return i}function Kt(n){!Qe||($e.forEach(t=>t.view(n)),y.update())}function tt(n=!0){L.div.classList.toggle("static",!n),L.div.classList.toggle("dim",!n),L.onExecute=n?L.ext_onExecute:void 0,L.enable(n)}var V={tna:he,init:Yt,enable:tt,hyper:et,access:Kt};class C extends oe{constructor(e,i=void 0,s="info"){super(e,i);o(this,"onChange");this.link(s)}}const R={cast:"border-radius: 9px; padding: 1px 7px 0; font-style: italic; font-weight: bold",test:"border: 0.25px solid gray; border-style: solid solid solid none; border-radius: 0 9px 9px 0; padding: 1px 7px 0 0; font-style: italic; font-weight: bold",gray:"border: 0.25px solid gray; background: gray; color: white;",black:"border: 0.25px solid black; background: black; color: white;",red:"border: 0.25px solid red; background: red; color: white;",gold:"border: 0.25px solid gray; background: gold; color: black;"},j=["fail","cache","cache_end","tear","touch","normal","warn","error","alert","bold"],Ee={},G={},F={};let fe,ue,Oe=0;function Qt(){fe=a.callID.indexOf("call_console"),Ee.rc=new C("call_console","object","call"),Ee.rc.onChange=(n,t)=>{switch(t.v){case 0:F.fail!=null?F.fail():S("fail","Access Not Authorized");break;case 1:t.n==1&&(ue=0);const e=JSON.stringify(t);console.groupCollapsed("cache n:%o, count:%o",t.n,t.z.length),console.log(e),console.groupEnd(),t.z.length&&t.z.forEach(i=>{G.last_format=j[i.f],G.last_msg=i.m,S(Oe?j[i.f]:"tear",i.m),Oe++}),ue+=t.z.length;break;case 2:console.warn("cache EOL chunks:%o count:%o",t.n,ue),t.c!=null&&(G.capacity=t.c),t.f!=null&&(G.full=t.f),F.cache!=null&&F.cache();break;default:G.last_format=j[t.v],G.last_msg=t.x,F.msg!=null&&F.msg(),S(j[t.v],t.x);break}}}function ei(){Oe=ue=0}function S(n,t){if(F.output!=null)return F.output(n,t);switch(n){case"normal":console.log("%cRC",R.gray+R.cast,t);break;case"warn":const e="border: 0.25px black solid;";console.log("%cRC",e+R.gold+R.cast+e,t);break;case"error":console.log("%cRC%c %s",R.red+R.cast,"color: red",t);break;case"bold":console.log("%cRC%c %s",R.black+R.cast,"font-weight: bold",t);break}}function ti(){m.prop.preflight||ii()}function ii(){const n=new CustomEvent("meh"),t="rc.test format:",e={a:a.actionID.indexOf("call"),t:[{i:fe,v:j.indexOf("normal"),x:t+"normal"},{i:fe,v:j.indexOf("warn"),x:t+"warn"},{i:fe,v:j.indexOf("error"),x:t+"error"}]};n.data=JSON.stringify(e),v.parse(n)}function ni(n){S("normal",n)}function si(n){S("warn",n)}function oi(n){S("error",n)}function ai(n){S("tear",n)}function ri(n){S("alert",n)}function li(n){S("bold",n)}var u={formatID:j,style:R,tna:Ee,prop:G,upon:F,init:Qt,prime:ti,reset:ei,log:ni,warn:si,error:oi,tear:ai,alert:ri,bold:li};const di=1,ci=2;class hi extends ee{constructor(){super("tron","object");o(this,"_enable",!0);o(this,"state",!1);o(this,"STAGE",Object.freeze({BEGIN:1,END:0}));o(this,"holdTime");o(this,"delayTime");o(this,"showTimeout");o(this,"hideTimeout");o(this,"onWrite");this.setHold().setDelay()}assign(e){const i=window[e];return i==null?console.warn("tron assign FAIL: %o",e):(i.classList.add("tna_Tron"),this.div=i,this)}enable(e=!0){if(this.div!=null&&e!=this._enable)return this.div.classList.toggle("disable",!e),this._enable=e,this}async write(e,i=this.holdTime){this.div!=null&&(clearTimeout(this.hideTimeout),this.div.innerText=e,this.div.classList.add("show","prime"),this.state=!0,this.hideTimeout=setTimeout(this.writeEnd.bind(this),i*1e3),this.onPrime!=null&&this.onWrite(this,STAGE.BEGIN))}async writeEnd(){this.state=!1,this.hideTimeout=void 0,this.div.classList.remove("show"),this.div.ontransitionend=()=>{this.div.classList.remove("prime"),this.onPrime!=null&&this.onWrite(this,STAGE.END),this.div.ontransitionend=void 0}}writeDelay(e,i=this.holdTime,s=this.delayTime){this.div!=null&&(clearTimeout(this.showTimeout),this.state?(this.div.innerText=e,this.write(e,i)):this.showTimeout=setTimeout(this.write.bind(this),s*1e3,e,i))}cancel(){clearTimeout(this.showTimeout)}kill(){this.cancel(),this.writeEnd()}add(e){return e.onTron=i=>this.write(i),this}setHold(e=di){return this.holdTime=e,this}setDelay(e=ci){return this.delayTime=e,this}}var fi=new hi;class ui extends oe{constructor(){a.prefID.indexOf("ux_index")<0&&console.warn("tna_UX constructor FAIL, cannot find prefID");super("ux_index","object");o(this,"_lastIndex");o(this,"_lastDialog");o(this,"_nextDialog");o(this,"_currentDialog");this.link("pref")}set(e){const i=e.v;if(this._lastIndex!=i&&(this._nextDialog=a.getDialogByIndex(i),this._lastDialog=a.getDialogByIndex(this._lastIndex),this._nextDialog!=null)){this.tron&&this._lastDialog!=null&&`${this._lastDialog.id}`,this._lastDialog!=null&&this.last.exit(),this._nextDialog.begin(),this._lastIndex=this._val=i,this._currentDialog=this._nextDialog,super.set(e);return}}get last(){return this._lastDialog!=null?this._lastDialog:{id:"NULL"}}get lastID(){return this._lastDialog!=null?this._lastDialog.id:void 0}get next(){return this._nextDialog}get current(){return this._currentDialog}get currentID(){return this._currentDialog!=null?this._currentDialog.id:void 0}}const gi='<div id="region" class="region"></div>',pi=`
    <svg id="svg" viewBox="0 0 12 13.8" class="digit">
      <g id="a" class="seg">
        <polygon points="9.76 0 10.03 0.31 8.66 1.5 4.33 1.5 3.31 0.34 3.7 0 9.76 0"/>
      </g>
      <g id="b" class="seg">
        <polygon points="10.63 1 9.96 5.77 9.07 6.55 8.44 5.82 8.99 1.88 10.36 0.69 10.63 1"/>
      </g>
      <g id="c" class="seg">
        <polygon points="7.57 11.97 8.13 8.03 9.02 7.25 9.65 7.98 8.97 12.8 8.58 13.14 7.57 11.97"/>
      </g>
      <g id="d" class="seg">
        <polygon points="2.86 12.3 7.19 12.3 8.21 13.46 7.82 13.8 1.76 13.8 1.49 13.49 2.86 12.3"/>
      </g>
      <g id="e" class="seg">
        <polygon points="0.89 12.8 1.56 8.03 2.45 7.25 3.08 7.98 2.53 11.92 1.16 13.11 0.89 12.8"/>
      </g>
      <g id="f" class="seg">
        <polygon points="2.5 6.55 1.87 5.82 2.55 1 2.94 0.66 3.95 1.83 3.39 5.77 2.5 6.55"/>
      </g>
      <g id="g" class="seg">
        <polygon points="8.06 6.15 8.69 6.88 7.8 7.65 3.46 7.65 2.83 6.92 3.72 6.15 8.06 6.15"/>
      </g>
      <g id="dp" class="seg"><circle cx="10.77" cy="13.05" r="0.75" /></g>
    </svg>`,_i=`<svg id="svg" viewBox="0 0 12.47 13.8" class="colon">
    <g class="seg" transform="translate(0.2 0)">
      <circle cx="1.72" cy="3.45" r="0.75" />
      <circle cx="0.75" cy="10.35" r="0.75" />
    </g>
  </svg>`;var Ie={HTML:gi,DIGIT:pi,COLON:_i};class vi extends oe{constructor(e){super(e);o(this,"_primeD",!1);o(this,"_primeN",0);o(this,"_bright",0);o(this,"digits",[]);o(this,"onPrime");this.fuse(),this.link("info"),this.div.insertAdjacentHTML("beforeend",Ie.HTML),this.div.classList.add("tna_Retro7"),this.dRegion=this.getDiv("region");for(let s=0;s<4;s++){this.dRegion.insertAdjacentHTML("beforeend",Ie.DIGIT);const r=this.dRegion.querySelector("#svg");r.id=`svg_${this.digits.length}_${this.id}`,r.style.setProperty("--retro-i",s),this.digits.push(r)}this.dRegion.insertAdjacentHTML("beforeend",Ie.COLON);const i=this.dRegion.querySelector("#svg");i.id=`colon_${this.id}`,this.divColon=i.children[0]}print(e){for(let i=0;i<4;i++)this.digitRaw(i,e[i])}digitRaw(e,i){let s=this.digits[e].children;for(let r=0;r<8;r++){const c=i>>r&1;s[r].classList.toggle("show",c)}}colon(e=2){this.divColon.classList.toggle("show",e==2)}clear(){this.print([0,0,0,0]),this.colon(!1),this.onChange!=null&&this.onChange(this,this._val)}async reset(){this._primeD=!1,this._primeN=0,this.view(!1),await this.delay(500),this.clear(),this.prime(!1)}async set(e){if(this._val=e.v,!this._primeD&&(this.onBegin!=null?this.onBegin(this):this.show(),this._primeN<2)){let i=0;for(let s=0;s<e.v.length;s++)i+=e.v[s];i>0&&this._primeN++,this._primeN=Math.min(this._primeN,2),this._primeN>1&&this.onPrime!=null&&this.onPrime(this)}this.print(e.v),this.colon(e.v[4]),this.onChange!=null&&this.onChange(this,e)}bright(e=0){return this._bright=e,this.div.classList.toggle("dim",e==0),this}}const it="3.1.05",nt={}.VITE_PREFLIGHT==="true",mi={}.VITE_EXT_SERVE==="true";nt||console.warn("core PREFLIGHT: %o",!1);const x={},I={preflight:nt,modeExt:mi,modeAP:!1,prime_local:!1},H={},ne={},J={},z={};let de,st,E,T,pe,M,Ce=!1;function yi(){fi.assign("tron_output"),ki(),wi(),x.title=E=new ee("head_title"),E.div.classList.add("click"),E.div.onclick=()=>{let t=ne.title!=null?ne.title():!1;t=t==null?!1:t,t||console.log("core title click default")},E.fuse().shy(!(I.modeExt||!pe)).view(),xi(),window.diag_client.innerText=O.versionString(it);const n=String(document.location);I.local=n.includes("host:")||n.includes("local:"),de=new C("developFPO","object"),de.onDefault=()=>I.prime_local=!0,O.initStorage("develop",de),I.develop=de.value,x.ux=st=new ui().tron(),V.init()}function xi(){window.socket!=null&&(M=new Pe("socket").prime().show().enable(),M.symbol("x").symbol("o"),M.value=!0,M.index=1,M.onExecute=n=>{n.toggle(),n.index=n.value,v.monitor(n.value),n.value?v.init():v.kill()},x.socket_button=M)}function wi(){I.modeExt||(pe=window.info_display!=null,pe&&(x.retro=T=new vi("info_display"),T.ext_no_prime=!0,T.ext_view=void 0,I.modeAP||(T.onBegin=n=>{}),T.onRender=(n,t)=>{const e=t!=null?t:n._view;n.ext_view!=e&&(n.ext_view=e,n.div.classList.toggle("click",e),n._view&&n.shy(!1))},T.div.onclick=bi))}function bi(){let n=ne.retro!=null?ne.retro():!1;n=n==null?!1:n,n||(console.log("RD click default, ux:",st.currentID),v.send("save","clock_disp",-1))}function ki(){if(window.rc_ind==null||I.user==0)return;const n=new C("info_rc","object");u.upon.msg=(t=u.prop.last_format)=>{const e=I.user!=null?I.user:0;x.rc_ind.view(t!=u.formatID.indexOf("touch")&&e)},n.onChange=(t,e)=>{u.upon.msg(e.v)},x.rc_ind=new q("rc_ind").symbol("dot").def(),x.rc_ind.onExecute=async t=>{t.choreo("blink","hot").timing(3,150).act(),t.onAnimEnd=()=>V.hyper("/rc/")}}let ze=!1;async function Ae(){for(const[n,t]of Object.entries(x))t.ext_no_prime==null&&t.prime();if(pe)E.shy(!1);else return Ae=!0;I.modeAP||(ze||await O.delay(1250),E.view(!1),E.div.classList.add("slide"),window.head.classList.add("gradient"),x.retro.prime(),x.retro.shy(!1),await O.delay(250),x.retro.view(),E.shy(),E.div.classList.remove("slide")),ze=!0,at()}function ot(){Ce=!1,V.tna.badge.div.classList.add("connect","prime"),V.tna.dot.viewStaged(!1),M!=null&&(M.index=1),H.open!=null&&H.open()}async function Te(){Ce||(Ce=!0,V.tna.badge.div.classList.add("prime"),V.tna.badge.div.classList.remove("connect"),V.tna.dot.view(!0),window.head.classList.remove("gradient"),await O.delay(250),T!=null&&T.reset(),M!=null&&M.def(),H.close!=null&&H.close(),E.shy(!1),await O.delay(250),E.view())}function Ii(){v.onOpen(ot),v.onClose(Te),new C("info_install","object").onChange=(e,i)=>{e.ext_prime==null&&(J.display=(i.v&a.hwMask.display)>>a.hwOffset.display,J.piezo=(i.v&a.hwMask.piezo)>>a.hwOffset.piezo,J.xpio=(i.v&a.hwMask.xpio)>>a.hwOffset.xpio,J.gps=(i.v&a.hwMask.gps)>>a.hwOffset.gps,i.z,z.display=(i.z&a.hwMask.display)>>a.hwOffset.display,z.piezo=(i.z&a.hwMask.piezo)>>a.hwOffset.piezo,z.xpio=(i.z&a.hwMask.xpio)>>a.hwOffset.xpio,z.gps=(i.z&a.hwMask.gps)>>a.hwOffset.gps,Object.keys(z).forEach(function(s,r){z[s]||document.querySelectorAll("._"+s).forEach(d=>d.style.display="none")}))},new C("call_prime","object","call").onChange=e=>{Ae(),e.ext_prime==null&&(H.prime!=null&&H.prime(J,z),e.ext_prime=!0)},x.user=new C("info_user","object"),x.user.onChange=e=>{I.user=e.data.v,V.access(I.user),H.user!=null&&H.user(e.data)};let n=new C("call_restart","object","call");n.onChange=async e=>{u.bold("system ESP restart"),Te(),await e.delay(1e3),v.send("ping")};let t=new C("call_warn","object","call");if(t.onChange=(e,i)=>{let s=parseInt(i.v);s=s<a.warnID.length?s:-1;let r;s>=0&&(r=a.warnID[s]),r!=null&&console.error(`system warning ${r}`)},T!=null&&a.getControlByID("ui_bright")==null){const e=new C("ui_bright","object","pref");e.onChange=(i,s)=>T.bright(s.v),x[e.id]=e}}function at(n=I.user){let t=document.querySelectorAll("._admin");t.forEach(e=>e.style.display=n?"":"none"),t=document.querySelectorAll("._admin_alt"),t.forEach(e=>e.style.display=n?"none":"inherit")}var m={tna:x,prop:I,upon:H,click:ne,version:it,install:J,activate:z,init:yi,prime:Ae,open:ot,close:Te,patch:Ii,admin:at};let _e=!1,U=!1,rt=!1,X,lt,Me,Se;const Di=`ws://${window.location.hostname}/ws`;let B,se=!1;function Re(){_e||(_e=!0,B=new WebSocket(Di),B.onopen=$i,B.onclose=Ei,B.onmessage=lt,U=!1,X=clearTimeout(X))}function Li(n){n!=se&&(console.log(`socket monitor b:${n} state:${U}`),se=n,n&&(!U&&X==null?Re():X=clearTimeout(X)))}function dt(){return U=(B!=null?B.readyState:je.closed)==je.connected,U}function $i(){console.warn("socket open"),U=!0,Me!=null&&Me()}function Ei(){console.error(`socket close, squelch:${rt} check:${se}`),_e=!1,U=!1,Se!=null&&Se(),se&&(clearInterval(X),X=setTimeout(Re,1e3))}function Oi(){console.warn("socket kill"),B&&B.close(),rt=!0,_e=!1}function ct(n){lt=n}function Ci(n){Me=n}function Ti(n){Se=n}const je=Object.freeze({connecting:0,connected:1,closing:2,closed:3});let P=!1;var v={onOpen:Ci,onClose:Ti,onParse:ct,check:se,init:Re,ready:dt,monitor:Li,kill:Oi,parse:me,sendUX:Fi,sendTune:Hi,sendObject:ht,send:ft,fakeMessage:Ni,fakeObject:Bi,transmit:ae,fill:zi,tron:Mi};ct(me);function Mi(n=!0){P=n}function Si(n){let t;for(let e in n)t=a.getControlByIndex("info",n[e].i),t!=null?(n.length>1&&(P?console.log(`<< info #${e} %o ${n[e].v}`,t.id):t.id!="info_display"&&P&&console.log(`<< info %o ${n[e].v}`,t.id)),t.set(n[e])):P&&console.log(`parseInfo #${e} no object id %o`,a.infoID[n[e].i])}function Pi(n){for(let t in n){const e=n[t].i,i=a.getControlByIndex(e<a.prefBase?"admin":"pref",e);i!=null?(P&&(n.length>1?console.log(`<< pref #${t} ${i.id} ${n[t].v}`):console.log(`<< pref ${i.id} ${n[t].v}`)),i.sync(n[t])):P&&console.log(`parseSync #${t} no object id %o`,e)}}function Ai(n){for(let t in n){const e=a.getControlByIndex("call",n[t].i);e!=null&&e.set(n[t])}}function Ri(n){for(let t in n){const e=n[t],i=a.getControlByIndex("ux",e.i);if(i!=null){if(e.s<0)return console.warn("parseUX FAIL bad stage value %o",a.stageID[e.v]);i.parse(e)}else P&&console.log("parsUX no object %o",a.infoID[e.i])}}function me(n){let t=JSON.parse(n.data),e=a.actionID[t.a],i=t.t;switch(e){case"call":Ai(i);break;case"ux":Ri(i);break;case"info":Si(i);break;case"sync":Pi(i);break}}function Fi(n,t,e){const i="ux",s=a.uxID.indexOf(n);if(s<0)return console.warn("sendUX FAIL no dialog %o",n);const r={i:s},c=a.stageID.indexOf(t);c>=0&&(r.v=c),e!=null&&(r.x=e);const d={a:a.actionID.indexOf(i),t:[r]};ae(d,`${i} >>`)}function Hi(n="default"){const t="call",e=a.tuneID.indexOf(n);if(e<0)return console.warn("sendTune FAIL no melody %o",n);a.callID.indexOf("call_tune");const i={a:a.actionID.indexOf(t),t:[{i:a.callID.indexOf("call_tune"),v:e}]};ae(i,`${t} >>`)}function ht(n,t,e){const i=a.actionID.indexOf(n);if(i<0)return console.log("sendObject FAIL no action %o",n);let s={a:i,t:[]},r={i:a.getPrefID(t)};return Object.assign(r,e),s.t.push(r),ae(s,`${n} >>`),s}function Bi(n,t,e){const i=ht(n,t,e);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),me(s)}}function ft(n,t,e){let i=a.actionID.indexOf(n);if(i<0){P&&console.log("send FAIL no action %o",n);return}let s={a:i,t:[]},r=-1;switch(n){case"push":case"save":case"sync":r=a.getPrefID(t);break;case"call":r=a.callID.indexOf(t);break;case"ping":r=e=0}if(r<0){P&&console.log("send FAIL no id %o in action %o",t,n);return}return s.t.push({i:r,v:e|0}),ae(s,`${n} >>`),s}function Ni(n,t,e){const i=ft(n,t,e);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),me(s)}}function ae(n,t){const e=JSON.stringify(n);P&&console.log(`${t} ${e}`),dt()&&B.send(e)}async function zi(n,t,e){let i={};if(m.prop.preflight)try{const s=await fetch(t,{method:"GET"});if(s.status===200)i=await s.json();else throw new Error(`${t} FAIL fetch code:${s.status}`)}catch(s){console.warn(`${t} FAIL, use test data`,s),Object.assign(i,e)}else console.warn(`${t} !preflight, use test data`),Object.assign(i,e);console.groupCollapsed(`comm fill ${t}`),console.log(i),console.groupEnd(),Object.assign(n,i)}const ge=Math.floor(new Date().getTime()/1e3);a.actionID.indexOf("info"),a.infoID.indexOf("info_hardware"),a.infoID.indexOf("info_mfg"),a.infoID.indexOf("info_reg");const ji={a:a.actionID.indexOf("info"),t:[{i:a.infoID.indexOf("info_rc"),v:4},{i:a.infoID.indexOf("info_install"),v:a.hwMask.display+a.hwMask.piezo+a.hwMask.xpio+a.hwMask.gps+0,z:a.hwMask.display+a.hwMask.piezo+a.hwMask.xpio+a.hwMask.gps+0},{i:a.infoID.indexOf("info_user"),v:1},{i:a.infoID.indexOf("info_firmware"),v:"8.8.88"},{i:a.infoID.indexOf("info_uptime"),v:ge-3600*24*99},{i:a.infoID.indexOf("info_net"),v:"expresso",p:"8C:CE:4E:D5:36:9D",q:"192.168.2.100"},{i:a.infoID.indexOf("info_rssi"),v:"-78"},{i:a.infoID.indexOf("info_status"),v:a.serviceID.indexOf("GPS"),g:1,n:1},{i:a.infoID.indexOf("info_tap"),v:4,m:884,c:4},{i:a.infoID.indexOf("info_gps"),t:ge,d:1200,v:13,max:12,min:12,rec:22},{i:a.infoID.indexOf("info_ntp"),v:0,s:ge,f:28,p:64,e:0,r:60*30},{i:a.infoID.indexOf("info_display"),v:[0,0,0,0,0]}]},Vi={a:a.actionID.indexOf("sync"),t:[{i:a.getPrefID("net_alert"),v:1},{i:a.getPrefID("ui_bright"),v:0,x:5},{i:a.getPrefID("ui_sound"),v:1},{i:a.getPrefID("tap_mode"),v:0},{i:a.getPrefID("tap_tilt"),v:1},{i:a.getPrefID("tap_alert"),v:0},{i:a.getPrefID("tap"),v:7,t:1023},{i:a.getPrefID("gps_alert"),v:0},{i:a.getPrefID("gps_log_int"),v:1200},{i:a.getPrefID("clock_static"),v:1},{i:a.getPrefID("clock_disp"),v:a.clockID.indexOf("CLOCK_HHMM")},{i:a.getPrefID("clock_24h"),v:0},{i:a.getPrefID("clock_tz"),v:-6},{i:a.getPrefID("clock_dst"),v:1},{i:a.getPrefID("clock_pps"),v:0},{i:a.getPrefID("daily"),v:1,h:9,m:32},{i:a.getPrefID("daily_vol"),v:1},{i:a.getPrefID("daily_ind"),v:1},{i:a.getPrefID("daily_snooze"),v:1},{i:a.getPrefID("ux_index"),v:a.uxID.indexOf("clock_static")}]};a.infoID.indexOf("info_gps_log"),ge-200;const Gi={a:a.actionID.indexOf("info"),t:[{i:a.infoID.indexOf("info_display"),v:[127,127,127,127,2]}]},qi={a:a.actionID.indexOf("info"),t:[{i:a.infoID.indexOf("info_display"),v:[120,121,109,120,0]}]},Xi={a:a.actionID.indexOf("call"),t:[{i:a.callID.indexOf("call_prime"),v:0}]};function Ui(){const n=m.prop.local?500:75;setTimeout(async()=>{if(v.ready())return;m.open(),console.log("%ccomm test",u.style.test,"info + sync");const t=new CustomEvent("meh");t.data=JSON.stringify(ji),v.parse(t),t.data=JSON.stringify(Vi),v.parse(t),await O.delay(75),t.data=JSON.stringify(Xi),v.parse(t)},n),setTimeout(()=>{if(v.ready())return;console.log("%ccomm test",u.style.test,"display");const t=new CustomEvent("meh");t.data=JSON.stringify(Gi),v.parse(t)},n*2),setTimeout(()=>{if(v.ready())return;const t=new CustomEvent("meh");t.data=JSON.stringify(qi),v.parse(t)},n*3)}var Zi={init:Ui};let ie;function Ji(){document.body.insertAdjacentHTML("beforeend",'<svg height="0" width="0" style="visibility: hidden"></svg>'),ie=document.body.lastChild}function Wi(n,t){ie.insertAdjacentHTML("beforeend",'<symbol id="" viewBox="0 0 100 100"></symbol>'),ie.lastChild.id="sym_"+n,ie.lastChild.innerHTML=t}function Yi(n){ie.insertAdjacentHTML("beforeend",n)}Ji();var f={add:Wi,def:Yi};function Ki(){f.add("warn_ui",`<g stroke-width="12" stroke-linecap="round" stroke-linejoin="round" >  
      <polygon stroke="var(--icon-fg)" fill="var(--icon-fg)" points="50 12.69 7.5 86.31 92.5 86.31 50 12.69" />
      <g>
        <polyline stroke="var(--icon-bg)" fill="none" points="50 55 50 32" />
        <circle fill="var(--icon-bg)" stroke="none" cx="50" cy="78" r="7" />
      </g>    
    </g>`),f.add("warn_text",`<g stroke="var(--icon-fg)" fill="none">
      <path stroke-width="6px" stroke-linejoin="round" d="M66,91.39H90.59A6.2,6.2,0,0,0,96,82.08L55.37,11.78a6.2,6.2,0,0,0-10.74,0L4,82.08a6.2,6.2,0,0,0,5.37,9.31H34" />    
      <polyline stroke-width="14px" points="50 73 50 55.5 50 38" />
      <polyline stroke-width="14px" points="50 94.5 50 80.5" />
    </g>`),f.add("hit",`<defs>
      <radialGradient id="grad">
        <stop offset="0%" stop-color="rgb(0,0,0,1)" />
        <stop offset="33%" stop-color="rgb(0,0,0,0.3)" />
        <stop offset="90%" stop-color="transparent" />
      </radialGradient>
    </defs>
    <g transform="translate(50 50)">
      <circle fill="url('#grad')" stroke-width="4px" stroke="var(--icon-bg)" cx="0" cy="0" r="48" />
    </g>`),f.add("halo",`<g transform="translate(50 50)">
      <circle fill="none" stroke-width="4px" stroke="var(--icon-fg)" cx="0" cy="0" r="48" />
    </g>`),f.add("show",`<g fill="var(--icon-fg)">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM50,31A19,19,0,1,0,69,50,19,19,0,0,0,50,31Zm0,9A10,10,0,1,0,60,50,10,10,0,0,0,50,40Z" />
    </g>`),f.add("hide",`<g fill="var(--icon-fg)" stroke="none">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM89.82,50C79.39,38.17,63.45,30,50,30S20.62,38.17,10.19,50C20.62,61.83,36.55,70,50,70S79.39,61.83,89.82,50Z" />
      <circle cx="50" cy="50" r="14" />
    </g>
    <g stroke-linecap="butt" transform="translate(50 50) rotate(45)">
      <line stroke="var(--icon-bg)" stroke-width="16" x1="-40" y1="0" x2="40" y2="0" />
      <line stroke="var(--icon-fav)" stroke-width="5" x1="-50" y1="0" x2="50" y2="0" />
    </g>`),f.add("wifi_def",`<g fill="none">
      <circle stroke="var(--icon-fg)" stroke-width="16" cx="0" cy="0" r="8"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="32"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="52"></circle>
   </g>`),f.add("wifi",`<g transform="translate(50, 84) rotate(-135) scale(1.25)">
      <use href="#sym_wifi_def" />
    </g>`),f.add("info",`<g stroke="var(--icon-fg)" fill="none">
      <circle stroke-width="5" cx="50" cy="50" r="47.5"></circle>
      <g stroke-width="16" transform="translate(11) skewX(-12)">
        <line x1="50" y1="82" x2="50" y2="44" />
        <line x1="50" y1="34" x2="50" y2="18" />
      </g>
    </g>`),f.add("help",`<g transform="translate(50 50)" stroke="none">
      <path d="M8.6,33.2H-8.6V23.6H8.6Zm12-60.4H-20.6c-5,0-10.3,3.6-10.3,8.3v8.8h16.5v-10H14.4v18H.7c-5.6,0-9.3,3.5-9.3,9.4v9.1H8.6V7.9c0-2.7,1-3.3,3.7-3.3h8.3C25.2,4.6,30.9.8,30.9-4V-18.9C30.9-23.6,25.6-27.2,20.6-27.2Z" /> 
    </g>`),f.add("help_button",`<g>
      <use href="#sym_halo" />
      <use href="#sym_help" />
    </g>`),f.add("tap",`<g>
      <polygon fill="var(--icon-fg)" stroke="none" points="86.76 0 66.96 0 49.87 17.09 32.84 0 13.08 0 49.85 36.91 86.76 0" />
      <g stroke="var(--icon-fg)">
        <line stroke-width="14px" y1="50" x2="100" y2="50" />
        <g stroke-width="10px" >
          <line class="cls-3" x1="50" y1="100" x2="50" y2="77" />
          <line class="cls-3" x1="14.64" y1="85.36" x2="30.91" y2="69.09" />
          <line class="cls-3" x1="85.36" y1="85.36" x2="69.09" y2="69.09" />
        </g>
      </g>
    </g>`),f.add("twirl",`<g fill="var(--icon-fg)" stroke="none">
    <polygon points="0,88 100,88 50,0"/>
  </g>`),f.add("refresh",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <polyline points="3.536 52.75 19.036 37.25 34.536 52.75" transform="translate(-49.75 -48)" />
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),f.add("refresh_run",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),f.add("undo",`<g transform="scale(-1 1) translate(-100 0)" stroke="var(--icon-fg)" stroke-width="8" fill="none">
      <polyline points="46.21 53.21 30 37 46.21 20.79" />
      <path d="M33,79H60.48a21,21,0,1,0,0-42H30" />
      <line x1="18" y1="18" x2="18" y2="56" />
    </g>`),f.add("dot",`<g transform="translate(50, 50)">
      <circle fill="var(--icon-fg)" cx="0" cy="0" r="50"></circle>
    </g>`),f.add("o",`<g transform="translate(50, 50)">
      <circle stroke="var(--icon-fg)" stroke-width="22" fill="none" cx="0" cy="0" r="39"></circle>
    </g>`),f.add("x",`<g stroke="var(--icon-fg)" stroke-width="22">
        <line x1="12" y1="12" x2="88" y2="88"></line>
        <line x1="12" y1="88" x2="88" y2="12"></line>
    </g>`),f.add("bar_1",`<g transform="translate(0, 0)">
      <line stroke="var(--icon-fg)" stroke-width="22" x1="50" y1="0" x2="50" y2="100"></line>
    </g>`),f.add("bar_2",`<g stroke="var(--icon-fg)" stroke-width="22" transform="translate(0, 0)">
      <line x1="20" y1="0" x2="20" y2="100"></line>
      <line x1="80" y1="0" x2="80" y2="100"></line>
    </g>`),f.add("vol_wave_0",`<g transform="translate(0, 0)">
      <g transform="scale(0.5) translate(100, 50)">
        <use href="#sym_x" />
      </g>
    </g>`),f.add("vol_wave_1",`<g transform="translate(0, 0)">
      <path stroke="var(--icon-fg)" stroke-width="10" fill="none" d="M62.7,31.63a28.5,28.5,0,0,1-.45,36.29"/>
     </g>`),f.add("vol_wave_2",`<g transform="translate(0, 0)">
      <use href="#sym_vol_wave_1" />
      <path stroke="var(--icon-fg)" stroke-width="12" fill="none" d="M80.21,14.44a52.94,52.94,0,0,1-.06,71.07"/>
     </g >`),f.add("lock",`<g>
      <path transform="translate(62 55)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
      </g>`),f.add("unlock",`<g>
      <path transform="translate(25 50)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
    </g>`),f.add("bell",`<g transform="translate(5 10)" stroke-width="10" stroke="var(--icon-fg)" fill="none">
      <g transform="translate(-7 -9.73)">
        <path d="M60.59,74a11,11,0,1,1-21.18,0Z" />
        <path d="M79,73,68.5,33.16C67.31,29,63.94,26,59.7,26H40.63a9.42,9.42,0,0,0-8.8,7.12L21.33,73" />
      </g>
      <line x1="43" y1="19.31" x2="43" />
      <line y1="63.27" x2="86" y2="63.27" />
    </g>`),f.add("tna_hex",`<g stroke="var(--icon-fg)" fill="none">
        <polygon points="88.97 72.5 50 95 11.03 72.5 11.03 27.5 50 5 88.97 27.5 88.97 72.5" />
    </g>`),f.add("tna_n",`<g stroke="var(--icon-fg)" fill="none">
        <polyline stroke-linecap="round" stroke-linejoin="round" points="28.71 61.84 28.71 38.16 71.29 61.84 71.29 38.16" />
    </g>`),f.add("tna",`<g>
      <use href="#sym_tna_hex" />
      <use href="#sym_tna_n" />
    </g>`),f.add("warn_tna",`<g fill="var(--icon-fg)" stroke="none" transform="translate(50, 50)">
      <path d="M-17-25.7l-8.2-14.2,4.7-2.7h41l4.7,2.7L17-25.7l16.5,9.5,8.2-14.2L50-25.6l-24.8,43H9.5v-30h-19v30H-25.2L-50-25.6l8.3-4.8,8.2,14.2Zm22.5,52h-11l-9.4,16.3H14.9Z"/>
    </g>`)}Ki();function Qi(){f.add("touch",`<g stroke="var(--icon-fg)" stroke-width="12" fill="none">
        <polyline points="10 53.85 37 90 90 10" />
    </g>`),f.add("clear",`<g stroke="var(--icon-fg)" stroke-width="12">
        <line x1="12" y1="12" x2="88" y2="88"></line>
        <line x1="12" y1="88" x2="88" y2="12"></line>
    </g>`),f.add("copy",`<g fill="var(--icon-fg)" stroke="none">
      <polygon points="78 30 78 39 91 39 91 91 39 91 39 78 30 78 30 100 100 100 100 30 78 30" />
      <path d="M70,70H0V0H70ZM57,13H13V57H57Z" />
      </g>`),f.add("tools",`<g fill="var(--icon-fg)" stroke="none">
       <path d="M72,50A22,22,0,1,1,50,28,22,22,0,0,1,72,50ZM96.37,31.31a49.74,49.74,0,0,0-7-12.13L73.73,24.27a35,35,0,0,0-13.31-7.68L57,.49a50.5,50.5,0,0,0-14,0l-3.42,16.1a35,35,0,0,0-13.31,7.68L10.63,19.18a49.74,49.74,0,0,0-7,12.13l12.22,11a35.22,35.22,0,0,0,0,15.36l-12.22,11a49.74,49.74,0,0,0,7,12.13l15.64-5.09a35,35,0,0,0,13.31,7.68L43,99.51a50.5,50.5,0,0,0,14,0l3.42-16.1a35,35,0,0,0,13.31-7.68l15.64,5.09a49.74,49.74,0,0,0,7-12.13l-12.22-11a35.22,35.22,0,0,0,0-15.36Z" />
    </g>`)}Qi();async function en(n){if(await O.delay(250),navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(n);{const t=tn(n);return new Promise((e,i)=>{document.execCommand("copy")?e("ok"):i("copy"),nn(t)})}}function tn(n){const t=document.createElement("textarea");return document.body.appendChild(t),t.id="copy_offText",t.value=n||"",t.focus(),t.select(),t}function nn(n){n.remove(),n=void 0}const sn=`<div id="region" class="region">
    <div id="wrap" class="wrap">
      <svg viewBox="0 0 100 100">
        <g id="svg_wrap" class="svg_wrap">
          <g id="svg_rotate" class="svg_rotate">
            <g transform="translate(50 50)">
              <path id="rule" class="rule" />
            </g>
          </g>
          <clipPath
            id="fill_clip"
            class="fill_clip"
            transform="translate(50 50)"
          >
            <path id="fill" class="fill" />
          </clipPath>
          <foreignObject
            id="fill_grad"
            class="fill_grad"
            width="100"
            height="100"
            ><div></div>
          </foreignObject>
          <g transform="translate(50 50)">
            <path id="head" class="head" />
          </g>
        </g>
      </svg>
    </div>
    <div id="label" class="label"></div>
  </div>`;class on extends oe{constructor(e){super(e);o(this,"_grad",!0);o(this,"height");o(this,"gap");o(this,"fillS");o(this,"ruleS");o(this,"fillR");o(this,"ruleR");o(this,"_head");o(this,"headS");o(this,"headCalc");o(this,"cRot");o(this,"cMin",0);o(this,"cMax",360);o(this,"range");o(this,"gapCalc");o(this,"veloMin",250);o(this,"v0");o(this,"t0");this.fuse(),this.link("info"),this.div.insertAdjacentHTML("beforeend",sn),this.div.classList.add("tna_Dial"),this.dRegion=this.getDiv("region"),this.dWrap=this.getDiv("wrap"),this.dWrapR=this.getDiv("svg_wrap"),this.dWrapR=this.getDiv("svg_rotate"),this.dHead=this.getDiv("head"),this.dFill=this.getDiv("fill"),this.dRule=this.getDiv("rule"),this.dLabel=this.getDiv("label"),this.dFillClip=this.getDiv("fill_clip"),this.dFillGrad=this.getDiv("fill_grad"),this.dFillGrad.setAttribute("clip-path",`url(#${this.dFillClip.id})`),this.height=this.getPropVal("--dial-h"),this.cRot=this.getPropVal("--dial-rot"),this.cMin=this.getPropVal("--dial-min"),this.cMax=this.getPropVal("--dial-max"),this.gap=this.getPropVal("--dial-gap"),this.headS=this.getPropVal("--dial-head-x"),this.fillS=this.getPropVal("--dial-x")*100/this.height,this.ruleS=this.getPropVal("--dial-rule-x")*100/this.height,this.bFrame=this.frame.bind(this),this.resize()}resize(){this.range=this.cMax-this.cMin,this.fillR=50-this.fillS,this.ruleR=50-this.ruleS,this.dFill.setAttribute("transform",`rotate(${this.cRot+.75})`),this.dHead.setAttribute("d",`M0,-50 L0,${-this.fillR}`),this.headCalc=this._head?this.headS/(Math.PI*this.height)*360/2:0,this.gapCalc=this.cMin+this.headCalc+this.gap}draw(e){e=e==null?this._val:e;const i=e*this.range;let s=!0,r=!0;if(e==0?(this._head?this.seg(this.dRule,this.ruleR,50,this.gapCalc,this.cMax):this.range==360?this.donut(this.dRule,this.ruleR,50):this.seg(this.dRule,this.ruleR,50,this.cMin,this.cMax),r=!1):e==1?(this.range==360?this.donut(this.dFill,this.fillR,50):this.seg(this.dFill,this.fillR,50,this.cMin,this.cMax),s=!1):i>this.cMax-this.gap?(this.seg(this.dFill,this.fillR,50,this.cMin,this.cMin+i),s=!1):(this.seg(this.dRule,this.ruleR,50,this.cMin+i+this.gapCalc,this.cMax-this.gapCalc*(this.range==360)),this.seg(this.dFill,this.fillR,50,this.cMin,this.cMin+i)),this.dFill.style.visibility=r?"visible":"hidden",this.dRule.style.visibility=s?"visible":"hidden",this._grad){let c=[`conic-gradient( from ${this.cRot}deg,`,"var(--dial-g0) 0deg,",`var(--dial-g1) ${i}deg`,")"];this.dFillGrad.style.backgroundImage=c.join(" ")}this._head&&this.dHead.setAttribute("transform",`rotate(${i+this.cRot})`)}move(e,i=500){if(e!=this._val)return this.vFinal=e,this.v0=this._val,this.moveD=Math.max(this.veloMin,Math.abs(e-this.v0)*i),this.cancelFrame(),this.t0=performance.now(),this.req=window.requestAnimationFrame(this.bFrame),this}frame(e){const i=e-this.t0;if(i>=this.moveD)window.cancelAnimationFrame(this.req),this.set(this.vFinal);else{const s=this.easeInOutSine(i,0,1,this.moveD),r=this.v0+(this.vFinal-this.v0)*s;this.set(r),this.req=window.requestAnimationFrame(this.bFrame)}}cancelFrame(){this.req!=null&&(window.cancelAnimationFrame(this.req),this.req=void 0),this.set()}set(e=this._val){return this._val=e,super.set(e),this}arc(e,i,s,r){const c=this.plot(i,s),d=this.plot(i,r),g=~~(r-s>180),p=`M${c.x},${c.y} A${i},${i} 0 ${g} 1 ${d.x},${d.y}`;e.setAttribute("d",p)}seg(e,i,s,r,c){const d=this.plot(i,r),g=this.plot(i,c),p=this.plot(s,r),A=this.plot(s,c),l=~~(c-r>180),$=`M${d.x},${d.y} A${i},${i} 0 ${l} 1 ${g.x},${g.y} L${A.x},${A.y} A${s},${s} 0 ${l} 0 ${p.x},${p.y}Z`;e.setAttribute("d",$)}circle(e,i){const s=`M${-i},0 A${i},${i} 0 1 0 ${i},0 A${i},${i} 0 1 0 ${-i},0Z`;e.setAttribute("d",s)}donut(e,i,s){const r=`M${-s},0 A${s},${s} 0 1 1 ${s},0 A${s},${s} 0 0 1 ${-s},0Z`,c=`M${-i},0 A${i},${i} 0 1 0 ${i},0 A${i},${i} 0 0 0 ${-i},0Z`;e.setAttribute("d",r+c)}plot(e,i){const s=Math.PI*(i-90)/180;return{x:e*Math.cos(s),y:e*Math.sin(s)}}grad(e=!0){return this._grad=e,this}head(e=!0){return this._head=e,this.dHead.style.visibility=e?"visible":"hidden",this}}let Ve,Fe=!1;const an={a:a.actionID.indexOf("call"),t:[{i:a.callID.indexOf("call_console"),v:u.formatID.indexOf("cache"),u:1660502669,n:1,z:[{f:u.formatID.indexOf("normal"),m:"cubeCore #14036327 2022.8.14 MD5:c8508be06f81dc2f707017ae06f3f01e setup"},{f:u.formatID.indexOf("error"),m:"error"},{f:u.formatID.indexOf("warn"),m:"warn"},{f:u.formatID.indexOf("tear"),m:"tear"},{f:u.formatID.indexOf("bold"),m:"bold"},{f:u.formatID.indexOf("touch"),m:"touch"}]}]},rn={a:a.actionID.indexOf("call"),t:[{i:a.callID.indexOf("call_console"),v:u.formatID.indexOf("cache_end"),u:1660502669,n:5,f:8096/3,c:8096}]},_={};function ln(){new C("info_firmware","object").onChange=(t,e)=>{window.diag_firmware.innerText=O.versionString(t.data.v),window.diag_firmware.innerHTML!=window.diag_client.innerHTML?window.diag_client.classList.add("show"):window.diag_firmware.dataset.prefix="",window.diag_firmware.classList.add("show")},_.toolBar=new He("toolbar"),_.toolEdge=new He("toolbar_edge"),_.cap=new on("cap").grad(!1),_.unread=new q("unread").symbol("dot").def(),_.unread.onExecute=async t=>{v.send("call","call_console",1)},_.tool=new q("tool").symbol("tools").def(),_.tool.value=!1,_.tool.onExecute=async(t,e)=>{e!=null&&(t.value=e),t.toggle();const i=t.value;t.highlight(i),t.property("rotate-angle",(i?"":"-")+`${60*(1+i)}deg`),t.choreo("rotate").timing(1,500).act(),_.toolBar.toggle(i),_.toolEdge.toggle(i)},_.refresh=new q("refresh").symbol("refresh").symbol("refresh_run").def().show(),_.refresh.onExecute=t=>{u.reset(),Fe=!1,window.rc.innerHTML="",m.prop.preflight?v.send("call","call_console"):m.prop.user?gt():ve(),t.highlight(!0).cycle().choreo("spin").timing(1,600).act(),t.onAnimEnd=async e=>e.highlight(!1).def()},_.clear=new q("clear").symbol("clear").def().show(),_.clear.onExecute=t=>{u.reset(),window.rc.innerHTML="",n(t)},_.copy=new q("copy").symbol("copy").def().show(),_.copy.onExecute=t=>{en(window.rc.outerText),n(t)};const n=t=>{t.highlight(!0),t.choreo("blink","hot").timing(3,150).act(),t.onAnimEnd=async e=>{await e.delay(500),e.highlight(!1)}};u.upon.output=b,u.upon.cache=fn,u.upon.fail=ve}function dn(){}const cn=`<div class="rc_item">
    <div class="label"></div>
  </div>`,hn=`<div class="rc_item">
    <div class="fill"></div>
    <div class="label"></div>
  </div>`;function b(n,t){const e="&nbsp;";let i=t!=null?t.replace(/ /g,e):e;n=="fail"&&(i="<br/><br/>"+i),n=="tear"&&(i="<br/>"+i);const s=n=="tear"||n=="fail",r=s?hn:cn,c=window.rc;c.insertAdjacentHTML("beforeend",r);const d=c.lastChild;d.classList.add(n),d.children[s*1].innerHTML+=i,u.formatID.indexOf(n)<0&&console.warn("ui.output no format: %o, msg:",n,t),Fe&&ut()}function ut(){const n=u.prop.last_format;Ve!=n&&(_.unread.view(n!="touch"),n!="touch"&&_.unread.choreo("blink","hot").timing(7,150).act(),Ve=n),u.prop.capacity!=null&&_.cap.show().move(u.prop.full/u.prop.capacity)}function fn(){Fe=!0,ut()}function un(){}function gn(){const n=new Date;_.cap.hide().move(0),_.unread.hide(),b("tear","socket close "+n.toLocaleTimeString("en-US"))}let Ge=!1,De={};function gt(){if(!Ge){Ge=!0,Object.assign(De,an);const t=De.t[0].z;for(let e=1;e<=12;e++){const i={f:u.formatID.indexOf("normal"),m:`test ${e}`};t.push(i)}}const n=new CustomEvent("meh");n.data=JSON.stringify(De),v.parse(n),n.data=JSON.stringify(rn),v.parse(n)}function ve(){b("fail","Access Not Authorized"),b("normal"),b("normal","--> 3-FACTOR AUTHENTICATION REQUIRED <--"),b("normal"),b("warn","Continued attempts to view this console"),b("warn","may warrant action resulting in the"),b("warn","swift removal of your personnel from the"),b("warn","current timeline. Refer to TVA Operators"),b("warn","Manual Section 51 for filing a GR-70C"),b("warn","grievance report."),b("normal"),b("normal","> EOL")}function pn(){for(const[n,t]of Object.entries(_))t.prime();_.tool.view(m.prop.user),m.prop.preflight?m.prop.user?v.send("call","call_console"):ve():m.prop.user?gt():ve()}var ye={tna:_,init:ln,fill:dn,prime:pn,open:un,close:gn};async function _n(){document.title=window.location.hostname.split(".")[0]+" \u2022 R/Con",m.init(),u.init(),ye.init(),m.patch(),v.monitor(m.prop.preflight),!m.prop.preflight&&Zi.init()}m.upon.prime=async()=>{await O.delay(100),ye.prime(),m.prime(),window.page.classList.add("show")};m.upon.open=ye.open;m.upon.close=ye.close;window.addEventListener("load",_n);
