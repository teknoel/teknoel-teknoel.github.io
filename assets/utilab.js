var ne=Object.defineProperty;var ae=(n,e,t)=>e in n?ne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var a=(n,e,t)=>(ae(n,typeof e!="symbol"?e+"":e,t),t);const oe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};oe();Element.prototype.createDiv=function(n){const e=document.createElement("div");return e.id=n,this.appendChild(e),e};Element.prototype.createDivFirst=function(n){const e=document.createElement("div");return n!=null&&(e.id=n),this.insertAdjacentElement("afterbegin",e),e};function le(n,e){const t=document.createElement("div"),i=n.id;return n.insertAdjacentElement("afterend",t),t.appendChild(n),i.length!=0&&(t.id=i),t.classList.value=n.classList.value,n.classList.value="",n.removeAttribute("id"),e!=null&&n.classList.add(e),t}var re={nest:le};class x{constructor(e,t){a(this,"_id");a(this,"_tags",[]);a(this,"_valRef");a(this,"_valIO",!1);a(this,"_val");a(this,"_valLast");a(this,"_tron",!1);a(this,"_view",!1);a(this,"_height",0);a(this,"div");a(this,"data");a(this,"onChange");a(this,"onRender");switch(t=e.nodeType!=null?"div":t,t){case"object":case"obj":this.id=e;break;case"div":this.div=e,this.div.tna=this,this.id=e.id;break;case"id":default:this.div=document.getElementById(e),this.div!=null?this.div.tna=this:console.error(`tna construct no element for ${e}`),this.id=this.div==null?e:this.div.id;break}this.bRenderEnd=this.renderEnd.bind(this)}fuse(){return this.div==null?console.warn(`${this.id} fuse no div`):(this.div.classList.add("_tna"),this)}shy(e=!0){return this.div.classList.toggle("shy",e),this}prime(e=!0){if(this.div!=null)return this.div.classList.toggle("prime",e),this}touchPrime(){return this.div.ontouchstart=()=>{},this}show(){return this.render(!0),this}hide(){return this.render(!1),this}view(e=!0,t=!1){return this.render(e,t),this}viewStaged(e){return this.view(e,!0)}render(e=this._view,t=!1){this._view=e,this.div.classList.toggle("show",e),t?this.div.addEventListener("transitionend",this.bRenderEnd):this.callRender()}draw(){}renderEnd(){this.div.removeEventListener("transitionend",this.bRenderEnd),this.div.style.transition="",this.callRender()}callRender(){this.onRender!=null?this.onRender(this):this._view&&(this.onShow!=null?this.onShow(this):this.onHide!=null&&this.onHide(this))}display(e=!0){return console.log(`${this.id} display b:%o`,e),this.div.style.display=e?"":"none",this}getDiv(e,t){const i=this.div.querySelector(`#${e}`);if(i==null){console.warn(`${this.id} getDiv FAIL for "${e}"`);return}const s=t==null?this.div.id:t;return i.id=`${e}_${s}`,i}setProp(e,t){this.div.style.setProperty(e,t)}getProp(e){return getComputedStyle(this.div).getPropertyValue(e)}getPropVal(e){return parseFloat(this.getProp(e))}getDataAttr(e,t,i){const s=this.div.dataset[e],o=`--${e.camelKabob()}`,l=this.getProp(o);let h,g="";switch(t){case"pixel":g="px";case"integer":h=parseInt(s);break;case"percent":g="%";case"number":case"float":h=parseFloat(s);break;case"s":h=parseFloat(s)*1e3;break;case"string":return s==null?l.length>0?l:i:(h=s,h);default:h=parseFloat(s),s.indexOf("%")>0&&(g="%"),s.indexOf("px")>0&&(g="px");break}return isNaN(h)&&(h=parseInt(l),l.indexOf("%")>0&&(g="%"),l.indexOf("px")>0&&(g="px")),isNaN(h)&&h!=null&&(h=i),this.div.style.setProperty(o,h+g),h}parent(e,t){for(;!(e.id.indexOf(t)!=-1||e.parentElement==null);)e=e.parentElement;return e}async delay(e=1){return new Promise(t=>{setTimeout(()=>{t()},e)})}set(e){return this.data=e,e!=this._valLast&&(this.draw(),this.onChange!=null&&this.onChange(this,e),this._valLast=e),this}enable(e=!0){return this._enable=e,this}tag(...e){for(const t of e)this._tags.push(t);return this}hasTag(...e){let t=!1;for(const i of e)t=t||this._tags.find(s=>s==i);return t}latchClass(e){return this.div.querySelectorAll("._"+e).forEach(i=>i.classList.add(e)),this}set id(e){this._id=e}get id(){return this._id}valRef(e){return this._valRef=e,this}valIO(){return this._valIO=!0,this}set value(e){if(this._valIO&&this._valRef!=null&&this._valRef[0].val!=null){let t=this._valRef.findIndex(i=>i.val==e);t==-1&&(t=0,console.warn(`${this.id} set value(${e}) FAIL not in valRef, using _val:0`)),e=t}this._val=e}get value(){let e=this._val;return this._valIO&&this._valRef!=null&&this._valRef[0].val!=null&&(e=this._valRef[e].val),e}set height(e){this._height=e}get height(){return this._height}tron(e=!0){return this._tron=e,this}clamp(e,t,i){return Math.min(Math.max(e,t),i)}easeLinear(e,t,i,s){return i*e/s+t}easeInQuad(e,t,i,s){return i*(e/=s)*e+t}easeOutQuad(e,t,i,s){return-i*(e/=s)*(e-2)+t}easeInOutQuad(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}easeInSine(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t}easeOutSine(e,t,i,s){return i*Math.sin(e/s*(Math.PI/2))+t}easeInOutSine(e,t,i,s){return-i/2*(Math.cos(Math.PI*e/s)-1)+t}easeInCubic(e,t,i,s){return i*(e/=s)*e*e+t}easeOutCubic(e,t,i,s){return i*((e=e/s-1)*e*e+1)+t}easeInOutCubic(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}easeOutElastic(e,t,i,s){let o,l=0,h=i;return e==0?t:(e/=s)==1?t+i:(l||(l=s*.3),h<Math.abs(i)?o=l/4:o=l/(2*Math.PI)*Math.asin(i/h),h*Math.pow(2,-10*e)*Math.sin((e*s-o)*(2*Math.PI)/l)+i+t)}}class y extends x{constructor(t){super(t);a(this,"_enable",!1);a(this,"_dynamic",!1);a(this,"_val",!1);a(this,"onChange");this.div.classList.add("tna_Accord"),this.div.dataset.dynamic!=null&&this.dynamic(),this.div.dataset.open!=null&&this.open(),this.div.dataset.prime!=null&&this.prime(),this._spill=this.div.dataset.spill!=null,this.bSpill=this.spill.bind(this)}prime(){return this.div.classList.add("prime"),this}resize(){const t=this.div.classList.contains("prime");this.div.classList.remove("prime"),this.div.classList.add("open"),this.div.style.setProperty("--accord-h","");const i=this.div.offsetHeight;this.div.style.setProperty("--accord-h",i+"px"),this.div.classList.toggle("open",this._val),this.div.classList.toggle("prime",t)}toggle(t){return this._val=t==null?!this._val:t,this._val?this.open():this.close(),this}open(){return this._val=!0,this.div.classList.add("open"),this._spill&&this.div.addEventListener("transitionend",this.bSpill),this.onChange!=null&&this.onChange(this),this}close(){return this._val=!1,this.div.classList.remove("open","spill"),this.onChange!=null&&this.onChange(this),this}spill(){return console.log(`${this.id} spill`),this.div.classList.add("spill"),this.div.removeEventListener("transitionend",this.bSpill),this}dynamic(t=!0){return t&&!this._dynamic?window.addEventListener("resize",this.resize.bind(this)):window.removeEventListener("resize",this.resize.bind(this)),this.resize(),this._dynamic=t,this}}const de=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="label" class="label"></div>
  </div>`;class he extends x{constructor(t){super(t);a(this,"_label");this._label=this.div.innerHTML,this.div.innerText="",this.div.insertAdjacentHTML("beforeend",de),this.div.classList.add("tna_RetroT"),this.dRegion=this.getDiv("region"),this.dLabel=this.getDiv("label"),this.dBg=this.getDiv("bg"),this.dLabel.innerText=this._label}}const Vt={};function ce(){fe(),ge(),Ii()}async function ue(){for(const[n,e]of Object.entries(Vt))e.prime()}function fe(){document.querySelectorAll("._tna_Accord").forEach((e,t)=>{e.id.length==0&&(e.id=`accord_${t}`);const i=e.id.length!=0?e.id:t;Vt[i]=new y(e.id)})}function ge(){document.querySelectorAll("._hr").forEach((e,t)=>{e.id.length==0&&(e.id=`hr_${t}`);const i=e.id.length!=0?e.id:t;Vt[i]=new x(e.id).fuse(),e.classList.add("hr_wrap");const s=document.createElement("hr");e.insertAdjacentElement("afterbegin",s)})}function Ii(){let n;n=document.querySelectorAll(".tna_RetroT"),n.forEach((e,t)=>{e.id.length==0&&(e.id=`retro_text_${t}`),new he(e.id)})}var ve={init:ce,prime:ue,items:Vt,retro:Ii};const Pi=["ping","call","ux","info","push","save","sync"],Si=["call_prime","call_console","call_tune","call_warn","call_restart","call_admin","call_photo","call_gps_log"],_e=["none","default","notify","toggle_on","toggle_off","alarm","close_encounter","charge_fanfare","bonanza","guantanamera","rhythm_dancer"],pe=["OK",'"index.html" served from FS'],Ci=["null","sys_splash","sys_boot","sys_ap","sys_ota","sys_restart","sys_fail","reset_user","reset_admin","net_setup","net_menu","net_fail","set_bright","set_sound","tap_menu","tap_test","tap_notify","clock_static","clock_hide","clock_switch","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","alarm_menu","alarm_set","alarm_notify","alarm_snooze","diag_info","diag_serial","diag_console","diag_net","diag_net_mac","diag_gps","diag_led","photo"],Mi=["idle","init","begin","splash","prime","ready","run","update","wait","confirm","notify","commit","end","exit","cancel","expire","fail"],Fi=["info_rc","info_user","info_mfg","info_reg","info_hardware","info_firmware","info_install","info_uptime","info_net","info_rssi","info_display","info_status","info_tap","info_ntp","info_gps","info_gps_log"],Oi=["admin_sign","admin_fpo","ota_version","ota_version_fs","ota_time","ota_time_fs","ota_fpo","mfg_product","mfg_version","mfg_date","mfg_serial","mfg_logic","mfg_display","mfg_color","mfg_note","mfg_fpo","reg_date","reg_name_1","reg_name_2","reg_user","reg_gift","reg_gp_1","reg_gp_2","reg_fpo","sys_output","sys_console","sys_fpo","def_name","def_device","def_ssid","def_pass","def_alert","def_net_fpo","def_bright","def_sound","def_av_fpo","def_tap_act","def_tap","def_tilt","def_tap_fpo","def_ntp_serve","def_ntp_int","def_ntp_fpo","def_nts_fpo","def_gps_alert","def_gps_log_i","def_gps_log_x","def_gps_fpo","def_tz","def_dst","def_24h","def_pps","def_clock_fpo","def_alarm_ind"],me=100,Ai=["ux_boot","ux_index","ux_fpo","user_consent","user_fpo","net_name","net_device","net_ssid","net_pass","net_alert","net_fpo","ui_bright","ui_sound","ui_fpo","tap","tap_mode","tap_tilt","tap_alert","tap_fpo","ntp_server","ntp_interval","ntp_fpo","nts_fpo","gps_alert","gps_log_int","gps_log_ratio","gps_fpo","clock_static","clock_disp","clock_service","clock_tz","clock_dst","clock_24h","clock_pps","clock_fpo","alarm_tap","alarm_fpo","daily","daily_ind","daily_tone","daily_vol","daily_d","daily_h","daily_m","daily_snooze"],be={display:0,piezo:1,xpio:2,gps:3},we={display:1,piezo:2,xpio:4,gps:8},ye=["CLOCK_HHMM","CLOCK_DATE","CLOCK_MMSS"],xe=["NTP","GPS","pps","none"],ke={action:Pi,call:Si,ux:Ci,info:Fi,admin:Oi,pref:Ai,stage:Mi};var L={master:ke,hwOffset:be,hwMask:we,actionID:Pi,callID:Si,tuneID:_e,warnID:pe,uxID:Ci,stageID:Mi,infoID:Fi,prefBase:me,prefID:Ai,adminID:Oi,clockID:ye,serviceID:xe};const mt={},bt={};let Z=!1;var r={...L,getPrefID:Te,controls:mt,linkControl:Le,getControlByID:De,getControlByIndex:Ee,dialogs:bt,linkDialog:Ie,printDialogs:Se,getDialogByIndex:Pe,tron:$e};function Le(n){const e=L.master[n.linkType];if(e==null){Z&&console.log(`linkControl FAIL id:${n.id}, bad type:${n.linkType}`);return}const t=e.indexOf(n.id),i=n.linkType=="pref"?L.prefBase:0;return t<0?(Z&&console.log(`linkControl FAIL not found id:${n.id}`),!1):(n.linkID=t+i,mt[n.id]={obj:n},!0)}function De(n){if(mt.hasOwnProperty(n))return mt[n].obj;Z&&console.log(`map.getControlByID FAIL no table entry for ${n}`)}function Ee(n,e){let t=0;switch(n){case"action":t=L.actionID[e];break;case"call":t=L.callID[e];break;case"ux":t=L.uxID[e];break;case"info":t=L.infoID[e];break;case"pref":t=L.prefID[e-L.prefBase];break;case"admin":t=L.adminID[e];break}if(t==0){Z&&console.log(`map.getControlByIndex FAIL not registered ${typeID}: ${e}`);return}if(mt.hasOwnProperty(t))return mt[t].obj;Z&&console.log(`map.getControlByIndex FAIL no object ${typeID}:${e}`)}function Te(n){let e=L.prefID.indexOf(n);if(e!=-1)return e+L.prefBase;console.warn(`getPrefID FAIL ${n} not found`)}function $e(n=!0){Z=n}function Ie(n){const e=L.uxID.indexOf(n.id);switch(e){case-1:return Z&&console.log(`map.linkDialog FAIL id:${n.id}`),!1;default:n.linkID=e,bt[n.id]={obj:n};break}return!0}function Pe(n){const e=L.uxID[n];if(e==null){Z&&console.log(`map.getDialogByIndex FAIL ux not registered for ${n}`);return}if(bt.hasOwnProperty(e))return bt[e].obj;Z&&console.log(`map.getDialogByIndex FAIL no object for :${e}`)}function Se(){console.warn("printDialogs");for(const n in bt)console.log(`  ${bt[n].obj.id}`)}var Kt={};(function(n){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(h){return s(l(h),arguments)}function i(h,g){return t.apply(null,[h].concat(g||[]))}function s(h,g){var c=1,E=h.length,d,T="",$,k,u,St,jt,qt,Xt,vt;for($=0;$<E;$++)if(typeof h[$]=="string")T+=h[$];else if(typeof h[$]=="object"){if(u=h[$],u.keys)for(d=g[c],k=0;k<u.keys.length;k++){if(d==null)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',u.keys[k],u.keys[k-1]));d=d[u.keys[k]]}else u.param_no?d=g[u.param_no]:d=g[c++];if(e.not_type.test(u.type)&&e.not_primitive.test(u.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(u.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(t("[sprintf] expecting number but found %T",d));switch(e.number.test(u.type)&&(Xt=d>=0),u.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,u.width?parseInt(u.width):0);break;case"e":d=u.precision?parseFloat(d).toExponential(u.precision):parseFloat(d).toExponential();break;case"f":d=u.precision?parseFloat(d).toFixed(u.precision):parseFloat(d);break;case"g":d=u.precision?String(Number(d.toPrecision(u.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=u.precision?d.substring(0,u.precision):d;break;case"t":d=String(!!d),d=u.precision?d.substring(0,u.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=u.precision?d.substring(0,u.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=u.precision?d.substring(0,u.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}e.json.test(u.type)?T+=d:(e.number.test(u.type)&&(!Xt||u.sign)?(vt=Xt?"+":"-",d=d.toString().replace(e.sign,"")):vt="",jt=u.pad_char?u.pad_char==="0"?"0":u.pad_char.charAt(1):" ",qt=u.width-(vt+d).length,St=u.width&&qt>0?jt.repeat(qt):"",T+=u.align?vt+d+St:jt==="0"?vt+St+d:St+vt+d)}return T}var o=Object.create(null);function l(h){if(o[h])return o[h];for(var g=h,c,E=[],d=0;g;){if((c=e.text.exec(g))!==null)E.push(c[0]);else if((c=e.modulo.exec(g))!==null)E.push("%");else if((c=e.placeholder.exec(g))!==null){if(c[2]){d|=1;var T=[],$=c[2],k=[];if((k=e.key.exec($))!==null)for(T.push(k[1]);($=$.substring(k[0].length))!=="";)if((k=e.key_access.exec($))!==null)T.push(k[1]);else if((k=e.index_access.exec($))!==null)T.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=T}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");E.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");g=g.substring(c[0].length)}return o[h]=E}n.sprintf=t,n.vsprintf=i,typeof window!="undefined"&&(window.sprintf=t,window.vsprintf=i)})()})(Kt);function Ce(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}String.prototype.camelKabob=function(){let n="";return this.split("").map(e=>{n+=e.toUpperCase()==e?`-${e.toLowerCase()}`:e}),n};String.prototype.kabobCamel=function(){return this.replace(/-./g,n=>n[1].toUpperCase())};function Me(n,e,t){if(e.value==null){console.warn(`initStorage FAIL name:${n} target:${e}`);return}const i=localStorage.getItem(n);if(i!=null)return e.value=parseFloat(i),console.log(`initStorage ${n}:${e.value} data:${parseFloat(i)}`),e.value;if(t==null)localStorage.setItem(n,Number(e.value)),console.warn(`initStorage none:${n}, target:${e.value}`),e.onDefault!=null&&e.onDefault();else return localStorage.setItem(n,Number(t)),console.warn(`initStorage none:${n}, default:${t}`),e.value=t,t}function Fe(n){const e=n.split(".");let t="";for(let i in e)t+=i!=1?e[i]:Number("0x"+e[1]),i<e.length-1&&(t+=".");return t}var J={delay:Ce,initStorage:Me,versionString:Fe};class N extends x{constructor(t,i){super(t,i);a(this,"_enable",!1);a(this,"autoEnable",!0);a(this,"primed",!1);a(this,"synced");a(this,"linked");a(this,"linkType");a(this,"linkID");a(this,"valPush");a(this,"valSave");a(this,"lastTime");this._val=0}link(t){t!=null&&(this.linkType=t,this.linked=r.linkControl(this))}sync(t){const i=t.v;this.value=i,this.valPush=this.valSave=i,this.set(t),this.synced||(this.autoEnable&&this._enable!=null&&this.enable(),this.synced=!0)}push(){if(this.linked==!1)return;const t=this.value;t!=this.valPush&&(this.valPush=t,this.send("push",t))}save(){if(this.linked==!1)return;const t=this.value;t!=this.valSave&&(this.valSave=this.valPush=t,this.send("save",t))}send(t,i){const s={a:r.actionID.indexOf(t),t:[]};s.t.push({i:this.linkID,v:i|0}),this.linked!=null&&_.transmit(s,`${this.id} >>`)}}const Oe=`<div id="region" class="region">
    <div id="wrap" class="wrap"></div>
    <div id="label"></div>
  </div>`;class C extends N{constructor(t,i){super(t);a(this,"_enable",!0);a(this,"_highlight",!1);a(this,"_static",!1);a(this,"_target");a(this,"_index");a(this,"_x0",0);a(this,"_y0",0);a(this,"_x1",100);a(this,"_y1",100);a(this,"_x",0);a(this,"_y",0);a(this,"_scaleX",1);a(this,"_scaleY",1);a(this,"list",[]);a(this,"onExecute");this.link(i),this.target(this.div),this.div.insertAdjacentHTML("beforeend",Oe),this.div.classList.add("tna_Icon"),this.dRegion=this.getDiv("region"),this.dWrap=this.getDiv("wrap"),this.dLabel=this.getDiv("label"),isNaN(this.getPropVal("--icon-w"))&&this.setProp("--icon-w",this.getProp("--icon-h")),this._val=0,this.label=this.getDataAttr("label","string","")}set add(t){const i=`
      <svg class="svg" viewBox="${this._x0} ${this._y0} ${this._x1} ${this._y1}">
        <g><circle cx="0" cy="0" r="50" /></g>
      </svg>`;this.dWrap.insertAdjacentHTML("beforeend",i);const s=this.dWrap.lastChild,o=s.lastElementChild;o.innerHTML=t,this.list.push(s),this.update()}set addCenter(t){this.add=t,this.list.slice(-1)[0].lastElementChild.firstElementChild.setAttribute("transform","translate(-50 -50)")}symbol(t){return window["sym_"+t]==null?console.warn(`${this.id} addSymbol FAIL: ${t}`):this.add=`<use href="#sym_${t}"/>`,this}enable(t=!0){return t==this._enable?this:(this._enable=t,this.render(),this)}render(t=this._view,i){super.render(t,i),this.div.classList.toggle("interact",t&&this._enable&&!this._static),this.div.classList.toggle("disable",!this._enable&&this._view)}set index(t){if(t=Number(t),isNaN(t))return console.warn(`${this.id} set index NaN`);if(t==this._index)return;this._index!=null&&this.list[this._index].classList.remove("show"),this.list[t].classList.add("show"),this._index=t}get index(){return this._index}def(){return this.index=0,this}toggle(t){return this._val=t==null?!this._val:t,this.draw(t),this}cycle(){let t=this._index+1;return t=t>=this.list.length?0:t,this.index=t,this.draw(),this}clear(){this.list.forEach(t=>t.remove()),this.list=[]}update(){const t=`translate(${this._x} ${this._y}) scale(${this._scaleX} ${this._scaleY})`;for(let i in this.list)this.list[i].firstElementChild.setAttribute("transform",t)}execute(){this.onExecute!=null&&this.onExecute(this),this.onChange!=null&&this.onChange(this)}set(t){typeof t!="object"&&(this.value=t),t!=this.lastVal&&(this.index=this.value),super.set(t)}svgRef(t){return t>this.list.length-1?console.warn(`${this.id} svgRef FAIL, bad index`):this.list[t]}gRef(t){return t>this.list.length-1?console.warn(`${this.id} gRef FAIL, bad index`):this.list[t].firstElementChild}viewBox(t,i,s,o){return this._x0=t,this._y0=i,this._x1=s,this._y1=o,this}translate(t,i){return this._x=t,this._y=i,this.update(),this}center(){return this.translate(50,50),this}scaleXY(t,i){return this._scaleX=t,this._scaleY=i,this.update(),this}scale(t){return this._scaleX=this._scaleY=t,this.update(),this}scaleCenter(t){return this._scaleX=this._scaleY=t,this._x=50,this._y=50,this.update(),this}sizeXY(t,i){return this.div.style.setProperty("--icon-h",i+"px"),this.div.style.setProperty("--icon-w",t+"px"),this}size(t){return this.div.style.setProperty("--icon-x",t),this}highlight(t){if(t==-1&&(t=!this._enable),!!this._enable)return this._highlight=t,this.div.classList.toggle("highlight",t),this}static(t=!0){return this._static=t,this.div.classList.toggle("interact",!t),this}set label(t){const i=t.length>0;this.dLabel.innerText=i?t:"",this.dLabel.classList.toggle("label",i)}target(t){return this._target=typeof t=="string"?window[t]:t,this._target.onclick=this.execute.bind(this),t!=this.div&&(this.div.style.pointerEvents="none"),this}enabled(){return this._enable}}class zt extends C{constructor(t,i){super(t);a(this,"_class");a(this,"_anim");a(this,"_count",0);a(this,"_duration",0);a(this,"_delay",0);a(this,"onAnimEnd");this.link(i)}async act(t=!0){const i=this._class!=null?"act_"+this._class:"act";if(this.div.classList.contains(i)&&(this.div.classList.remove(i),await this.delay()),this.div.classList.toggle(i,t),t){const s="tna_Icon_"+(this._anim!=null?"act_"+this._anim:"act");this.div.onanimationend=o=>{`${this.id}`,o.animationName==s&&this.div.classList.remove(i),this.div.onanimationend=void 0,this.onAnimEnd!=null&&this.onAnimEnd(this)}}else this.div.onanimationend=void 0;return this}choreo(t,i){return this._anim=t,this._class=t+(i==null?"":"_"+i),this}timing(t,i=this._dur,s=0){this._count=t=Number(t),this._dur=i=Number(i),this._delay=s=Number(s);const o="--icon-act_"+this._anim;return this.setProp(o+"-n",t==0?"infinite":t),this.setProp(o+"-t",i+"ms"),this.setProp(o+"-d",s+"ms"),this}property(t,i){this.dWrap.style.setProperty("--icon-act-"+t,i)}}const Ae=`<g fill="var(--icon-fg)" transform="translate(-50, -50)">
      <use href="#sym_hit" />
    </g>
    <g fill="var(--icon-fg)" transform="translate(-50, -50)">
      <use href="#sym_help" />
    </g>`,Re=`<circle fill="white" stroke="none" cx="0" cy="0" r="50" />
    <g fill="black" transform="translate(-50, -50)">
      <use href="#sym_help" />
    </g> `;var _i={help_1:Ae,help_2:Re};const Ri={},dt={enable:!1},xt={};let O;function Ne(){We();let n;n=document.querySelectorAll("._help"),n.forEach(e=>re.nest(e,"wrap")),n=document.querySelectorAll("._help"),n.forEach((e,t)=>{e.id.length==0&&(e.id=`help_${t}`);const i=e.id.length!=0?e.id:t;e.setAttribute("data-dynamic",""),xt[i]=new y(e.id)}),window.help!=null&&(Ri.button=O=new C("help").show(),O.add=_i.help_1,O.add=_i.help_2,O.translate(50,50).def(),O.onExecute=e=>{e.value^=!0},O.onChange=async e=>{e.index=e.value,e.value||(b.prop.prime_local=!1),localStorage.setItem("help",Number(e.value)),Ni()},J.initStorage("help",O,!0)),dt.flag=!1}function He(){O.onChange(O)}async function Be(){for(const[n,e]of Object.entries(xt))e.prime()}function Ve(){return!!O.value}function Ni(n){dt.enable=!!O.value;for(const[e,t]of Object.entries(xt))t.toggle(dt.enable);dt.onUpdate!=null&&dt.onUpdate(dt.enable)}function ze(n){xt[n.id]=n}function We(){let n;n=document.querySelectorAll("._help"),n.forEach((e,t)=>{e.id.length==0&&(e.id=`help_${t}`);const i=e.id.length!=0?e.id:t;xt[i]=new y(e.id)})}var R={tna:Ri,prop:dt,item:xt,init:Ne,prime:Be,stage:He,state:Ve,update:Ni,add:ze};const wt=[];let yt;function je(n,e){const t=window[n];if(t==null)return console.log(`panel.add() FAIL, cannot find ${n}`);t.dataset.index=wt.length,wt.push({id:n,title:e,panel:t})}function qe(){if(yt!=null)return wt[yt].panel}function Xe(){return yt}function Ue(){return yt!=null?wt[yt].id:void 0}function Hi(n,e=!1){n<0||(yt=n,wt.forEach((t,i)=>{const s=t.panel,o=n==i;e||(s.classList.toggle("show",o),s.children[0].classList.toggle("show",o)),o&&s._tna_begin!=null&&s._tna_begin()}))}function Ge(n,e=!1){const t=wt.findIndex(i=>i.id==n);return t!=null&&Hi(t,e),t}function Ye(n){return new URLSearchParams(n).get("panel")}var Ft={add:je,current:qe,currentID:Ue,currentIndex:Xe,index:Hi,setByID:Ge,inject:Ye};class Qt extends x{constructor(t,i){super(t,"div");a(this,"_static",!1);a(this,"_index");a(this,"_label");a(this,"_html");a(this,"_target");a(this,"control");a(this,"bClick");if(i!=null){this.control=i,this.div.classList.add("menu_item"),this.dLabel=this.getDiv("label"),this.bClick=this.click.bind(this);let s=this.div.querySelector("._click");s==null&&(s=this.div),s._tna_target=this.div,this._target=s}else this.div.classList.add("menu_static"),this._target=this.div,this.static();this.enable()}click(t){let i=t.target._tna_target;i==null&&(i=this.parent(t.target,"_item")),this.execute(i),t.preventDefault(),t.stopImmediatePropagation()}async execute(t){this.control.click(this),this.div.classList.remove("hover"),this.div.classList.add("action"),await this.delay(360),this.control.view(!1),await this.delay(300),this.div.classList.remove("action"),this.control.execute(this)}enable(t=!0){return this.enabled=t,this.control!=null&&this.div.classList.toggle("hover",t&&this.control._hover),this.div.classList.toggle("enable",t),this._target.onclick=t&&!this._static?this.bClick:null,this._target.style.pointerEvents=t&&!this._static?"":"none",this}highlight(t=!0){return this.div.classList.toggle("highlight",t),this.enable(!t),this}set label(t){this.dLabel.innerText=this._label=t}get label(){return this._label}set html(t){this.dLabel.innerHTML=this._html=t}static(t=!0){return this._static=t,this._target.onclick=this.enabled&&!this._static?this.bClick:null,this._target.style.pointerEvents=t?"none":"",this}}const Ze=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="panel" class="panel"></div>
  </div>`,Je=`<div>
    <div id="label" class="label"></div>
  </div>`;class Ke extends x{constructor(t,i=Ze){super(t);a(this,"_enable",!1);a(this,"_index");a(this,"_highlight",!1);a(this,"_hover",!0);a(this,"_static_high",!0);a(this,"_wipe",!1);a(this,"_tm_open");a(this,"_tm_close");a(this,"_block_tm_open");a(this,"_block_tm_close");a(this,"_block_opacity");a(this,"_itemT");a(this,"_staticT");a(this,"_itemN",0);a(this,"_staticN",0);a(this,"pool",[]);a(this,"list",[]);a(this,"last");a(this,"onBegin");a(this,"onEndPrime");a(this,"onEnd");a(this,"onPrime");a(this,"onExecute");a(this,"onResize");this._itemT=Je,this.div.insertAdjacentHTML("afterbegin",i),this.div.classList.add("tna_Menu"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dPanel=this.getDiv("panel"),this.getDiv("banner"),this.blocked=this.div.dataset.block!=null,this.blocked&&(this.dBlock=document.createElement("div"),this.dBlock.id="block",this.div.insertAdjacentElement("afterbegin",this.dBlock),this.getDiv("block"),this.dBlock.classList.add("block"),this.dBlock.onmousedown=this.dBlock.ontouchstart=this.escape.bind(this)),this._highlight=this.div.dataset.highlight!=null,this.enable(this.div.dataset.enable!=null),this._block_opacity=this.getProp("--menu-block-a"),this.itemH=this.getDataAttr("menuIH","pixel",""),this.staticH=this.getDataAttr("menuStaticH","pixel",""),this.merge()}merge(){let t,i;const s=this.div.childElementCount-this.blocked;for(let o=1;o<s;o++)i=this.div.children[1+this.blocked],i.classList.contains("menu_item")?(t=this.add(),t.link=i.dataset.link,t.label=i.innerHTML,i.dataset.highlight!=null&&(this._index=t._index)):i.classList.contains("menu_static")&&(t=this.add("static")),t.view(!0),i.remove();this._index!=null&&this.index(this._index),s>1&&this.update()}add(t="item"){let i,s;switch(t){case"static":if(this._staticT!=null){const o=document.createElement("template");o.innerHTML=this._staticT,s=o.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createStatic(s);break;default:if(this._itemT!=null){const o=document.createElement("template");o.innerHTML=this._itemT,s=o.content.firstElementChild.cloneNode(!0)}else s=document.createElement("div");this.last=this.createItem(s);break}return i=this.dPanel.appendChild(s),this.pool.push(i),this.last}createItem(t){const i=new Qt(t,this),s=`${this.id}_item_${this._itemN}`;return t.id=i.id=s,i._index=this._itemN,i.link=this._itemN,i.height=this.itemH,this.list.push(t),this._itemN++,i}createStatic(t){const i=new Qt(t).static(),s=`${this.id}_static_${this._itemN}`;return t.id=i.id=s,i.height=this.staticH,this._staticN++,i}index(t){this._index=t;for(let i in this.pool)this.pool[i].tna.highlight(!1);return t>=0&&this.list[t].tna.highlight(),this.setStatic(t),super.set(t),this}setStatic(t){if(!this._static_high)return;let i;if(this.pool.find((s,o)=>{const l=s==this.list[t];return l&&(i=o),l}),i!=null){const s=i-1,o=i+1;s>=0&&this.pool[s].tna.highlight(),o<this.pool.length-1&&this.pool[o].tna.highlight()}}update(){let t=0;return this.pool.forEach((i,s)=>{t+=i.tna.height*i.tna._view}),this.height=t,t}clear(){this.list.forEach(t=>{t.tna=void 0,t.remove()}),this.list=[],this.pool=[],this._itemN=this._staticN=0,this.update()}click(t){this.last=t,this._wipe&&this.index(-1),this.setStatic(t._index),this.onPrime!=null&&this.onPrime(t,t.link)}execute(t){this._highlight&&(t.enable(!1),this.index(t._index)),this.onExecute!=null&&this.onExecute(this,t.link)&&this.end()}async escape(t){t!=null&&(t.stopImmediatePropagation(),t.preventDefault()),this.view(!1),this.transBlock(this._block_tm_close),this.onEnd!=null&&this.onEnd(this)}begin(){this.transRegion(this._tm_open,"ease-out"),this.transBlock(this._block_tm_open,"ease"),this.onBegin!=null&&this.onBegin(this,!0)}endPrime(){this.transRegion(this._tm_close,"ease-in"),this.onEndPrime!=null&&this.onEndPrime(this)}end(){this.transBlock(),this.onEnd!=null&&this.onEnd(this)}render(t=this._view){super.render(t),this.div.classList.toggle("open",t),t?this.begin():this.endPrime()}find(t){return this.list.find(s=>s.tna.label==t)}wipe(t=!0){return this._wipe=t,this}hover(t=!0){return this._hover=t,this}set height(t){this._height=t,this.div.style.setProperty("--menu-h",t+"px"),this.onResize!=null&&this.onResize(this)}get height(){return this._height}get count(){return Object.keys(this.list).length}get next(){if(this.last._index<this.count)return this.list[this.last._index+1]}get previous(){if(this.last._index>0)return this.list[this.last._index-1]}set template(t){this._itemT=t}set templateStatic(t){this._staticT=t}staticHigh(t=!0){return this._static_high=t,this}timing(t,i){return this._tm_open=t,this._tm_close=i,this}timingBlock(t,i){return this._block_tm_open=t,this._block_tm_close=i,this}transRegion(t=0,i=""){const s=t+"ms";return this.dRegion.style.transitionDuration=s,this.dRegion.style.transitionTimingFunction=i,this}transBlock(t=0,i=""){const s=t+"ms",o=this._view?this._block_opacity:0;return this.dBlock.style.transitionDuration=s,this.dBlock.style.transitionTimingFunction=i,this.dBlock.style.opacity=o,this.dBlock.style.visibility="visible",t==0?this.transBlockEnd():this.dBlock.ontransitionend=this.transBlockEnd.bind(this),this}transBlockEnd(){this._view||(this.dBlock.style.visibility="hidden"),this.dBlock.ontransitionend=void 0}}var Qe={control:Ke,item:Qt};const ts=`<g stroke-width="6.7">
    <polygon
      points="89.5 72.8 50 95.6 10.5 72.8 10.5 27.2 50 4.4 89.5 27.2 89.5 72.8"
    />
    <polyline id="badge_N" points="28.4 62 28.4 38 71.6 62 71.6 38" />
  </g>`,is=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="banner" class="banner">
      <div class="banner_wrap">
        <div>C</div><div>u</div><div>b</div><div>e</div>
        <div>C</div><div>o</div><div>r</div><div>e</div></div></div>
    <div id="panel" class="panel"></div>
    </div>
  </div>`;const Ot={},ti=[];let m,S,kt,Ut,Bi=!1,Ct=!1;function es(){if(Ot.badge=S=new zt("badge").show(),S.div.classList.add("connect"),S.add=ts,S.value=!1,S.def(),S.ext_onExecute=e=>{e.choreo("3D_flip").timing(1,250).act(),m.view(!m._view),m._view||m.escape()},zi(!b.prop.modeExt),Ot.dot=kt=new C("badge_dot"),kt.add='<circle cx="50" cy="50" r="50" />',kt.static().prime().def(),kt.onRender=e=>kt.div.classList.toggle("orbit",e._view),window.menu!=null){Ot.menu=m=new Qe.control("menu",is).wipe(),Ut=m._index,m.timing(250,250).timingBlock(500,250),m.onExecute=(t,i)=>{t.last.index==0;const s=Vi(i);return s&&(Ut=t._index),n(),s},m.onBegin=m.onEnd=t=>{S.highlight(t._view);const i=t._view?"blur(3px)":"",s=t._view?t._block_tm_open:t._block_tm_close;mi(s,"ease",i),Ct=!1},pi("Admin");const e=pi("R/Con","rc");e.html='R<span style="padding-left: 2px; font-size: 130%; position: relative; top: 1.5px;">/</span>Con'}const n=async()=>{Ct=!0,await J.delay(2e3),Ct&&(S.highlight(!1),m.index(Ut),m.transBlock(),mi(),Ct=!1)}}function pi(n,e){const t=m.find(n);if(t==null){let i=m.add("static").enable();return ti.push(i),i=m.add().enable(),ti.push(i),i.label=n,i.link=`/${e!=null?e:n.toLowerCase()}/`,Bi=!0,i}else return t.tna}function mi(n=0,e="",t=""){const i=n+"ms",s=window.fit!=null?Ft.current():window.page;if(s==null)return console.warn("nav menuBG FAIL");s.style.filter=t,s.style.transitionProperty="filter",s.style.transitionDuration=`${i}`,s.style.transitionTimingFunction=e}function Vi(n){console.log(`hyper -> "${n}"`);const e=Ft.currentIndex(),t=new URL(n,"http://x"),i=t.pathname==document.location.pathname;if(i){const s=Ft.inject(t.search);Ft.setByID(s)}else!b.prop.local&&n.length>1&&n.slice(-1)=="/"&&(n=n.slice(0,-1)),window.location=n,m.index(e);return i}function ss(n){!Bi||(ti.forEach(e=>e.view(n)),m.update())}function zi(n=!0){S.div.classList.toggle("static",!n),S.div.classList.toggle("dim",!n),S.onExecute=n?S.ext_onExecute:void 0,S.enable(n)}var at={tna:Ot,init:es,enable:zi,hyper:Vi,access:ss};class X extends N{constructor(t,i=void 0,s="info"){super(t,i);a(this,"onChange");this.link(s)}}const j={cast:"border-radius: 9px; padding: 1px 7px 0; font-style: italic; font-weight: bold",test:"border: 0.25px solid gray; border-style: solid solid solid none; border-radius: 0 9px 9px 0; padding: 1px 7px 0 0; font-style: italic; font-weight: bold",gray:"border: 0.25px solid gray; background: gray; color: white;",black:"border: 0.25px solid black; background: black; color: white;",red:"border: 0.25px solid red; background: red; color: white;",gold:"border: 0.25px solid gray; background: gold; color: black;"},et=["fail","cache","cache_end","tear","touch","normal","warn","error","alert","bold"],ii={},lt={},U={};let At,Rt,ei=0;function ns(){At=r.callID.indexOf("call_console"),ii.rc=new X("call_console","object","call"),ii.rc.onChange=(n,e)=>{switch(e.v){case 0:U.fail!=null?U.fail():z("fail","Access Not Authorized");break;case 1:e.n==1&&(Rt=0);const t=JSON.stringify(e);console.groupCollapsed("cache n:%o, count:%o",e.n,e.z.length),console.log(t),console.groupEnd(),e.z.length&&e.z.forEach(i=>{lt.last_format=et[i.f],lt.last_msg=i.m,z(ei?et[i.f]:"tear",i.m),ei++}),Rt+=e.z.length;break;case 2:console.warn("cache EOL chunks:%o count:%o",e.n,Rt),e.c!=null&&(lt.capacity=e.c),e.f!=null&&(lt.full=e.f),U.cache!=null&&U.cache();break;default:lt.last_format=et[e.v],lt.last_msg=e.x,U.msg!=null&&U.msg(),z(et[e.v],e.x);break}}}function as(){ei=Rt=0}function z(n,e){if(U.output!=null)return U.output(n,e);switch(n){case"normal":console.log("%cRC",j.gray+j.cast,e);break;case"warn":const t="border: 0.25px black solid;";console.log("%cRC",t+j.gold+j.cast+t,e);break;case"error":console.log("%cRC%c %s",j.red+j.cast,"color: red",e);break;case"bold":console.log("%cRC%c %s",j.black+j.cast,"font-weight: bold",e);break}}function os(){b.prop.preflight||ls()}function ls(){const n=new CustomEvent("meh"),e="rc.test format:",t={a:r.actionID.indexOf("call"),t:[{i:At,v:et.indexOf("normal"),x:e+"normal"},{i:At,v:et.indexOf("warn"),x:e+"warn"},{i:At,v:et.indexOf("error"),x:e+"error"}]};n.data=JSON.stringify(t),_.parse(n)}function rs(n){z("normal",n)}function ds(n){z("warn",n)}function hs(n){z("error",n)}function cs(n){z("tear",n)}function us(n){z("alert",n)}function fs(n){z("bold",n)}var st={formatID:et,style:j,tna:ii,prop:lt,upon:U,init:ns,prime:os,reset:as,log:rs,warn:ds,error:hs,tear:cs,alert:us,bold:fs};const gs=1,vs=2;class _s extends x{constructor(){super("tron","object");a(this,"_enable",!0);a(this,"state",!1);a(this,"STAGE",Object.freeze({BEGIN:1,END:0}));a(this,"holdTime");a(this,"delayTime");a(this,"showTimeout");a(this,"hideTimeout");a(this,"onWrite");this.setHold().setDelay()}assign(t){const i=window[t];return i==null?console.warn("tron assign FAIL: %o",t):(i.classList.add("tna_Tron"),this.div=i,this)}enable(t=!0){if(this.div!=null&&t!=this._enable)return this.div.classList.toggle("disable",!t),this._enable=t,this}async write(t,i=this.holdTime){this.div!=null&&(clearTimeout(this.hideTimeout),this.div.innerText=t,this.div.classList.add("show","prime"),this.state=!0,this.hideTimeout=setTimeout(this.writeEnd.bind(this),i*1e3),this.onPrime!=null&&this.onWrite(this,STAGE.BEGIN))}async writeEnd(){this.state=!1,this.hideTimeout=void 0,this.div.classList.remove("show"),this.div.ontransitionend=()=>{this.div.classList.remove("prime"),this.onPrime!=null&&this.onWrite(this,STAGE.END),this.div.ontransitionend=void 0}}writeDelay(t,i=this.holdTime,s=this.delayTime){this.div!=null&&(clearTimeout(this.showTimeout),this.state?(this.div.innerText=t,this.write(t,i)):this.showTimeout=setTimeout(this.write.bind(this),s*1e3,t,i))}cancel(){clearTimeout(this.showTimeout)}kill(){this.cancel(),this.writeEnd()}add(t){return t.onTron=i=>this.write(i),this}setHold(t=gs){return this.holdTime=t,this}setDelay(t=vs){return this.delayTime=t,this}}var ut=new _s;class ps extends N{constructor(){r.prefID.indexOf("ux_index")<0&&console.warn("tna_UX constructor FAIL, cannot find prefID");super("ux_index","object");a(this,"_lastIndex");a(this,"_lastDialog");a(this,"_nextDialog");a(this,"_currentDialog");this.link("pref")}set(t){const i=t.v;if(this._lastIndex!=i&&(this._nextDialog=r.getDialogByIndex(i),this._lastDialog=r.getDialogByIndex(this._lastIndex),this._nextDialog!=null)){this.tron&&this._lastDialog!=null&&`${this._lastDialog.id}`,this._lastDialog!=null&&this.last.exit(),this._nextDialog.begin(),this._lastIndex=this._val=i,this._currentDialog=this._nextDialog,super.set(t);return}}get last(){return this._lastDialog!=null?this._lastDialog:{id:"NULL"}}get lastID(){return this._lastDialog!=null?this._lastDialog.id:void 0}get next(){return this._nextDialog}get current(){return this._currentDialog}get currentID(){return this._currentDialog!=null?this._currentDialog.id:void 0}}const ms='<div id="region" class="region"></div>',bs=`
    <svg id="svg" viewBox="0 0 12 13.8" class="digit">
      <g id="a" class="seg">
        <polygon points="9.76 0 10.03 0.31 8.66 1.5 4.33 1.5 3.31 0.34 3.7 0 9.76 0"/>
      </g>
      <g id="b" class="seg">
        <polygon points="10.63 1 9.96 5.77 9.07 6.55 8.44 5.82 8.99 1.88 10.36 0.69 10.63 1"/>
      </g>
      <g id="c" class="seg">
        <polygon points="7.57 11.97 8.13 8.03 9.02 7.25 9.65 7.98 8.97 12.8 8.58 13.14 7.57 11.97"/>
      </g>
      <g id="d" class="seg">
        <polygon points="2.86 12.3 7.19 12.3 8.21 13.46 7.82 13.8 1.76 13.8 1.49 13.49 2.86 12.3"/>
      </g>
      <g id="e" class="seg">
        <polygon points="0.89 12.8 1.56 8.03 2.45 7.25 3.08 7.98 2.53 11.92 1.16 13.11 0.89 12.8"/>
      </g>
      <g id="f" class="seg">
        <polygon points="2.5 6.55 1.87 5.82 2.55 1 2.94 0.66 3.95 1.83 3.39 5.77 2.5 6.55"/>
      </g>
      <g id="g" class="seg">
        <polygon points="8.06 6.15 8.69 6.88 7.8 7.65 3.46 7.65 2.83 6.92 3.72 6.15 8.06 6.15"/>
      </g>
      <g id="dp" class="seg"><circle cx="10.77" cy="13.05" r="0.75" /></g>
    </svg>`,ws=`<svg id="svg" viewBox="0 0 12.47 13.8" class="colon">
    <g class="seg" transform="translate(0.2 0)">
      <circle cx="1.72" cy="3.45" r="0.75" />
      <circle cx="0.75" cy="10.35" r="0.75" />
    </g>
  </svg>`;var Gt={HTML:ms,DIGIT:bs,COLON:ws};class ys extends N{constructor(t){super(t);a(this,"_primeD",!1);a(this,"_primeN",0);a(this,"_bright",0);a(this,"digits",[]);a(this,"onPrime");this.fuse(),this.link("info"),this.div.insertAdjacentHTML("beforeend",Gt.HTML),this.div.classList.add("tna_Retro7"),this.dRegion=this.getDiv("region");for(let s=0;s<4;s++){this.dRegion.insertAdjacentHTML("beforeend",Gt.DIGIT);const o=this.dRegion.querySelector("#svg");o.id=`svg_${this.digits.length}_${this.id}`,o.style.setProperty("--retro-i",s),this.digits.push(o)}this.dRegion.insertAdjacentHTML("beforeend",Gt.COLON);const i=this.dRegion.querySelector("#svg");i.id=`colon_${this.id}`,this.divColon=i.children[0]}print(t){for(let i=0;i<4;i++)this.digitRaw(i,t[i])}digitRaw(t,i){let s=this.digits[t].children;for(let o=0;o<8;o++){const l=i>>o&1;s[o].classList.toggle("show",l)}}colon(t=2){this.divColon.classList.toggle("show",t==2)}clear(){this.print([0,0,0,0]),this.colon(!1),this.onChange!=null&&this.onChange(this,this._val)}async reset(){this._primeD=!1,this._primeN=0,this.view(!1),await this.delay(500),this.clear(),this.prime(!1)}async set(t){if(this._val=t.v,!this._primeD&&(this.onBegin!=null?this.onBegin(this):this.show(),this._primeN<2)){let i=0;for(let s=0;s<t.v.length;s++)i+=t.v[s];i>0&&this._primeN++,this._primeN=Math.min(this._primeN,2),this._primeN>1&&this.onPrime!=null&&this.onPrime(this)}this.print(t.v),this.colon(t.v[4]),this.onChange!=null&&this.onChange(this,t)}bright(t=0){return this._bright=t,this.div.classList.toggle("dim",t==0),this}}const Wi="3.1.05",ji={}.VITE_PREFLIGHT==="true",xs={}.VITE_EXT_SERVE==="true";ji||console.warn("core PREFLIGHT: %o",!1);const w={},D={preflight:ji,modeExt:xs,modeAP:!1,prime_local:!1},G={},$t={},_t={},Q={};let Mt,qi,A,B,Ht,V,si=!1;function ks(){ut.assign("tron_output"),Ts(),Ds(),w.title=A=new x("head_title"),A.div.classList.add("click"),A.div.onclick=()=>{let e=$t.title!=null?$t.title():!1;e=e==null?!1:e,e||console.log("core title click default")},A.fuse().shy(!(D.modeExt||!Ht)).view(),Ls(),window.diag_client.innerText=J.versionString(Wi);const n=String(document.location);D.local=n.includes("host:")||n.includes("local:"),Mt=new X("developFPO","object"),Mt.onDefault=()=>D.prime_local=!0,J.initStorage("develop",Mt),D.develop=Mt.value,w.ux=qi=new ps().tron(),at.init()}function Ls(){window.socket!=null&&(V=new C("socket").prime().show().enable(),V.symbol("x").symbol("o"),V.value=!0,V.index=1,V.onExecute=n=>{n.toggle(),n.index=n.value,_.monitor(n.value),n.value?_.init():_.kill()},w.socket_button=V)}function Ds(){D.modeExt||(Ht=window.info_display!=null,Ht&&(w.retro=B=new ys("info_display"),B.ext_no_prime=!0,B.ext_view=void 0,D.modeAP||(B.onBegin=n=>{}),B.onRender=(n,e)=>{const t=e!=null?e:n._view;n.ext_view!=t&&(n.ext_view=t,n.div.classList.toggle("click",t),n._view&&n.shy(!1))},B.div.onclick=Es))}function Es(){let n=$t.retro!=null?$t.retro():!1;n=n==null?!1:n,n||(console.log("RD click default, ux:",qi.currentID),_.send("save","clock_disp",-1))}function Ts(){if(window.rc_ind==null||D.user==0)return;const n=new X("info_rc","object");st.upon.msg=(e=st.prop.last_format)=>{const t=D.user!=null?D.user:0;w.rc_ind.view(e!=st.formatID.indexOf("touch")&&t)},n.onChange=(e,t)=>{st.upon.msg(t.v)},w.rc_ind=new zt("rc_ind").symbol("dot").def(),w.rc_ind.onExecute=async e=>{e.choreo("blink","hot").timing(3,150).act(),e.onAnimEnd=()=>at.hyper("/rc/")}}let bi=!1;async function ri(){for(const[n,e]of Object.entries(w))e.ext_no_prime==null&&e.prime();if(Ht)A.shy(!1);else return ri=!0;D.modeAP||(bi||await J.delay(1250),A.view(!1),A.div.classList.add("slide"),window.head.classList.add("gradient"),w.retro.prime(),w.retro.shy(!1),await J.delay(250),w.retro.view(),A.shy(),A.div.classList.remove("slide")),bi=!0,Ui()}function Xi(){si=!1,at.tna.badge.div.classList.add("connect","prime"),at.tna.dot.viewStaged(!1),V!=null&&(V.index=1),G.open!=null&&G.open()}async function ni(){si||(si=!0,at.tna.badge.div.classList.add("prime"),at.tna.badge.div.classList.remove("connect"),at.tna.dot.view(!0),window.head.classList.remove("gradient"),await J.delay(250),B!=null&&B.reset(),V!=null&&V.def(),G.close!=null&&G.close(),A.shy(!1),await J.delay(250),A.view())}function $s(){_.onOpen(Xi),_.onClose(ni),new X("info_install","object").onChange=(t,i)=>{t.ext_prime==null&&(_t.display=(i.v&r.hwMask.display)>>r.hwOffset.display,_t.piezo=(i.v&r.hwMask.piezo)>>r.hwOffset.piezo,_t.xpio=(i.v&r.hwMask.xpio)>>r.hwOffset.xpio,_t.gps=(i.v&r.hwMask.gps)>>r.hwOffset.gps,i.z,Q.display=(i.z&r.hwMask.display)>>r.hwOffset.display,Q.piezo=(i.z&r.hwMask.piezo)>>r.hwOffset.piezo,Q.xpio=(i.z&r.hwMask.xpio)>>r.hwOffset.xpio,Q.gps=(i.z&r.hwMask.gps)>>r.hwOffset.gps,Object.keys(Q).forEach(function(s,o){Q[s]||document.querySelectorAll("._"+s).forEach(h=>h.style.display="none")}))},new X("call_prime","object","call").onChange=t=>{ri(),t.ext_prime==null&&(G.prime!=null&&G.prime(_t,Q),t.ext_prime=!0)},w.user=new X("info_user","object"),w.user.onChange=t=>{D.user=t.data.v,at.access(D.user),G.user!=null&&G.user(t.data)};let n=new X("call_restart","object","call");n.onChange=async t=>{st.bold("system ESP restart"),ni(),await t.delay(1e3),_.send("ping")};let e=new X("call_warn","object","call");if(e.onChange=(t,i)=>{let s=parseInt(i.v);s=s<r.warnID.length?s:-1;let o;s>=0&&(o=r.warnID[s]),o!=null&&console.error(`system warning ${o}`)},B!=null&&r.getControlByID("ui_bright")==null){const t=new X("ui_bright","object","pref");t.onChange=(i,s)=>B.bright(s.v),w[t.id]=t}}function Ui(n=D.user){let e=document.querySelectorAll("._admin");e.forEach(t=>t.style.display=n?"":"none"),e=document.querySelectorAll("._admin_alt"),e.forEach(t=>t.style.display=n?"none":"inherit")}var b={tna:w,prop:D,upon:G,click:$t,version:Wi,install:_t,activate:Q,init:ks,prime:ri,open:Xi,close:ni,patch:$s,admin:Ui};let Bt=!1,ft=!1,Gi=!1,ct,Yi,ai,oi;const Is=`ws://${window.location.hostname}/ws`;let Y,It=!1;function di(){Bt||(Bt=!0,Y=new WebSocket(Is),Y.onopen=Ss,Y.onclose=Cs,Y.onmessage=Yi,ft=!1,ct=clearTimeout(ct))}function Ps(n){n!=It&&(console.log(`socket monitor b:${n} state:${ft}`),It=n,n&&(!ft&&ct==null?di():ct=clearTimeout(ct)))}function Zi(){return ft=(Y!=null?Y.readyState:wi.closed)==wi.connected,ft}function Ss(){console.warn("socket open"),ft=!0,ai!=null&&ai()}function Cs(){console.error(`socket close, squelch:${Gi} check:${It}`),Bt=!1,ft=!1,oi!=null&&oi(),It&&(clearInterval(ct),ct=setTimeout(di,1e3))}function Ms(){console.warn("socket kill"),Y&&Y.close(),Gi=!0,Bt=!1}function Ji(n){Yi=n}function Fs(n){ai=n}function Os(n){oi=n}const wi=Object.freeze({connecting:0,connected:1,closing:2,closed:3});let W=!1;var _={onOpen:Fs,onClose:Os,onParse:Ji,check:It,init:di,ready:Zi,monitor:Ps,kill:Ms,parse:Wt,sendUX:Vs,sendTune:zs,sendObject:Ki,send:Qi,fakeMessage:js,fakeObject:Ws,transmit:Pt,fill:qs,tron:As};Ji(Wt);function As(n=!0){W=n}function Rs(n){let e;for(let t in n)e=r.getControlByIndex("info",n[t].i),e!=null?(n.length>1&&(W?console.log(`<< info #${t} %o ${n[t].v}`,e.id):e.id!="info_display"&&W&&console.log(`<< info %o ${n[t].v}`,e.id)),e.set(n[t])):W&&console.log(`parseInfo #${t} no object id %o`,r.infoID[n[t].i])}function Ns(n){for(let e in n){const t=n[e].i,i=r.getControlByIndex(t<r.prefBase?"admin":"pref",t);i!=null?(W&&(n.length>1?console.log(`<< pref #${e} ${i.id} ${n[e].v}`):console.log(`<< pref ${i.id} ${n[e].v}`)),i.sync(n[e])):W&&console.log(`parseSync #${e} no object id %o`,t)}}function Hs(n){for(let e in n){const t=r.getControlByIndex("call",n[e].i);t!=null&&t.set(n[e])}}function Bs(n){for(let e in n){const t=n[e],i=r.getControlByIndex("ux",t.i);if(i!=null){if(t.s<0)return console.warn("parseUX FAIL bad stage value %o",r.stageID[t.v]);i.parse(t)}else W&&console.log("parsUX no object %o",r.infoID[t.i])}}function Wt(n){let e=JSON.parse(n.data),t=r.actionID[e.a],i=e.t;switch(t){case"call":Hs(i);break;case"ux":Bs(i);break;case"info":Rs(i);break;case"sync":Ns(i);break}}function Vs(n,e,t){const i="ux",s=r.uxID.indexOf(n);if(s<0)return console.warn("sendUX FAIL no dialog %o",n);const o={i:s},l=r.stageID.indexOf(e);l>=0&&(o.v=l),t!=null&&(o.x=t);const h={a:r.actionID.indexOf(i),t:[o]};Pt(h,`${i} >>`)}function zs(n="default"){const e="call",t=r.tuneID.indexOf(n);if(t<0)return console.warn("sendTune FAIL no melody %o",n);r.callID.indexOf("call_tune");const i={a:r.actionID.indexOf(e),t:[{i:r.callID.indexOf("call_tune"),v:t}]};Pt(i,`${e} >>`)}function Ki(n,e,t){const i=r.actionID.indexOf(n);if(i<0)return console.log("sendObject FAIL no action %o",n);let s={a:i,t:[]},o={i:r.getPrefID(e)};return Object.assign(o,t),s.t.push(o),Pt(s,`${n} >>`),s}function Ws(n,e,t){const i=Ki(n,e,t);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),Wt(s)}}function Qi(n,e,t){let i=r.actionID.indexOf(n);if(i<0){W&&console.log("send FAIL no action %o",n);return}let s={a:i,t:[]},o=-1;switch(n){case"push":case"save":case"sync":o=r.getPrefID(e);break;case"call":o=r.callID.indexOf(e);break;case"ping":o=t=0}if(o<0){W&&console.log("send FAIL no id %o in action %o",e,n);return}return s.t.push({i:o,v:t|0}),Pt(s,`${n} >>`),s}function js(n,e,t){const i=Qi(n,e,t);if(typeof i=="object"){const s=new CustomEvent("meh");s.data=JSON.stringify(i),Wt(s)}}function Pt(n,e){const t=JSON.stringify(n);W&&console.log(`${e} ${t}`),Zi()&&Y.send(t)}async function qs(n,e,t){let i={};if(b.prop.preflight)try{const s=await fetch(e,{method:"GET"});if(s.status===200)i=await s.json();else throw new Error(`${e} FAIL fetch code:${s.status}`)}catch(s){console.warn(`${e} FAIL, use test data`,s),Object.assign(i,t)}else console.warn(`${e} !preflight, use test data`),Object.assign(i,t);console.groupCollapsed(`comm fill ${e}`),console.log(i),console.groupEnd(),Object.assign(n,i)}const Nt=Math.floor(new Date().getTime()/1e3);r.actionID.indexOf("info"),r.infoID.indexOf("info_hardware"),r.infoID.indexOf("info_mfg"),r.infoID.indexOf("info_reg");const Xs={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_rc"),v:4},{i:r.infoID.indexOf("info_install"),v:r.hwMask.display+r.hwMask.piezo+r.hwMask.xpio+r.hwMask.gps+0,z:r.hwMask.display+r.hwMask.piezo+r.hwMask.xpio+r.hwMask.gps+0},{i:r.infoID.indexOf("info_user"),v:1},{i:r.infoID.indexOf("info_firmware"),v:"8.8.88"},{i:r.infoID.indexOf("info_uptime"),v:Nt-3600*24*99},{i:r.infoID.indexOf("info_net"),v:"expresso",p:"8C:CE:4E:D5:36:9D",q:"192.168.2.100"},{i:r.infoID.indexOf("info_rssi"),v:"-78"},{i:r.infoID.indexOf("info_status"),v:r.serviceID.indexOf("GPS"),g:1,n:1},{i:r.infoID.indexOf("info_tap"),v:4,m:884,c:4},{i:r.infoID.indexOf("info_gps"),t:Nt,d:1200,v:13,max:12,min:12,rec:22},{i:r.infoID.indexOf("info_ntp"),v:0,s:Nt,f:28,p:64,e:0,r:60*30},{i:r.infoID.indexOf("info_display"),v:[0,0,0,0,0]}]},Us={a:r.actionID.indexOf("sync"),t:[{i:r.getPrefID("net_alert"),v:1},{i:r.getPrefID("ui_bright"),v:0,x:5},{i:r.getPrefID("ui_sound"),v:1},{i:r.getPrefID("tap_mode"),v:0},{i:r.getPrefID("tap_tilt"),v:1},{i:r.getPrefID("tap_alert"),v:0},{i:r.getPrefID("tap"),v:7,t:1023},{i:r.getPrefID("gps_alert"),v:0},{i:r.getPrefID("gps_log_int"),v:1200},{i:r.getPrefID("clock_static"),v:1},{i:r.getPrefID("clock_disp"),v:r.clockID.indexOf("CLOCK_HHMM")},{i:r.getPrefID("clock_24h"),v:0},{i:r.getPrefID("clock_tz"),v:-6},{i:r.getPrefID("clock_dst"),v:1},{i:r.getPrefID("clock_pps"),v:0},{i:r.getPrefID("daily"),v:1,h:9,m:32},{i:r.getPrefID("daily_vol"),v:1},{i:r.getPrefID("daily_ind"),v:1},{i:r.getPrefID("daily_snooze"),v:1},{i:r.getPrefID("ux_index"),v:r.uxID.indexOf("clock_static")}]};r.infoID.indexOf("info_gps_log"),Nt-200;const Gs={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_display"),v:[127,127,127,127,2]}]},Ys={a:r.actionID.indexOf("info"),t:[{i:r.infoID.indexOf("info_display"),v:[120,121,109,120,0]}]},Zs={a:r.actionID.indexOf("call"),t:[{i:r.callID.indexOf("call_prime"),v:0}]};function Js(){const n=b.prop.local?500:75;setTimeout(async()=>{if(_.ready())return;b.open(),console.log("%ccomm test",st.style.test,"info + sync");const e=new CustomEvent("meh");e.data=JSON.stringify(Xs),_.parse(e),e.data=JSON.stringify(Us),_.parse(e),await J.delay(75),e.data=JSON.stringify(Zs),_.parse(e)},n),setTimeout(()=>{if(_.ready())return;console.log("%ccomm test",st.style.test,"display");const e=new CustomEvent("meh");e.data=JSON.stringify(Gs),_.parse(e)},n*2),setTimeout(()=>{if(_.ready())return;const e=new CustomEvent("meh");e.data=JSON.stringify(Ys),_.parse(e)},n*3)}var Ks={init:Js};let Et;function Qs(){document.body.insertAdjacentHTML("beforeend",'<svg height="0" width="0" style="visibility: hidden"></svg>'),Et=document.body.lastChild}function tn(n,e){Et.insertAdjacentHTML("beforeend",'<symbol id="" viewBox="0 0 100 100"></symbol>'),Et.lastChild.id="sym_"+n,Et.lastChild.innerHTML=e}function en(n){Et.insertAdjacentHTML("beforeend",n)}Qs();var f={add:tn,def:en};function sn(){f.add("warn_ui",`<g stroke-width="12" stroke-linecap="round" stroke-linejoin="round" >  
      <polygon stroke="var(--icon-fg)" fill="var(--icon-fg)" points="50 12.69 7.5 86.31 92.5 86.31 50 12.69" />
      <g>
        <polyline stroke="var(--icon-bg)" fill="none" points="50 55 50 32" />
        <circle fill="var(--icon-bg)" stroke="none" cx="50" cy="78" r="7" />
      </g>    
    </g>`),f.add("warn_text",`<g stroke="var(--icon-fg)" fill="none">
      <path stroke-width="6px" stroke-linejoin="round" d="M66,91.39H90.59A6.2,6.2,0,0,0,96,82.08L55.37,11.78a6.2,6.2,0,0,0-10.74,0L4,82.08a6.2,6.2,0,0,0,5.37,9.31H34" />    
      <polyline stroke-width="14px" points="50 73 50 55.5 50 38" />
      <polyline stroke-width="14px" points="50 94.5 50 80.5" />
    </g>`),f.add("hit",`<defs>
      <radialGradient id="grad">
        <stop offset="0%" stop-color="rgb(0,0,0,1)" />
        <stop offset="33%" stop-color="rgb(0,0,0,0.3)" />
        <stop offset="90%" stop-color="transparent" />
      </radialGradient>
    </defs>
    <g transform="translate(50 50)">
      <circle fill="url('#grad')" stroke-width="4px" stroke="var(--icon-bg)" cx="0" cy="0" r="48" />
    </g>`),f.add("halo",`<g transform="translate(50 50)">
      <circle fill="none" stroke-width="4px" stroke="var(--icon-fg)" cx="0" cy="0" r="48" />
    </g>`),f.add("show",`<g fill="var(--icon-fg)">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM50,31A19,19,0,1,0,69,50,19,19,0,0,0,50,31Zm0,9A10,10,0,1,0,60,50,10,10,0,0,0,50,40Z" />
    </g>`),f.add("hide",`<g fill="var(--icon-fg)" stroke="none">
      <path d="M100,50C89.32,65.16,69,78,50,78S10.68,65.16,0,50C10.68,34.84,31,22,50,22S89.32,34.84,100,50ZM89.82,50C79.39,38.17,63.45,30,50,30S20.62,38.17,10.19,50C20.62,61.83,36.55,70,50,70S79.39,61.83,89.82,50Z" />
      <circle cx="50" cy="50" r="14" />
    </g>
    <g stroke-linecap="butt" transform="translate(50 50) rotate(45)">
      <line stroke="var(--icon-bg)" stroke-width="16" x1="-40" y1="0" x2="40" y2="0" />
      <line stroke="var(--icon-fav)" stroke-width="5" x1="-50" y1="0" x2="50" y2="0" />
    </g>`),f.add("wifi_def",`<g fill="none">
      <circle stroke="var(--icon-fg)" stroke-width="16" cx="0" cy="0" r="8"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="32"></circle>
      <circle stroke="var(--icon-fg)" stroke-width="8" cx="0" cy="0" r="52"></circle>
   </g>`),f.add("wifi",`<g transform="translate(50, 84) rotate(-135) scale(1.25)">
      <use href="#sym_wifi_def" />
    </g>`),f.add("info",`<g stroke="var(--icon-fg)" fill="none">
      <circle stroke-width="5" cx="50" cy="50" r="47.5"></circle>
      <g stroke-width="16" transform="translate(11) skewX(-12)">
        <line x1="50" y1="82" x2="50" y2="44" />
        <line x1="50" y1="34" x2="50" y2="18" />
      </g>
    </g>`),f.add("help",`<g transform="translate(50 50)" stroke="none">
      <path d="M8.6,33.2H-8.6V23.6H8.6Zm12-60.4H-20.6c-5,0-10.3,3.6-10.3,8.3v8.8h16.5v-10H14.4v18H.7c-5.6,0-9.3,3.5-9.3,9.4v9.1H8.6V7.9c0-2.7,1-3.3,3.7-3.3h8.3C25.2,4.6,30.9.8,30.9-4V-18.9C30.9-23.6,25.6-27.2,20.6-27.2Z" /> 
    </g>`),f.add("help_button",`<g>
      <use href="#sym_halo" />
      <use href="#sym_help" />
    </g>`),f.add("tap",`<g>
      <polygon fill="var(--icon-fg)" stroke="none" points="86.76 0 66.96 0 49.87 17.09 32.84 0 13.08 0 49.85 36.91 86.76 0" />
      <g stroke="var(--icon-fg)">
        <line stroke-width="14px" y1="50" x2="100" y2="50" />
        <g stroke-width="10px" >
          <line class="cls-3" x1="50" y1="100" x2="50" y2="77" />
          <line class="cls-3" x1="14.64" y1="85.36" x2="30.91" y2="69.09" />
          <line class="cls-3" x1="85.36" y1="85.36" x2="69.09" y2="69.09" />
        </g>
      </g>
    </g>`),f.add("twirl",`<g fill="var(--icon-fg)" stroke="none">
    <polygon points="0,88 100,88 50,0"/>
  </g>`),f.add("refresh",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <polyline points="3.536 52.75 19.036 37.25 34.536 52.75" transform="translate(-49.75 -48)" />
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),f.add("refresh_run",`<g stroke="var(--icon-fg)" transform="translate(50 50)" fill="none" style="stroke-miterlimit:10;">
      <path d="M0-31A31,31,0,0,1,31,0,31,31,0,0,1,0,31,31,31,0,0,1-31,0a31.041,31.041,0,0,1,1.206-8.593" />
    </g>`),f.add("undo",`<g transform="scale(-1 1) translate(-100 0)" stroke="var(--icon-fg)" stroke-width="8" fill="none">
      <polyline points="46.21 53.21 30 37 46.21 20.79" />
      <path d="M33,79H60.48a21,21,0,1,0,0-42H30" />
      <line x1="18" y1="18" x2="18" y2="56" />
    </g>`),f.add("dot",`<g transform="translate(50, 50)">
      <circle fill="var(--icon-fg)" cx="0" cy="0" r="50"></circle>
    </g>`),f.add("o",`<g transform="translate(50, 50)">
      <circle stroke="var(--icon-fg)" stroke-width="22" fill="none" cx="0" cy="0" r="39"></circle>
    </g>`),f.add("x",`<g stroke="var(--icon-fg)" stroke-width="22">
        <line x1="12" y1="12" x2="88" y2="88"></line>
        <line x1="12" y1="88" x2="88" y2="12"></line>
    </g>`),f.add("bar_1",`<g transform="translate(0, 0)">
      <line stroke="var(--icon-fg)" stroke-width="22" x1="50" y1="0" x2="50" y2="100"></line>
    </g>`),f.add("bar_2",`<g stroke="var(--icon-fg)" stroke-width="22" transform="translate(0, 0)">
      <line x1="20" y1="0" x2="20" y2="100"></line>
      <line x1="80" y1="0" x2="80" y2="100"></line>
    </g>`),f.add("vol_wave_0",`<g transform="translate(0, 0)">
      <g transform="scale(0.5) translate(100, 50)">
        <use href="#sym_x" />
      </g>
    </g>`),f.add("vol_wave_1",`<g transform="translate(0, 0)">
      <path stroke="var(--icon-fg)" stroke-width="10" fill="none" d="M62.7,31.63a28.5,28.5,0,0,1-.45,36.29"/>
     </g>`),f.add("vol_wave_2",`<g transform="translate(0, 0)">
      <use href="#sym_vol_wave_1" />
      <path stroke="var(--icon-fg)" stroke-width="12" fill="none" d="M80.21,14.44a52.94,52.94,0,0,1-.06,71.07"/>
     </g >`),f.add("lock",`<g>
      <path transform="translate(62 55)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
      </g>`),f.add("unlock",`<g>
      <path transform="translate(25 50)" stroke-width="12" stroke="var(--icon-fg)" fill="none" d="M-20,0V-22c0-12.15,8.954-22,20-22H0c11.046,0,20,9.85,20,22V0"/>
      <rect fill="var(--icon-fg)" stroke="none" x="25" y="50" width="75" height="50" />
    </g>`),f.add("bell",`<g transform="translate(5 10)" stroke-width="10" stroke="var(--icon-fg)" fill="none">
      <g transform="translate(-7 -9.73)">
        <path d="M60.59,74a11,11,0,1,1-21.18,0Z" />
        <path d="M79,73,68.5,33.16C67.31,29,63.94,26,59.7,26H40.63a9.42,9.42,0,0,0-8.8,7.12L21.33,73" />
      </g>
      <line x1="43" y1="19.31" x2="43" />
      <line y1="63.27" x2="86" y2="63.27" />
    </g>`),f.add("tna_hex",`<g stroke="var(--icon-fg)" fill="none">
        <polygon points="88.97 72.5 50 95 11.03 72.5 11.03 27.5 50 5 88.97 27.5 88.97 72.5" />
    </g>`),f.add("tna_n",`<g stroke="var(--icon-fg)" fill="none">
        <polyline stroke-linecap="round" stroke-linejoin="round" points="28.71 61.84 28.71 38.16 71.29 61.84 71.29 38.16" />
    </g>`),f.add("tna",`<g>
      <use href="#sym_tna_hex" />
      <use href="#sym_tna_n" />
    </g>`),f.add("warn_tna",`<g fill="var(--icon-fg)" stroke="none" transform="translate(50, 50)">
      <path d="M-17-25.7l-8.2-14.2,4.7-2.7h41l4.7,2.7L17-25.7l16.5,9.5,8.2-14.2L50-25.6l-24.8,43H9.5v-30h-19v30H-25.2L-50-25.6l8.3-4.8,8.2,14.2Zm22.5,52h-11l-9.4,16.3H14.9Z"/>
    </g>`)}sn();function nn(){f.add("eye",`<g fill="var(--icon-fg)" stroke="none" transform="translate(50, 50)">
      <path d="M50,0C39.3,15.2,19,28,0,28S-39.3,15.2-50,0C-39.3-15.2-19-28,0-28S39.3-15.2,50,0ZM0-19A19,19,0,0,0-19,0,19,19,0,0,0,0,19,19,19,0,0,0,19,0,19,19,0,0,0,0-19Zm0,9A10,10,0,0,0-10,0,10,10,0,0,0,0,10,10,10,0,0,0,10,0,10,10,0,0,0,0-10Z"/>
    </g>`),f.add("warn_tna",`<g fill="var(--icon-fg)" stroke="none" transform="translate(50, 50)">
      <path d="M-17-25.7l-8.2-14.2,4.7-2.7h41l4.7,2.7L17-25.7l16.5,9.5,8.2-14.2L50-25.6l-24.8,43H9.5v-30h-19v30H-25.2L-50-25.6l8.3-4.8,8.2,14.2Zm22.5,52h-11l-9.4,16.3H14.9Z"/>
    </g>`),f.add("vol_0",'<polygon fill="var(--icon-fg)" stroke="none" points="46.92 88.88 23.09 66.7 5.27 66.7 5.27 32.75 23.09 32.75 46.92 10.56 46.92 88.88"/>'),f.add("vol_x",`<g transform="translate(0, 0)">
      <g transform="translate(-5)">
        <use href="#sym_vol_0" />
      </g>
      <g transform="scale(0.5) translate(100, 50)">
        <use href="#sym_x" />
      </g>
    </g>`),f.add("vol_1",`<g transform="translate(10, 0)">
      <use href="#sym_vol_0" />
      <path stroke="var(--icon-fg)" stroke-width="10" fill="none" d="M62.7,31.63a28.5,28.5,0,0,1-.45,36.29"/>
     </g>`),f.add("vol_2",`<g transform="translate(-10, 0)"><use href="#sym_vol_1" /></g>
     <path stroke="var(--icon-fg)" stroke-width="12" fill="none" d="M80.21,14.44a52.94,52.94,0,0,1-.06,71.07"/>`)}nn();const an=`<div id="region" class="region">
    <div id="bg" class="bg">
      <div id="action" class="action"></div>
    </div>
    <div id="label_wrap" class="label_wrap">
      <div id="label" class="label"></div>
    </div>
    <div id="status_wrap" class="status_wrap">
      <div id="status" class="status"></div>
      <div id="status_icon" class="status_icon"></div>
    </div>
  </div>`;class M extends N{constructor(t,i="pref"){super(t);a(this,"_label");a(this,"_status");a(this,"iStatus");a(this,"onExecute");this.link(i),this.div.insertAdjacentHTML("beforeend",an),this.div.classList.add("tna_Button","disable"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dAction=this.getDiv("action"),this.dLabel=this.getDiv("label_wrap"),this.dLabelVal=this.getDiv("label"),this.dStatusW=this.getDiv("status_wrap"),this.dStatus=this.getDiv("status"),this.dIconStatus=this.getDiv("status_icon"),this.label=this.getDataAttr("label","string",""),this.enable(this.div.dataset.enable!=null)}icon(){this.dStatus.classList.add("alt");const t=new zt(this.dIconStatus).static().prime();return this.iStatus=t,this}enable(t=!0){if(t!=this._enable)return this._enable=t,this.enablePrime(),this}async enablePrime(){this._enable||(this.div.onclick=null);const t=500;this.div.classList.toggle("disable",!this._enable),this.dRegion.style.transition=t+"ms",await this.delay(t),this.dRegion.style="",this._enable&&(this.div.onclick=this.execute.bind(this))}execute(t){t.preventDefault(),t.stopImmediatePropagation();let i;this.onExecute!=null&&(i=this.onExecute(this)),i=i==null?!0:i,i&&this.confirm()}confirm(){this.div.classList.add("confirm"),this.dAction.onanimationend=this.confirmEnd.bind(this)}confirmEnd(t){this.div.classList.remove("confirm"),this.dAction.onanimationend=void 0}shuffleIcon(t=!0){const i=t?"beforeend":"afterbegin";return this.dStatusW.insertAdjacentElement(i,this.dIconStatus),this.dStatus.classList.toggle("alt",t),this}displayIcon(t=!0){return this.iStatus.display(t),this.dStatus.classList.toggle("alt",t),this}set label(t){this._label=t,this.dLabelVal.innerHTML=t}set status(t){this._status=t,this.dStatus.innerHTML=t}}const on=`<div id="region" class="region">
    <div id="thumb" class="thumb"></div>
  </div>`;class Tt extends N{constructor(t,i="pref"){super(t);a(this,"_invert",!1);a(this,"onExecute");a(this,"onChange");a(this,"onTron");this.link(i),this.div.insertAdjacentHTML("beforeend",on),this.div.classList.add("tna_Toggle","disable"),this.dRegion=this.getDiv("region"),this.dThumb=this.getDiv("thumb");let s=parseInt(this.div.dataset.checked);this._val=isNaN(s)?0:s;const o=this.div.dataset.value;o!=null&&(console.log(`${this.id} construct data-value:${o}`),this.value=parseInt(o)),this.enable(this.div.dataset.enable!=null),this.draw()}enable(t=!0){return this._enable=t,t?(this.draw(),this.div.onclick=this.execute.bind(this),this.div.classList.remove("disable")):(this.div.onclick=void 0,this.div.classList.add("disable")),this}draw(t=this._val){t=t>0,t^=this._invert,this.div.classList.toggle("check",t)}execute(t){this.toggle(),this.onTron!=null&&this.onTron(`${this.div.id} > end`),this.onExecute!=null?this.onExecute(this,this.value):this.save()}toggle(){return this.set(!this.value),this}set(t){return typeof t!="object"&&(this.value=t),super.set(t),this}set invert(t){this._invert=t}get invert(){return this._invert}}const ln=`<div class="region">
    <div id="label" class="label">X</div>
  </div>`;class rn extends x{constructor(t,i,s=ln){super(t,"div");a(this,"_index");a(this,"_label");a(this,"_target");a(this,"control");a(this,"bClick");this.control=i,this.div.id=this.id=`${i.id}_item_${i.itemN}`,this._label=this.div.innerHTML,this.div.innerText="",this.div.insertAdjacentHTML("afterbegin",s),this.div.classList.add("tna_Radio_item"),this.dLabel=this.getDiv("label"),this.label=this._label;let o=this.div.querySelector("._click");o==null&&(o=this.div),o._tna_target=this.div,this._target=o,this.bClick=this.click.bind(this),this.enable()}click(t){let i=t.target._tna_target;i==null&&(i=this.parent(t.target,"_item")),this.execute(i),t.preventDefault(),t.stopImmediatePropagation()}execute(t){this.control.last=this,this.control.execute(this),this.control.view(!1)}enable(t=!0){return this.enabled=t,this.div.classList.toggle("enable",t),this._target.onclick=t&&!this._static?this.bClick:null,this._target.style.pointerEvents=t&&!this._static?"":"none",this}highlight(t=!0){this.div.classList.toggle("act",t);const i=t&&this._index==0&&!this.control.attrOff;return this.div.classList.toggle("off",i),this.enable(!t||this.control._persist),this}set label(t){this.dLabel.innerText=t}}const dn=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="rule" class="rule"></div>
    <div id="cursor" class="cursor"></div>
    <div id="panel" class="panel"></div>
  </div>`;class yi extends N{constructor(t){super(t);a(this,"_primed",!1);a(this,"_persist",!1);a(this,"_rule");a(this,"_ruleLimit");a(this,"_itemN",0);a(this,"_defP");a(this,"_itemDef",rn);a(this,"list",[]);a(this,"listR",[]);a(this,"last");a(this,"onChange");a(this,"onExecute");this.link("pref"),this.div.insertAdjacentHTML("afterbegin",dn),this.div.classList.add("tna_Radio"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dRule=this.getDiv("rule"),this.dCursor=this.getDiv("cursor"),this.dPanel=this.getDiv("panel"),this._defP=this.getPropVal("--radio-p"),this._rule=this.div.dataset.rule!=null,this._ruleLimit=this.div.dataset.ruleLimit!=null,this.attrOff=this.div.dataset.radioOff!=null,this.enable(this.div.dataset.enable!=null),this.dCursor.style.left=0}init(t){for(let i=0;i<t;i++){const s=document.createElement("div");this.div.appendChild(s)}return this.merge(),this}prime(){return this._primed=!0,this}merge(){const t=this.div.childElementCount;this.setProp("--radio-n",t-1);for(let i=1;i<t;i++){const s=this.div.children[1];this.create(s).touchPrime(),this.dPanel.insertAdjacentElement("beforeend",s)}return this.rule(),this}create(t){const i=new this._itemDef(t,this),s=`${this.id}_item_${this._itemN}`;return t.id=i.id=s,i._index=this._itemN,this.list.push(i),this._itemN++,i}rule(t=this._rule){if(t)for(let i=0;i<=this._itemN;i++){const s=document.createElement("div");this.dRule.appendChild(s),this.listR.push(s),this.dRule.classList.toggle("limit",this._ruleLimit)}return this}index(t){if(this.list.forEach(i=>i.highlight(!1)),t>=0&&this.list[t].highlight(),this._primed&&(this.dCursor.style.transition="left 0.25s"),this.dCursor.style.left=`calc(${this._defP}px + ${t/this._itemN*100}%)`,this.dCursor.style.opacity=1,this._val=t,this.dCursor.classList.toggle("solid",t!=0||this.attrOff),this._rule)for(let i=0;i<=this._itemN;i++){const s=t==i||t+1==i;this.listR[i].classList.toggle("show",!s)}return this}execute(t){this.index(t._index),this.onChange!=null&&this.onChange(this),this.onExecute!=null&&this.onExecute(this),this.push()}set(t=this._val){return this.index(this._val),super.set(this._val),this}enable(t=!0){if(t!=this._enable)return this._enable=t,this.div.classList.toggle("disable",!t),this}persist(t=!0){return this._persist=t,this}label(t){return this.list[t].dLabel}}const hn=`<div id="region" class="region">
    <div id="strip" class="strip">
      <div id="fade" class="fadeW">
        <div class="fade"></div>
        <div class="fade R"></div>
      </div>
      <div id="ruler" class="ruler"></div>
      <div id="fill" class="fill"></div>
    </div>
    <div id="hit" class="hit"></div>
    <div id="thumb" class="thumb">
      <div id="divot" class="divot"></div>
      <div id="thumb_fill" class="fill"></div>
    </div>
  </div>`;class te extends N{constructor(t){super(t);a(this,"dLabel");a(this,"_minVal");a(this,"_maxVal");a(this,"_range");a(this,"rulePrime");a(this,"x0");a(this,"val0");a(this,"valTrack");a(this,"lastDraw");a(this,"endDelay",0);a(this,"endTimeout");a(this,"onBegin");a(this,"onEnd");a(this,"onChange");a(this,"onEnable");a(this,"onTron");this.link("pref"),this.div.insertAdjacentHTML("beforeend",hn),this.div.classList.add("tna_Slide"),this.dThumb=this.getDiv("thumb"),this.dThumbFill=this.getDiv("thumb_fill"),this.dRegion=this.getDiv("region"),this.dHit=this.getDiv("hit"),this.divStrip=this.getDiv("strip"),this.dFill=this.getDiv("fill"),this.dDivot=this.getDiv("divot"),this.dFade=this.getDiv("fade"),this.dRuler=this.getDiv("ruler"),this._attrFill=this.div.dataset.slideFill!=null,this._attrFade=this.div.dataset.slideFade!=null,this._attrRule=this.div.dataset.slideRule!=null,this._attrOff=this.div.dataset.slideOff!=null,this._attrOn=this.div.dataset.slideOn!=null,this.attrFill(),this.attrFade(),this.defH=this.getDataAttr("slideH","pixel"),this.defB=this.getPropVal("--slide-b"),this.thumbW=this.getDataAttr("slideThumbW","pixel"),this.bClick=this.click.bind(this),this.bDragStart=this.dragStart.bind(this),this.bDragEnd=this.dragEnd.bind(this),this.bTrack=this.track.bind(this),this.observer=new ResizeObserver(i=>{const s=i[0].contentRect.width;this.resize(s)}),this.observer.observe(this.div),this.enable(this.div.dataset.enable!=null)}init(t){return this._val=t,this.draw(),this.set(t),this}enable(t=!0){return this._enable=t,t?(this.draw(!0),this.dThumbFill.onmousedown=this.dThumbFill.ontouchstart=this.bDragStart,this.dHit.onclick=this.bClick):(this.draw(!1),this.dThumbFill.onmousedown=this.dThumbFill.ontouchstart=null,this.dHit.onclick=this.bClick,this.dFill.style.width="0px"),this.div.classList.toggle("disable",!t),this.onEnable!=null&&this.onEnable(this),this}resize(t=this.stripW){t!=null&&(this.stripW=t,this.locMax=this.stripW-this.thumbW,this.draw(!0))}draw(t=!1){if(this.lastDraw!=this._val||t){const i=(this._val-this._minVal)*(this.locMax/this._range);this.dThumb.style.left=i+(this.defH-this.thumbW)/2+"px",this._attrFill&&(this.dFill.style.width=i+"px"),this.div.classList.toggle("on",this._attrFill&&!this._attrOff||this._attrOff&&this._attrOn&&this.value!=this._minVal),this.div.classList.toggle("min",this._attrOff&&this.value==this._minVal),this.div.classList.toggle("max",this._attrOn&&this.value==this._maxVal),this.lastDraw=this._val}}click(t){this.incr(t),this.draw(),this.push(),this.onChange!=null&&this.onChange(this),t.preventDefault()}incr(t){const i=isNaN(t.pageX)?t.changedTouches[0].pageX:t.pageX;this.val0=this._val;const s=this.dThumb.getBoundingClientRect();i-s.left>0?this._val++:this._val--,this._val=this._val>this._maxVal?this._maxVal:this._val,this._val=this._val<this._minVal?this._minVal:this._val}start(t){this.primed=!0,this.x0=isNaN(t.pageX)?t.changedTouches[0].pageX:t.pageX,this.lastTime=t.timeStamp,this.val0=this._val,this.valTrack=this._val,this.dThumbFill.classList.add("highlight"),document.addEventListener("mousemove",this.bTrack),document.addEventListener("touchmove",this.bTrack),this.onBegin!=null&&this.onBegin(this),t.preventDefault()}dragStart(t){this.start(t),document.addEventListener("mouseup",this.bDragEnd),document.addEventListener("touchend",this.bDragEnd),this.dThumbFill.style.cursor="grab",t.preventDefault()}track(t){if(!this.primed)return;const s=(isNaN(t.pageX)?t.changedTouches[0].pageX:t.pageX)-this.x0,o=Math.round(s/(this.locMax/this._range));let l=this.val0-this._minVal+o;l=l>this._range?this._range:l,l=l<0?0:l,this._val=l+this._minVal,this.draw(),this.valTrack!=this._val&&(this.valTrack=this._val,this.push(),this.onChange!=null&&this.onChange(this)),t.preventDefault()}dragEnd(t){this.dThumb.onmouseup=this.dThumb.ontouchend=null,document.removeEventListener("mousemove",this.bTrack),document.removeEventListener("touchmove",this.bTrack),document.removeEventListener("mouseup",this.bDragEnd),document.removeEventListener("touchend",this.bDragEnd),this.end(),t.preventDefault()}end(){this.dThumbFill.classList.remove("highlight"),this.dThumb.style.cursor=null,this.dThumbFill.onmousedown=this.dThumbFill.ontouchstart=this.bDragStart,this.primed=!1,this.onTron!=null&&this.onTron(`${this.div.id} > end`),this.onEnd!=null&&(this.endDelay>0?this.endTimeout=setTimeout(this.onEnd,this.endDelay,this):this.onEnd(this)),this.push(),this.jumpFlag=!1}set(t){this.draw(),this.onChange!=null&&this.onChange(this,t),!(this.primed||this.onEnd==null)&&(this.endDelay>0?this.endTimeout=setTimeout(this.onEnd,this.endDelay,this):this.onEnd(this))}range(t,i){this._minVal=t,this._maxVal=i,this._range=i-t;let s=this._val;return s=s>this._maxVal?i:s,s=s<this._minVal?t:s,this._val=s,this.attrRule(),this}attrRule(t=this._attrRule){if(this._attrRule=t,this.dRuler.style.display=t?"":"none",t&&!this.rulePrime){const i=this._range+1;for(let s=1;s<=i;s++){let o=document.createElement("div");this.dRuler.appendChild(o),o.classList.add("mark")}this.rulePrime=!0}return this}attrFill(t=this._attrFill){return this._attrFill=t,this.dFill.classList.toggle("show",t),this}attrFade(t=this._attrFade){return this._attrFade=t,this.dFade.classList.toggle("show",t),this}}const cn=`<g class="shape" transform="translate(-50 -50)">
    <polyline points="25,100 75,50 25,0" />
  </g>`;class ie extends C{constructor(t){super(t);a(this,"_duration");a(this,"_count",0);this.div.classList.add("tna_Tread"),this.duration=this.getPropVal("--tread-t"),this.count=this.getPropVal("--tread-n"),this.getProp("--tread-fade").indexOf("in")>=0&&this.div.classList.add("fadeIn"),this.value=0}set count(t){this.clear();for(let i=0;i<t;i++){this.add=cn;const s=this.list[this.list.length-1],o=-(i/t)*this._duration;s.style.animationDelay=o+"s",s._tna_id=i,s.onanimationiteration=this.iterate.bind(this)}this.translate(50,50),this.scale(.88),this.update()}set duration(t){this._duration=t,this.div.style.setProperty("--tread-t",t+"s")}show(t=!1){this._val=!0,t&&(this.dWrap.onanimationend=void 0,this.div.classList.remove("hide")),this.div.classList.add("show","run")}hide(){this._val=!1,this.div.classList.remove("show"),this.div.classList.add("hide"),this.dWrap.onanimationend=t=>{t.animationName=="tna_Tread_hide"&&this.div.classList.remove("run","hide"),this.dWrap.onanimationend=void 0}}toggle(t){this._val=t==null?!this._val:t,this._val?this.show():this.hide()}iterate(t){t.animationName=="tna_Tread_move"&&this._count++}}const un=`<div id="region" class="region">
    <div id="bg" class="bg"></div>
    <div id="strip" class="strip"></div>
    <div id="fill" class="fill"></div>
    <div class="flex left">
      <div id="status" class="status"></div>
      <div id="value_wrap" class="value_wrap">
        <div id="value" class="value"></div>
      </div>
    </div>
    <div class="flex right">
      <div style="flex:1"></div>
      <div id="tread" class="tread"></div>
      <div id="prompt" class="prompt"></div>
    </div>
    <div id="thumb" class="thumb">
      <svg id="chevron" class="chevron" viewBox="0 0 100 100">
        <g transform="translate(0 6) scale(.88)">
          <polyline stroke-width="24" points="25 100 75 50 25 0" />
        </g>
      </svg>
    </div>
  </div>`;class fn extends N{constructor(t,i="ux"){super(t);a(this,"_ready",!1);a(this,"sticky",!1);a(this,"autoReset",!0);a(this,"committed",!1);a(this,"expired",!1);a(this,"textStatus","");a(this,"textPrompt");a(this,"x0");a(this,"loc");a(this,"locMax");a(this,"locNorm");a(this,"delta");a(this,"defH");a(this,"thumbW");a(this,"promptW");a(this,"treadPersist",!1);a(this,"treadPrompt",!1);a(this,"cancelDelay",75);a(this,"commitDelay",0);a(this,"timeout");a(this,"tread");a(this,"animThumb");a(this,"onBegin");a(this,"onReady");a(this,"onPrime");a(this,"onCommit");a(this,"onEnd");a(this,"onCancel");a(this,"onExpire");a(this,"onChange");this.link(i),this.div.insertAdjacentHTML("beforeend",un),this.div.classList.add("tna_SafeSlide","disable"),this.dRegion=this.getDiv("region"),this.dBg=this.getDiv("bg"),this.dStrip=this.getDiv("strip"),this.dFill=this.getDiv("fill"),this.dPrompt=this.getDiv("prompt"),this.dStatus=this.getDiv("status"),this.dValueW=this.getDiv("value_wrap"),this.dValue=this.getDiv("value"),this.dThumb=this.getDiv("thumb"),this.divChevron=this.getDiv("chevron"),this.divTread=this.getDiv("tread"),this.treadPrompt=this.div.dataset.safeTread!=null,this.treadPersist=this.div.dataset.safeTreadPersist!=null,this.treadIcon=this.treadPrompt||this.treadPersist,this.treadIcon&&(this.tread=new ie(this.divTread.id)),this.dPrompt.innerText=this.textPrompt=this.getDataAttr("safePrompt","string",""),this.dStatus.innerText=this.textStatus=this.getDataAttr("safeStatus","string",""),this.defH=this.getPropVal("--safe-h"),this.defP=this.getPropVal("--safe-p"),this.getDataAttr("safeThumbW","percent"),this.bEnableEnd=this.enableEnd.bind(this),this.bStart=this.start.bind(this),this.bTrack=this.track.bind(this),this.bStop=this.stop.bind(this),this.bResetEnd=this.resetEnd.bind(this),this.bCommitEnd=this.commitEnd.bind(this),this.observer=new ResizeObserver(s=>{s[0].contentRect.width,this.resize()}),this.observer.observe(this.div),this.resize(),this.sticky=this.div.dataset.sticky!=null,this._enable=this.div.dataset.enable!=null,this._enable==1&&this.enable()}resize(){const t=this.thumbW;if(this.calcThumb(),this.thumbW==t)return;const i=this.locNorm*this.locMax;this.dThumb.style.left=this.defP+i+"px",this.dFill.style.left=this.defP+i-this.width+"px",this.calcPrompt();let s,o;const l=this.div.dataset.safeGradStart;if(l!=null){const h=parseFloat(l);isNaN(h)?s=50:(o=l.indexOf("px"),s=o>0?(this.thumbW+h)/this.width*100:((this.width-this.thumbW)*h/100+this.thumbW)/this.width*100),this.div.style.setProperty("--safe-grad-start",s+"%")}}enable(t=!0){if(t==this._enable)return;if(this._enable=t,this.loc=this.locNorm=0,this.primed&&!t)return this.committed=!0,this.commitPrime(),this;this.div.classList.toggle("disable",!t),this.divChevron.classList.toggle("show",t);let i=500;return t?this.animThumb=this.dThumb.animate([{opacity:0,width:this.defH+"px"},{opacity:1,width:this.thumbW/3+"px",offset:.33},{opacity:1,width:this.thumbW+"px"}],{duration:i,easing:"ease-out",fill:"backwards"}):(this.dThumb.onmousedown=this.dThumb.ontouchstart=null,this.dPrompt.classList.remove("show"),this.treadPersist&&this.tread.hide(),this.animThumb=this.dThumb.animate([{opacity:1,left:this.defP+"px"},{opacity:0,left:this.width-this.thumbW+"px"}],{duration:i,easing:"ease-in"})),this.animThumb.addEventListener("finish",this.bEnableEnd),this}enableEnd(){this.animThumb.removeEventListener("finish",this.bEnableEnd),this.div.classList.toggle("disable",!this._enable),this.dThumb.onmousedown=this.dThumb.ontouchstart=this._enable?this.bStart:null,this._enable&&(this.dPrompt.classList.add("show"),this.treadPersist&&(this.tread.prime(),this.tread.show()))}parse(t){const i=t.v;if(i<0)return console.warn(`${this.id} safeSlide parse FAIL no stage value`);switch(r.stageID[i]){case"ready":this.ready(t);break;case"run":this.update(t);break;case"commit":this.commit(t);break;case"expire":this.expire(t);break}}start(t){t.preventDefault(),t.stopImmediatePropagation(),this.primed=!0,this._ready=this.expired=this.committed=!1,clearTimeout(this.timeout),this.dThumb.style.cursor="grab",document.addEventListener("mousemove",this.bTrack),document.addEventListener("touchmove",this.bTrack),document.addEventListener("mouseup",this.bStop),document.addEventListener("touchend",this.bStop),this.x0=isNaN(t.pageX)?t.changedTouches[0].pageX:t.pageX,this.delta=0,this.calcThumb(),this.div.classList.add("active"),this.dPrompt.classList.add("active"),this.onTron!=null&&this.onTron(`${this.div.id} > start`),this.onBegin!=null&&this.onBegin(this),this.dPrompt.style.transition="none",this.treadIcon&&(this.tread.prime(!1),this.tread.show(!0),this.tread.div.style.transition="none")}track(t){if(!this.primed)return;const i=isNaN(t.pageX)?t.changedTouches[0].pageX:t.pageX;this.loc=Math.round(i-this.x0),this.loc=this.loc<this.locMax?this.loc:this.locMax,this.delta=this.loc=Math.max(this.loc,0),this.onTron!=null&&this.onTron(`${this.div.id} track ${Math.round(this.delta)}`),this.locNorm=this.loc/this.locMax,this.dThumb.style.left=this.defP+this.loc+"px",this.dFill.style.left=this.defP+this.loc-this.width+"px";const s=(this.loc-(this.locMax-(1-this.promptStart)*this.promptW))/((this.promptEnd-this.promptStart)*this.promptW);this.dPrompt.style.opacity=1-s,this.tread.div.style.opacity=1-s*2,this.loc>=this.locMax?(this.dPrompt.classList.remove("show"),!this.expired&&this._ready&&this.execute()):this.dPrompt.classList.add("show"),t.preventDefault()}execute(){document.removeEventListener("mousemove",this.bTrack),document.removeEventListener("touchmove",this.bTrack),this.treadIcon&&this.tread.hide(),this.div.classList.add("hold"),this.sticky?(this.onTron!=null&&this.onTron(`${this.div.id} > prime sticky`),document.removeEventListener("mouseup",this.bStop),document.removeEventListener("touchend",this.bStop),this.dThumb.style.pointerEvents="none",this.dThumb.onmousedown=this.dThumb.ontouchstart=null):this.onTron!=null&&this.onTron(`${this.div.id} > prime`),this.onPrime!=null?this.onPrime(this):this.dRegion.classList.add("confirm")}ready(){this._ready=!0,this.onReady!=null&&this.onReady()}async commit(t){!this.primed||(this.committed=!0,this.sticky||(document.removeEventListener("mouseup",this.bStop),document.removeEventListener("touchend",this.bStop),this.dThumb.style.pointerEvents="none",this.dValueW.classList.remove("show","blink"),this.dValue.innerText=""),this.onTron!=null&&this.onTron(`${this.div.id} > commit`),this.onCommit!=null&&this.onCommit(this,t),this.autoReset?this.commitDelay>0?this.timeout=setTimeout(this.resetPrime.bind(this),this.commitDelay):this.resetPrime():this.commitDelay>0?this.timeout=setTimeout(this.commitPrime.bind(this),this.commitDelay):this.commitPrime())}async commitPrime(){if(!this.committed)return;this.primed=!1;const t=500;this.dStrip.style.opacity=0,this.dStrip.style.transition=t+"ms",await this.delay(t/2),this.dPrompt.style="",this.dPrompt.classList.remove("show"),this.tread.div.style.opacity="",this.tread.div.style.transition="",this.dFill.style.opacity=0,this.dFill.style.transition=t+"ms",this.dThumb.style.left=this.width-this.defP-this.defH+"px",this.dThumb.style.width=this.defH+"px",this.dThumb.style.opacity=0,this.dThumb.style.transition=`${t}ms ease-in`,this.drawStatus(!1),this.dThumb.addEventListener("transitionend",this.bCommitEnd),this.dBg.classList.add("disable")}commitEnd(){this.dThumb.removeEventListener("transitionend",this.bCommitEnd),this.onEnd!=null&&this.onEnd(this),this.dThumb.style="",this.div.classList.remove("active","hold"),this.dThumb.onmousedown=this.dThumb.ontouchstart=null,this.dStrip.style="",this.dStrip.classList.remove("show"),this.dFill.style="",this.status="",this.value="",this.dRegion.classList.remove("confirm"),this.dBg.classList.remove("disable"),this.div.classList.add("disable"),this._enable=!1,this.loc=this.locNorm=0}expire(t){if(console.warn(`${this.id} safeSlide expire, primed:${this.primed}`),!this.primed)return;this.expired=!0;const i=this.onExpire!=null?this.onExpire(this,t):void 0;this.endMouse(i)}stop(t){this.endMouse(),t.preventDefault(),t.stopImmediatePropagation()}endMouse(t=!0){document.removeEventListener("mousemove",this.bTrack),document.removeEventListener("touchmove",this.bTrack),document.removeEventListener("mouseup",this.bStop),document.removeEventListener("touchend",this.bStop),t&&this.resetPrime()}async resetPrime(){if(!this.primed)return;this.primed=!1,this.onTron!==void 0&&this.onTron(`${this.div.id} > endPrime`),this.drawStatus(!1);let t=this.delta/this.locMax*200;t=t>50?t:50,this.committed&&await this.delay(t),this.delta!=0?(this.dThumb.addEventListener("transitionend",this.bResetEnd),this.loc=this.locNorm=0,this.dThumb.style.left=this.defP+"px",this.dThumb.style.transition=`${t}ms ease-in`,this.dFill.style.left=-this.width+"px",this.dFill.style.transition=`${t}ms ease-in`):this.resetEnd(),this.dStrip.classList.remove("show"),this.dPrompt.classList.remove("active"),this.dPrompt.style.opacity="",this.tread.div.style.opacity="",this.tread.div.style.transition="",this.treadPrompt&&!this.treadPersist&&(this.tread.prime(),this.tread.hide()),this.dRegion.classList.remove("confirm")}resetEnd(){this.dThumb.removeEventListener("transitionend",this.bResetEnd),this.onTron!=null&&this.onTron(`${this.div.id} > end`),!this.committed&&this.onCancel!=null&&(this.cancelDelay>0?this.timeout=setTimeout(this.onCancel,this.cancelDelay,this):this.onCancel(this)),this.committed=!1,this.div.classList.remove("confirm"),this.dThumb.style="",this.div.classList.remove("active","hold"),this.dThumb.onmousedown=this.dThumb.ontouchstart=this.bStart,this.dFill.style="",this.dPrompt.classList.add("show"),this.dPrompt.innerText=this.textPrompt,this.dPrompt.style="",this.dValue.innerText="",this.treadPersist&&this.tread.show()}reset(t=0){this.committed&&(t>0?this.timeout=setTimeout(this.expire.bind(this),t):this.expire())}update(t){!this.primed||(this.onChange!=null&&this.onChange(this,t),this.drawStrip())}drawStrip(t=!0){this.dStrip.classList.toggle("show",t)}drawStatus(t=!0){this.dStatus.classList.toggle("show",t),this.dValueW.classList.toggle("show",t),t||this.dValueW.classList.remove("blink")}drawValue(t=!0){this.dValueW.classList.toggle("show",t)}blink(t=.14){this.div.style.setProperty("--blink-rate",t+"s"),this.dValueW.classList.add("blink"),this.dValueW.onanimationend=this.blinkEnd.bind(this)}blinkEnd(t){this.dValueW.classList.remove("blink"),this.dValueW.onanimationend=void 0}calcThumb(){const t=this.div.offsetWidth;t!=this.width&&(this.width=t,this.thumbW=this.dThumb.offsetWidth,this.locMax=this.width-this.thumbW-this.defP*2)}calcPrompt(){let t,i;this.promptW=this.dPrompt.offsetWidth;let s=this.div.dataset.safePromptStart,o=this.div.dataset.safePromptEnd;s=s!=null?s:"0",o=o!=null?o:"50%";const l=parseFloat(s),h=parseFloat(o);isNaN(l)?t=0:(i=s.indexOf("px"),t=i>0?l/this.promptW:l/100),this.promptStart=t,isNaN(h)||(i=o.indexOf("px"),t=i>0?h/this.promptW:h/100),this.promptEnd=t}set value(t){this.dValue.innerText=this._val=t}get value(){return this._val}set prompt(t){this.textPrompt=this.dPrompt.innerText=t,this.calcPrompt()}set status(t){this.textStatus=this.dStatus.innerText=t,this.dStatus.classList.toggle("nil",t=="")}}const gn=`<div id="region" class="region">
    <div id="strip_wrap" class="strip_wrap">
      <div id="strip" class="strip"></div>
    </div>
    <div id="fade_wrap" class="fade_wrap">
      <div id="fade_v" class="fade fade_v"></div>
      <div id="fade_h" class="fade fade_h"></div>
    </div>

    <div id="fill" class="fill"></div>
    <div id="rule" class="rule"></div>
    <div id="peak" class="peak _dmm">
      <div id="divot" class="divot"></div>
      <div id="mark" class="mark"></div>
    </div>
    <div id="flag_wrap" class="flag_wrap _dmm">
      <div id="flag" class="flag">wait</div>
    </div>
  </div>`;class xi extends N{constructor(t){super(t);a(this,"_minVal");a(this,"_maxVal");a(this,"_run",!1);a(this,"_flag",!0);a(this,"maxW");a(this,"autoStop",!1);a(this,"lastTime");a(this,"lastPeak");a(this,"updateRate",33);a(this,"updateInt");a(this,"decay");a(this,"decayComp");a(this,"peak",0);a(this,"peakTimeout");a(this,"onPeak");this.link("info"),this.div.insertAdjacentHTML("beforeend",gn),this.div.classList.add("tna_Meter"),this.dRegion=this.getDiv("region"),this.dRule=this.getDiv("rule"),this.dStrip=this.getDiv("strip"),this.dStripW=this.getDiv("strip_wrap"),this.dFade=this.getDiv("fade_wrap"),this.getDiv("fade_v"),this.getDiv("fade_h"),this.dFill=this.getDiv("fill"),this.dPeak=this.getDiv("peak"),this.getDiv("mark"),this.dDivot=this.getDiv("divot"),this.dFlagW=this.getDiv("flag_wrap"),this.dFlag=this.getDiv("flag"),this.attrFill=this.div.dataset.fill!=null,this.attrPeak=this.div.dataset.peak!=null,this.decay=this.getDataAttr("meterDecay","float",.2),this._minVal=this.getDataAttr("meterMin","float",0),this.maxVal=this.getDataAttr("meterMax","float",100),this.defH=this.getDataAttr("meterH","pixel"),this.minW=this.getDataAttr("meterMinW","pixel",6),this.peakTimeout=this.getDataAttr("meterPeakTimeout","number",1e3),this.peakW=this.getDataAttr("meterPeakW","pixel"),this.peakPad=this.getDataAttr("meterPeakP","pixel"),this.markW=this.getDataAttr("meterMarkW","pixel");const i=this.getDataAttr("meterDivision","integer");if(i>=3&&!isNaN(i))for(let s=1;s<=i+1;s++){let o=document.createElement("div");o.classList.add("mark"),this.dRule.appendChild(o)}if(this.div.dataset.meterRuleDouble!=null){const s=this.dRule.cloneNode(!0);this.dRegion.appendChild(s),s.id=`ruler_alt_${this.id}`,s.classList.add("alt")}this.bUpdate=this.update.bind(this),window.addEventListener("resize",this.resize.bind(this)),this.resize()}set maxVal(t){this._maxVal=t,this.range=this._maxVal-this._minVal,this.decayComp=this.range*this.decay}set flag(t){this._flag=t,this.dFlagW.style.display=t?"":"none"}set run(t){t!=this._run&&(this._run=t,t?(this.lastTime=this.lastPeak=performance.now(),this.updateInt=setInterval(this.bUpdate,this.updateRate)):(clearInterval(this.updateInt),this.set(0)))}resize(t){this.width=this.div.offsetWidth;let i=this.dRule.children.length;this.ruleSpacing=i!=0?this.width/(i-1):0,this.maxW=this.width-this.markW/2-this.peakW-this.peakPad-this.minW,this.draw()}draw(){const t=this.maxW*(this._val-this._minVal)/this.range;this.dFill.style.width=t+this.minW+"px";let i=this.maxW*(this.peak-this._minVal)/this.range;i=i>this.maxW?this.maxW:i,this.dPeak.style.left=i+this.peakPad+this.minW+"px",this.dRule.childNodes.forEach((s,o)=>{const l=t>Math.floor(o*this.ruleSpacing)+this.markW;s.classList.toggle("invert",l)})}update(){const t=performance.now(),i=this.decayComp*(1+this.autoStop*4)*(t-this.lastTime)/1e3;this.peak=Math.max(this.peak,this._val),this.autoStop&&this.peak==0&&(this.autoStop=!1,this._run=!1,clearInterval(this.updateInt)),this.draw(),this.peak>=this._maxVal&&t>this.lastPeak+this.peakTimeout&&(this.lastPeak=t,this.onPeak!=null&&this.onPeak(this)),this.peak-=i,this.peak=this.peak<0?0:this.peak,this.lastTime=t}render(t=this._view){super.render(t),this.dPeak.classList.toggle("show",t)}stop(){this.autoStop=!0,this._val=0}reset(){this.peak=0,this._val=0,this._run||this.draw()}busy(t=!0){t?(this.div.classList.add("busy"),this.dStripW.ontransitionend=null,this.dStrip.classList.add("move")):(this.div.classList.remove("busy"),this.dStripW.ontransitionend=this.busyEnd.bind(this))}busyEnd(t){this.div.classList.remove("busy"),this.dStripW.ontransitionend=null,this.dStrip.classList.remove("move")}set(t){this._val=Math.min(t,this._maxVal),this._run||this.draw(),super.set(t)}}const vn=`<div id="region" class="region">
    <div id="debug" class="debug">
      <div id="lsd" class="lsd"></div>
      <div id="val" class="val"></div>
    </div>
    <div id="portal" class="portal">
      <div id="wrap" class="wrap _dmm"></div>
      <div id="fade" class="fade"></div>
    </div>
    <div id="bezel" class="bezel">
      <div class="icon_wrap">
        <div id="up_icon"></div>
      </div>
      <div class="icon_wrap">
        <div id="down_icon" class="down"></div>
      </div>
    </div>
    <div class="zone">
      <div id="up_zone"></div>
      <div id="down_zone"></div>
    </div>
  </div>`;var _n={HTML:vn};class pn extends x{constructor(t,i){super(t);a(this,"_index");a(this,"_target");a(this,"_tron",!1);a(this,"_enable",!1);a(this,"_focus",!1);a(this,"_active",!1);a(this,"_hook",!1);a(this,"_primed",!1);a(this,"_hold",!1);a(this,"_solo",!1);a(this,"_base",10);a(this,"_limited",!1);a(this,"_limitL");a(this,"_limitH");a(this,"_loop",!1);a(this,"_dir",1);a(this,"_speed",1);a(this,"_factor",2);a(this,"_defH");a(this,"_defP");a(this,"_def");a(this,"_start");a(this,"_clickW",250);a(this,"_blurD",2e3);a(this,"_blurTO");a(this,"_moveD");a(this,"_lsd",0);a(this,"_loc",0);a(this,"_y",0);a(this,"_lsd0");a(this,"_v0");a(this,"_y0");a(this,"_t0");a(this,"_lastV");a(this,"_lastY");a(this,"control");a(this,"onTron");this.div.insertAdjacentHTML("afterbegin",_n.HTML),this.div.classList.add("tna_Numbler"),this.dRegion=this.getDiv("region"),this.dPortal=this.getDiv("portal"),this.dWrap=this.getDiv("wrap"),this.getDiv("fade"),this.dBezel=this.getDiv("bezel"),this.dUpIcon=this.getDiv("up_icon"),this.dDownIcon=this.getDiv("down_icon"),this.dUp=this.getDiv("up_zone"),this.dDown=this.getDiv("down_zone"),this.dUp.tna_click=1,this.dDown.tna_click=-1,this.dBugLSD=this.getDiv("lsd"),this.dBugVal=this.getDiv("val");const s='<polyline points="0,65 50,35 100,65"/>';this.iconUp=new C(this.dUpIcon).static().show(),this.iconUp.add=s,this.iconUp.index=0,this.iconDown=new C(this.dDownIcon).static().show(),this.iconDown.add=s,this.iconDown.index=0,this._defH=this.getPropVal("--numbler-h"),this._defP=this.getPropVal("--numbler-p"),this._def=parseFloat(this._defH-this._defP),this.durF=this.getPropVal("--numbler-t-focus"),this.bSpinFrame=this.spinFrame.bind(this),this.bSnapFrame=this.snapFrame.bind(this),this.bStart=this.start.bind(this),this.bTrack=this.track.bind(this),this.bStop=this.stop.bind(this),this._val=0,this._target=this}format(){for(let t=0;t<=this._base;t++){const i=document.createElement("div");i.classList.add("digit"),i.id=`${this.id}_digit_${t}`,this._dir>0?this.dWrap.insertAdjacentElement("afterbegin",i):this.dWrap.appendChild(i),i.innerText=this.control.onBuild!=null?this.control.onBuild(this,t%this._base):(t%this._base).toString(16)}return this}incr(t=0,i=120){if(t!=0)return this._tron&&this.onTron!=null&&this.onTron(this.div.id+Kt.sprintf(" incr %+1i >> val: %04i",t,this.value).replace("-","\u2212")),this.blurCancel(),this.blurDelay(),this.roll(this.value+t,i),this.control.execute(this),this}roll(t,i=120){if(this._loop)t>this._limitH?(t=this._limitL,console.warn(`${this.id} roll loop +1 ${this._y}`)):t<this._limitL&&(t=this._limitH,console.warn(`${this.id} roll loop -1 ${this._y}`));else{if(t<this._limitL||t>this._limitH)return console.warn(`${this.id} roll out of limit val:${this.value}`);this._limited||(t=(t+this._base)%this._base)}return this.move(t,i),this.value=t,this.control.flow(this),this}spin(t,i=120){if(t!=this.value)return this.move(t,i),this.value=t,this}move(t,i){this._v0=this.value,this._y0=this._y;const s=this._base<=10?this._lsd:this.value,o=t%this._base-s;let l=Math.abs(o)>this._base/2?(Math.abs(o)-this._base)*Math.sign(o):o;const h=this._base-Math.abs(l);return l=h<Math.abs(l)?h:l,this.yFinal=this._y0+this._def*this._dir*l,this.cancelFrame(),Math.abs(l)>0&&i!=0?(this._hold=!0,this.draw(),this._moveD=Math.max(100,Math.abs(l)*i),this._start=performance.now(),this.req=window.requestAnimationFrame(this.bSpinFrame)):this.set(),l}spinFrame(t){this.calcFrame(t)?(this.req=window.requestAnimationFrame(this.bSpinFrame),this.draw()):(this.set(),this.dUpIcon.classList.remove("active"),this.dDownIcon.classList.remove("active"),this.req=void 0,this._hold=!1,this._hook&&(this._hook=!1,this.control.spinEnd(this)))}calcFrame(t){const i=t-this._start,s=this.easeInOutSine(i,0,1,this._moveD);return this._y=this._y0+(this.yFinal-this._y0)*s,i<this._moveD}busy(t=!0){return this._hook=t,this.control._busy++,this}cancelFrame(){this._hold=!1,this.req!=null&&(window.cancelAnimationFrame(this.req),this.req=void 0,this._tron&&console.warn(`${this.id} cancelFrame anim running`)),this.set()}start(t){this.cancelFrame(),this.control._index=this._index,this._primed=!0,this._start=t.timeStamp,document.addEventListener("mousemove",this.bTrack),document.addEventListener("touchmove",this.bTrack),document.addEventListener("mouseup",this.bStop),document.addEventListener("touchend",this.bStop),this._t0=isNaN(t.pageY)?t.changedTouches[0].pageY:t.pageY,this._y0=this._y,this._v0=this.value,this._lsd0=this._lsd,this._focus||this.control.focus(this),this.blurCancel(),this.activeCancel(),this.div.classList.add("focus"),this.control.begin(this),t.preventDefault(),t.stopImmediatePropagation()}track(t){if(!this._primed)return;const i=(isNaN(t.pageY)?t.changedTouches[0].pageY:t.pageY)-this._t0,s=this._defH*this._factor,o=Math.min(Math.abs(i),s),l=this.easeLinear(o,0,1,s),h=i*l*this._speed,g=h/this._def;if(this._y=this._y0+h,this._limited){const c=this._limitL,E=this._limitH;if(this._loop){const d=this.range+1,T=g>0?-Math.floor((g+this._v0-c+.5)/d):Math.floor((-g+E-this._v0+.5)/d);this.vFinal=g+T*d+this._v0,this._y=this.vFinal*this._def}else this._y=this._dir>0?this.clamp(this._y,c,E):this.clamp(this._y,-E,c)}if(this.value=Math.round(this.vFinal),this.draw(),this._tron&&this.onTron!=null){let c=`${this.div.id} test: %5.2f y: %+04i val: %04i`;c=Kt.sprintf(c,0,this._y,this.value),this.onTron(c.replace("-","\u2212"))}this._lsd0!=this._lsd&&(this.control.flow(this),this.control.execute(this),this._lsd0=this._lsd),t.preventDefault(),t.stopImmediatePropagation()}stop(t){const i=(isNaN(t.pageY)?t.changedTouches[0].pageY:t.pageY)-this._t0;document.removeEventListener("mousemove",this.bTrack),document.removeEventListener("touchmove",this.bTrack),document.removeEventListener("mouseup",this.bStop),document.removeEventListener("touchend",this.bStop),this._primed&&(this._primed=!1,this.control.end(),t.timeStamp-this._start<this._clickW&&Math.abs(i)<this._def/2?this.click(t):this.snap(),t.preventDefault(),t.stopImmediatePropagation())}click(t){const i=t.target.tna_click;i!=null&&(i>0&&this.dUpIcon.classList.add("active"),i<0&&this.dDownIcon.classList.add("active"),this.incr(i))}snap(){this.blurDelay();const t=-this._loc%this._def;if(t!=0){const i=t>=this._defH/2?t-this._def:t;this._y0=this._y,this.yFinal=this._y+i,this._moveD=500,this.cancelFrame(),this._start=performance.now(),this.req=window.requestAnimationFrame(this.bSnapFrame)}else this.snapEnd();this.control.execute(this)}snapFrame(t){const i=t-this._start,s=this.easeOutElastic(i,0,1,this._moveD);this._y=this._y0+(this.yFinal-this._y0)*s,i<this._moveD?(this.draw(),this.req=window.requestAnimationFrame(this.bSnapFrame)):(this.req=void 0,this._y=this.yFinal,this.snapEnd())}snapEnd(){this.draw()}draw(t=!1){if(!t&&this._y==this._lastY)return;const i=this._def*this._base;return this._loc=this._y-Math.ceil(this._y/i)*i,this.dWrap.style.top=this._loc+"px",this._lastY=this._y,this}calc(t=this._y){let i;return this._limited?(i=Math.round(t/this._def),i=this._dir>0?i:-i):(i=Math.round(this._loc/this._def),i=this._dir>0?i+this._base:-i,i=Math.abs(i)==this._base?0:i),i}set(t=this.value){return this._dir>0?this._y=t*this._def:this._y=-t*this._def,this.value=t,this.draw(),super.set(t),this}active(t=!0){return this._active=t,t?this.div.classList.add("active"):(this.div.classList.remove("active"),this.dPortal.style.transition=`${this.durF}s ease-in`,this.dPortal.ontransitionend=()=>{this.dPortal.style.transition="",this.dPortal.ontransitionend=null}),this}activeCancel(){this.div.classList.remove("active"),this.dPortal.style.transition="",this.dPortal.ontransitionend=null}focus(t=!0){return t?(clearTimeout(this._blurTO),this.dBezel.classList.add("show"),this._focus=t):this.blur(),this.div.style.zIndex=t?10:"",this}blur(){if(!!this._focus)return this._focus=!1,clearTimeout(this._blurTO),this.div.classList.remove("focus"),this.dPortal.style.transition=`${this.durF}s ease-in`,this.dBezel.style.transition=`${this.durF*2}s ease-in`,this.dBezel.classList.remove("show"),this.dBezel.ontransitionend=()=>{this.dPortal.style.transition="",this.dBezel.style.transition="",this.dBezel.ontransitionend=null},this.control.blur(this),this}blurDelay(t=this._blurD,i=1e3){return this._blurTO=setTimeout(this.blur.bind(this),t,i),this}blurCancel(){return this.dPortal.style.transition="",this.dBezel.style.transition="",clearTimeout(this._blurTO),this}limit(t,i){return this._limitL=t,this._limitH=i,this._limited=!0,this.range=i-t,this}tron(t=this._tron){return this._tron=t,this.div.classList.toggle("tron",t),this}set enable(t){t!=this.enable&&(this._enable=t,this.div.classList.toggle("disable",!t),this.dUp.onmousedown=this.dUp.ontouchstart=this.dDown.onmousedown=this.dDown.ontouchstart=this._enable?this._target.bStart:null)}get enable(){return this._enable}target(t){this._target=t}set value(t){t!=this._lastV&&(this._val=t,this._lsd=Number(String(this._val).slice(-1)),this.dBugLSD.innerText=this.control._digitN!=1?this._lsd:"\u2212",this.dBugVal.innerText=this._val,this._lastV=t)}get value(){return this._val}}class li extends x{constructor(t){super(t);a(this,"_index");a(this,"_busy",0);a(this,"_valLast");a(this,"_focusCount");a(this,"_digitN");a(this,"_base",10);a(this,"_loop",!1);a(this,"_limited",!1);a(this,"_limitL");a(this,"_limitH");a(this,"_range");a(this,"list");a(this,"_onBuild");a(this,"onSet");a(this,"onBegin");a(this,"onEnd");a(this,"onExecute");a(this,"onChange");a(this,"onSpinEnd");a(this,"onFocus");a(this,"onBlur");this.div.classList.add("tna_Numbler_Control"),this._val=0}init(){this._focusCount=0,this.list=[],this._digitN=arguments.length,this.setProp("--numbler-n",this._digitN);for(let t=0;t<this._digitN;t++){const i=this._digitN-1-t,s=new pn(this.div.createDiv(`${this.id}_${i}`));s.control=this,s._index=i,s._base=arguments[t],ut.add(s),this.list.unshift(s)}return this}set(t){if(!!this.validate(t)){if(this._tron&&console.log(`${this.id} control set ${t}`),this._val=t,this.list.forEach((i,s)=>{let o=t;s>0&&(o=Math.floor(t/Math.pow(this._base,s))),i.set(o)}),this.onSet!=null){const i=this.list[0];this.list.forEach(s=>s.set(this.onSet(s,i)))}this.onChange!=null&&this.onChange(this)}}begin(t){this.onBegin!=null&&this.onBegin(this,t)}end(t){this.onEnd!=null&&this.onEnd(this,t)}execute(t){this.onExecute!=null&&this.onExecute(this,t),this.value!=this._valLast&&(this.onChange!=null&&this.onChange(this),this._valLast=this.value)}edit(t=!0){this.div.classList.toggle("edit",t)}roll(t){!this.validate(t)||this.list.forEach((i,s)=>{let o=t;s>0&&(o=Math.floor(t/Math.pow(this._base,s))),i.roll(o)})}spin(t){!this.validate(t)||(this.list.forEach((i,s)=>{let o=t;s>0&&(o=Math.floor(t/Math.pow(this._base,s))),i.busy().spin(o)}),this.value=t)}flow(t){const i=t.value,s=t._index;let o;if(this.onSet!=null)return this.list.forEach(l=>l.spin(this.onSet(l,t)));for(let l=s+1;l<this._digitN;l++)o=Math.floor(i/Math.pow(this._base,l-s)),this.list[l].spin(o);for(let l=s-1;l>=0;l--)if(this._loop)o=this.sliceVal(1,this.list[l].value)+i*Math.pow(this._base,s-l),this.list[l].spin(o);else if(i==t._limitH){const h=this.list[l]._lsd,g=this.list[l]._limitH,c=this.sliceVal(1,g);o=h<=c?i:c,o+=i*Math.pow(this._base,s-l),this.list[l].spin(o)}}change(t){if(this._limited)for(let i=t._index-1;i>=0;i--){let s=0;for(let o=this._digitN-1;o>i;o--)s+=this.list[o]._lsd*Math.pow(this._base,o-i-1);s=s*this._base+this.list[i]._lsd,this._index!=i&&this.list[i].set(s)}this.value!=this._valLast&&(this.onChange!=null&&this.onChange(this),this._valLast=this.value)}focus(t){this._focusCount++,this._focus=t._index,this.onFocus!=null&&this.onFocus(this),this.list.forEach((i,s)=>{i.focus(s==this._focus),t!=i&&i.active()})}focusAll(t=!0){return this.list.forEach((i,s)=>i.focus(t)),t||(this._focusCount=0),this}blur(t){this._focusCount--,this._focusCount==0&&this.onBlur!=null&&this.onBlur(this),this.list.forEach(i=>{i!=t&&i.active(!1)})}blurAll(){return this.list.forEach((t,i)=>t.blur()),this}spinEnd(t){this._busy--,this._busy==0&&this.onSpinEnd!=null&&this.onSpinEnd(this)}format(){return this.list.forEach((t,i)=>t.format()),this}clear(){this.list!=null&&(this.list.forEach(t=>{t.div.remove()}),this.list=[],this._digitN=0)}limit(t,i){this._limited=!0;const s=Math.pow(this._base,this._digitN),o=this._digitN>1;return this._limitL=t-Math.floor(t/s)*s,this._limitH=o?i-Math.floor(i/s)*s:i,this._range=i-t,(t>=s||i>s&&o)&&console.warn(`${this.id} limit ${this._limitL}(${t})..${this._limitH}(${i}) truncate`),this.list.forEach((l,h)=>{let g=this._limitL,c=this._limitH;h>0&&(g=Math.floor(this._limitL/Math.pow(this._base,h)),c=Math.floor(this._limitH/Math.pow(this._base,h))),l.limit(g,c).draw(!0),l._solo=!o}),this}validate(t){let i;return t==null?(console.warn(`${this.id} validate FAIL: %o`,void 0),!1):(i=t<Math.pow(this._base,this._digitN)||this._digitN==1,i?(this._limited&&(i=t>=this._limitL&&t<=this._limitH,i||console.warn(`${this.id} validate FAIL: "${t}" out of limits: ${this._limitL}..${this._limitH}`)),i):(console.warn(`${this.id} validate FAIL: "${t}" out of range, digitN:${this._digitN} base:${this._base}`),!1))}target(t,i){return this.list[t].target(this.list[i]),this}enable(t=!0){return this.list.forEach((i,s)=>i.enable=t),this}tron(t=!0){return this.list.forEach(i=>i.tron(t)),this.div.classList.toggle("tron",t),this}set onBuild(t){this._onBuild=t,this.format()}get onBuild(){return this._onBuild}set value(t){this.set(t)}get value(){return this.list!=null?this.list[0].value:void 0}set base(t){if(Array.isArray(t)){if(t.length!=this._digitN)return console.warn(`${this.id} setBase param mismatch ${t.length}`);for(let i=0;i<this._digitN;i++){const s=t[this._digitN-1-i];this.list[i]._base=s}}else this.list.forEach(i=>i._base=t)}speed(t){if(Array.isArray(t)){if(t.length!=this._digitN)return console.warn(`${this.id} setSpeed param mismatch ${t.length}`);for(let i=0;i<this._digitN;i++){const s=t[this._digitN-1-i];this.list[i]._speed=s}}else this.list.forEach(i=>i._speed=t);return this}loop(t=!0){return this._loop=t,this.list.forEach(i=>i._loop=t),this}stringVal(t=this.value){return String(t).padStart(this._digitN,"0")}sliceVal(t,i=this.value){return Number(this.stringVal(i).slice(-t))}}class mn extends x{constructor(t,i="object"){super(t,i);a(this,"_focus",!1);a(this,"list",[]);a(this,"busyList",[]);a(this,"onGroupFocus");a(this,"onBlurFocus")}add(t){this.list.push(t),this.busyList.push(0)}focus(t){const i=this.list.findIndex(s=>s==t);if(i<0)return console.warn(`${this.id} focus ${t.id} not found`);this.busyList[i]=1,this.calcFocus()}blur(t){const i=this.list.findIndex(s=>s==t);if(i<0)return console.warn(`${this.id} blur ${t.id} not found`);this.busyList[i]=0,this.calcFocus()}calcFocus(){let t=0;this.busyList.map(i=>t+=i),t==0&&this._focus?(this._focus=!1,this.onGroupBlur!=null&&this.onGroupBlur(this)):this._focus||(this._focus=!0,this.onGroupFocus!=null&&this.onGroupFocus(this))}}const bn=`<div id="region" class="region">
      <div id="hours" class="hours"></div>
      <div id="colon" class="colon _dmm">:</div>
      <div id="mins" class="mins"></div>
      <div id="period" class="period _dmm">X</div>
      <div id="bezel" class="bezel">
        <div id="bracket_L" class="bracket">
          <div class="def"></div>
        </div>
        <div id="bracket_R" class="bracket right">
          <div class="def"></div>
        </div>
      </div>
    </div>
  </div>`;var wn={HTML:bn};class yn extends mn{constructor(t){super(t,"id");a(this,"_edit",!1);a(this,"_bezel",!1);a(this,"_tron",!1);a(this,"_bts",!1);a(this,"hour24h");a(this,"hours");a(this,"mins");a(this,"valH");a(this,"valM");a(this,"valP");a(this,"lastH");a(this,"lastM");a(this,"onBegin");a(this,"onEnd");a(this,"onExecute");a(this,"onChange");a(this,"onFocus");a(this,"onBlur");this.div.insertAdjacentHTML("beforeend",wn.HTML),this.div.classList.add("tna_Numbler_T"),this.getDiv("region"),this.dHours=this.getDiv("hours"),this.dMins=this.getDiv("mins"),this.getDiv("colon"),this.dPeriod=this.getDiv("period"),this.dBezel=this.getDiv("bezel"),this.getDiv("bracket_L"),this.getDiv("bracket_R"),this.hours=new li(this.dHours.id),this.mins=new li(this.dMins.id),this.mins.init(6,10).format().limit(0,59).speed([1,2]).loop(),this.mins.enable(),this.mins.onChange=i=>{this.valM=i.value,this.change(i)},this.format(),this.hours.onBegin=this.mins.onBegin=(i,s)=>this.begin(i,s),this.hours.onEnd=this.mins.onEnd=(i,s)=>this.end(i,s),this.hours.onExecute=this.mins.onExecute=(i,s)=>this.execute(i,s),this.hours.onFocus=this.mins.onFocus=i=>{this.focus(i);let s;i==this.hours?(this.hour24h||this.dPeriod.classList.add("act"),s=this.mins):s=this.hours,s.blurAll()},this.hours.onBlur=this.mins.onBlur=i=>{i==this.hours&&this.dPeriod.classList.contains("act")?(this.dPeriod.classList.remove("act"),this.dPeriod.classList.add("prime"),this.dPeriod.ontransitionend=()=>{this.dPeriod.classList.remove("prime"),this.dPeriod.ontransitionend=null}):this.dPeriod.classList.remove("prime"),this.blur(i)},this.add(this.hours),this.add(this.mins),this.edit(!1)}format(t=!1){this.hour24h=t;const i=this.hours.value;return this.hours.clear(),t?(this.hours.init(3,24),this.hours.onBuild=(s,o)=>o%10,this.hours.onChange=s=>{this.dPeriod.innerText="",this.valH=s.value,this.valP="",this.change(s)},this.hours.onSet=void 0):(this.hours.init(2,12),this.hours.onBuild=(s,o)=>{let l=o%10;switch(s._index){case 0:o%12==0&&(l=2);break;case 1:l==0&&(l="");break}return l},this.dots(this._edit),this.hours.onChange=s=>{const o=s.value;this.valH=o%12,o%12==0&&(this.valH=12),this.valP=o<12||o==0?"A":"P",this.dPeriod.innerText=this.valP,this.change(s)},this.hours.onSet=(s,o)=>{let l=s.value;if(s._index==1){const h=o.value%12;l=Number(h==0||h>=10)}return l}),this.hours.target(1,0),this.hours.limit(0,23).loop().speed(1).enable(),this.hours.set(i),this.tron(this._tron),this}dots(t=!0){this.hour24h||[0,2].forEach(i=>{const s=this.hours.list[1].dWrap.children[i];s.innerText="\u2022",s.classList.toggle("hide",!t)})}begin(t,i){this.onBegin!=null&&this.onBegin(this,t,i)}end(t,i){this.onEnd!=null&&this.onEnd(this,t,i)}execute(t,i){let s;switch(t){case this.hours:const o=this.hours.value;o!=this.lastH&&(s=!0,this.lastH=o);break;case this.mins:const l=this.mins.value;l!=this.lastM&&(s=!0,this.lastM=l);break}s&&this.onExecute!=null&&this.onExecute(this,t,i)}change(t){this.onChange!=null&&this.onChange(t)}set(t,i){this.hours.set(t),this.mins.set(i)}edit(t=!0){return this._edit=t,this.div.classList.toggle("edit",t),this.div.classList.toggle("lock",!t),this.hours.edit(t),this.dots(t),this.mins.edit(t),t||(this.hours.blurAll(),this.mins.blurAll()),this}tron(t=!0){return this._tron=t,this.div.classList.toggle("tron",t),this.hours.tron(t),this.mins.tron(t),this}bts(t=!0){return this._bts=t,this.div.classList.toggle("bts",t),this}get stringVal(){return sprintf("%02i:%02i%s",this.valH,this.mins.value,this.valP)}get value(){return sprintf("%02i:%02i",this.hours.value,this.mins.value)}}class gt extends C{constructor(e,t){super(e),this.link(t),this.div.classList.add("tna_Twirl"),this.add='<polygon points="0,88 100,88 50,0"/>',this.def()}draw(){this.div.classList.toggle("open",this.value)}}const xn=`
  <g id="padlock_offset" transform="translate(34 0)">
    <rect fill-opacity="0" transform="translate(50 0)" x="0" y="0" width="100" height="100" fill="blue" stroke="none"></rect>
    <g id="shackle_wrap">
      <g id="shackle" stroke-miterlimit="1" stroke="var(--icon-fg)" fill="none">
        <path transform="translate(50 -5)" vector-effect="non-scaling-stroke" d="M28,74 L28,39 C28,26.8497355 37.8497355,17 50,17 C62.1502645,17 72,26.8497355 72,39 L72,59 L72,59"></path>
      </g>
    </g>
    <rect transform="translate(50 0)" x="10" y="50" width="80" height="50" fill="var(--icon-fg)" stroke="none"></rect>
  </g>`;class kn extends zt{constructor(e,t){super(e),this.link(t),this.div.classList.add("tna_Padlock"),this.add=xn,this.scale(.9).translate(5,10).def(),this.div.querySelector("#padlock_offset").classList.add("padlock_offset"),this.div.querySelector("#shackle_wrap").classList.add("shackle_move"),this.div.querySelector("#shackle").classList.add("shackle_swing")}draw(){this.div.classList.toggle("open",this.value),this.div.classList.toggle("lock",!this.value)}size(e){return this.sizeXY(e*2,e),this.div.style.setProperty("--padlock-h",e+"px"),this}}const Ln=`<div id="region" class="region">
    <div id="wrap" class="wrap">
      <svg viewBox="0 0 100 100">
        <g id="svg_wrap" class="svg_wrap">
          <g id="svg_rotate" class="svg_rotate">
            <g transform="translate(50 50)">
              <path id="rule" class="rule" />
            </g>
          </g>
          <clipPath
            id="fill_clip"
            class="fill_clip"
            transform="translate(50 50)"
          >
            <path id="fill" class="fill" />
          </clipPath>
          <foreignObject
            id="fill_grad"
            class="fill_grad"
            width="100"
            height="100"
            ><div></div>
          </foreignObject>
          <g transform="translate(50 50)">
            <path id="head" class="head" />
          </g>
        </g>
      </svg>
    </div>
    <div id="label" class="label"></div>
  </div>`;class Yt extends N{constructor(t){super(t);a(this,"_grad",!0);a(this,"height");a(this,"gap");a(this,"fillS");a(this,"ruleS");a(this,"fillR");a(this,"ruleR");a(this,"_head");a(this,"headS");a(this,"headCalc");a(this,"cRot");a(this,"cMin",0);a(this,"cMax",360);a(this,"range");a(this,"gapCalc");a(this,"veloMin",250);a(this,"v0");a(this,"t0");this.fuse(),this.link("info"),this.div.insertAdjacentHTML("beforeend",Ln),this.div.classList.add("tna_Dial"),this.dRegion=this.getDiv("region"),this.dWrap=this.getDiv("wrap"),this.dWrapR=this.getDiv("svg_wrap"),this.dWrapR=this.getDiv("svg_rotate"),this.dHead=this.getDiv("head"),this.dFill=this.getDiv("fill"),this.dRule=this.getDiv("rule"),this.dLabel=this.getDiv("label"),this.dFillClip=this.getDiv("fill_clip"),this.dFillGrad=this.getDiv("fill_grad"),this.dFillGrad.setAttribute("clip-path",`url(#${this.dFillClip.id})`),this.height=this.getPropVal("--dial-h"),this.cRot=this.getPropVal("--dial-rot"),this.cMin=this.getPropVal("--dial-min"),this.cMax=this.getPropVal("--dial-max"),this.gap=this.getPropVal("--dial-gap"),this.headS=this.getPropVal("--dial-head-x"),this.fillS=this.getPropVal("--dial-x")*100/this.height,this.ruleS=this.getPropVal("--dial-rule-x")*100/this.height,this.bFrame=this.frame.bind(this),this.resize()}resize(){this.range=this.cMax-this.cMin,this.fillR=50-this.fillS,this.ruleR=50-this.ruleS,this.dFill.setAttribute("transform",`rotate(${this.cRot+.75})`),this.dHead.setAttribute("d",`M0,-50 L0,${-this.fillR}`),this.headCalc=this._head?this.headS/(Math.PI*this.height)*360/2:0,this.gapCalc=this.cMin+this.headCalc+this.gap}draw(t){t=t==null?this._val:t;const i=t*this.range;let s=!0,o=!0;if(t==0?(this._head?this.seg(this.dRule,this.ruleR,50,this.gapCalc,this.cMax):this.range==360?this.donut(this.dRule,this.ruleR,50):this.seg(this.dRule,this.ruleR,50,this.cMin,this.cMax),o=!1):t==1?(this.range==360?this.donut(this.dFill,this.fillR,50):this.seg(this.dFill,this.fillR,50,this.cMin,this.cMax),s=!1):i>this.cMax-this.gap?(this.seg(this.dFill,this.fillR,50,this.cMin,this.cMin+i),s=!1):(this.seg(this.dRule,this.ruleR,50,this.cMin+i+this.gapCalc,this.cMax-this.gapCalc*(this.range==360)),this.seg(this.dFill,this.fillR,50,this.cMin,this.cMin+i)),this.dFill.style.visibility=o?"visible":"hidden",this.dRule.style.visibility=s?"visible":"hidden",this._grad){let l=[`conic-gradient( from ${this.cRot}deg,`,"var(--dial-g0) 0deg,",`var(--dial-g1) ${i}deg`,")"];this.dFillGrad.style.backgroundImage=l.join(" ")}this._head&&this.dHead.setAttribute("transform",`rotate(${i+this.cRot})`)}move(t,i=500){if(t!=this._val)return this.vFinal=t,this.v0=this._val,this.moveD=Math.max(this.veloMin,Math.abs(t-this.v0)*i),this.cancelFrame(),this.t0=performance.now(),this.req=window.requestAnimationFrame(this.bFrame),this}frame(t){const i=t-this.t0;if(i>=this.moveD)window.cancelAnimationFrame(this.req),this.set(this.vFinal);else{const s=this.easeInOutSine(i,0,1,this.moveD),o=this.v0+(this.vFinal-this.v0)*s;this.set(o),this.req=window.requestAnimationFrame(this.bFrame)}}cancelFrame(){this.req!=null&&(window.cancelAnimationFrame(this.req),this.req=void 0),this.set()}set(t=this._val){return this._val=t,super.set(t),this}arc(t,i,s,o){const l=this.plot(i,s),h=this.plot(i,o),g=~~(o-s>180),c=`M${l.x},${l.y} A${i},${i} 0 ${g} 1 ${h.x},${h.y}`;t.setAttribute("d",c)}seg(t,i,s,o,l){const h=this.plot(i,o),g=this.plot(i,l),c=this.plot(s,o),E=this.plot(s,l),d=~~(l-o>180),T=`M${h.x},${h.y} A${i},${i} 0 ${d} 1 ${g.x},${g.y} L${E.x},${E.y} A${s},${s} 0 ${d} 0 ${c.x},${c.y}Z`;t.setAttribute("d",T)}circle(t,i){const s=`M${-i},0 A${i},${i} 0 1 0 ${i},0 A${i},${i} 0 1 0 ${-i},0Z`;t.setAttribute("d",s)}donut(t,i,s){const o=`M${-s},0 A${s},${s} 0 1 1 ${s},0 A${s},${s} 0 0 1 ${-s},0Z`,l=`M${-i},0 A${i},${i} 0 1 0 ${i},0 A${i},${i} 0 0 0 ${-i},0Z`;t.setAttribute("d",o+l)}plot(t,i){const s=Math.PI*(i-90)/180;return{x:t*Math.cos(s),y:t*Math.sin(s)}}grad(t=!0){return this._grad=t,this}head(t=!0){return this._head=t,this.dHead.style.visibility=t?"visible":"hidden",this}}const ht={};let K;function Dn(){const n=new M("debug_button_1").enable();n.value=!0,n.label="Menu Icon",n.status="Disconnect",n.onExecute=i=>{i.ext_label(i),i.value?(b.prime(),b.open()):b.close()},n.ext_label=async i=>{i.status="",await i.delay(500),i.value^=!0,i.status=i.value?"Connect":"Disconnect"},n.onExecute(n),ht.accord=new y("accord_test"),ht.twirl=new gt("twirl").target("twirl_item").show(),ht.twirl.onExecute=i=>{i.toggle(),ht.accord.toggle(i.value)},ht.icon=K=new C("icon_test").prime().show(),K.symbol("eye").symbol("warn_tna").def(),K.ext_label=i=>i.label=i._highlight?"Don't Touch":"Look, But...",K.ext_label(K),K.onExecute=i=>{i.cycle().highlight(-1).ext_label(i)},K.onRender=i=>console.log("/test icon onRender"),ut.add(K);const e=new ie("tread_test").prime(),t=new M("button_tread");t.label="Tread",t.enable(),t.value=!1,t.onExecute=i=>{i.value^=!0,e.toggle(i.value)}}function En(){for(const[n,e]of Object.entries(ht))e.prime()}var hi={tna:ht,init:Dn,prime:En};const H={};let ee,tt,ki,Zt=!0;function Tn(){H.insert=new y("meter_insert"),H.debug=new y("meter_debug"),H.twirl=new gt("meter_twirl").target("meter_twirl_button").show(),H.twirl.onExecute=async s=>{s.toggle(),H.insert.toggle(),H.debug.toggle(),H.gen_item.view(s.value),R.update(),s.value&&await s.delay(300),n.set(s.value)},ee=new xi("meter_progress"),tt=new xi("meter_VU").view(),tt.dFlag.innerText="flag",tt.onPeak=s=>console.warn(`${s.id} peak ${s.lastPeak}`),H.gen_item=new x("meter_gen_item").fuse();const n=new Tt("meter_gen").enable();n.onChange=s=>{console.log(`${s.id} onChange`),Zt=s.value,Zt?ki=setInterval(In,100):clearInterval(ki),tt.run=Zt};const e=new M("meter_button_1").enable();e.label="Strip",e.status="show",e.value=!1,e.icon().displayIcon(!1),e.iStatus.symbol("refresh_run").size(20).def(),e.onExecute=async s=>{tt.busy(!s.value),s.status="",s.displayIcon(!s.value),s.iStatus.view(!s.value).choreo("spin").timing(s.value,1e3).act(),await s.delay(500),s.value^=!0,s.status=s.value?"hide":"show"};const t=new M("meter_button_2").enable();t.label="Flag",t.status="hide",t.value=!0,t.onExecute=async s=>{tt.flag=!s.value,await s.delay(500),s.value^=!0,s.status=s.value?"hide":"show"};const i=new M("meter_button_3").enable();i.label="Peak",i.status="hide",i.value=!0,i.onExecute=async s=>{tt.view(!s.value),await s.delay(500),s.value^=!0,s.status=s.value?"hide":"show"}}function $n(){for(const[n,e]of Object.entries(H))e.prime()}let Lt=0;function In(){const n=Math.round(Math.random()*100);tt.set(n),Lt+=2,Lt=Lt>120?0:Lt,ee.set(Lt)}var ci={tna:H,init:Tn,prime:$n};const Pn=12,Sn=30,I={};let rt,Dt,v,Li,pt;function Cn(){I.insert=new y("numbler_insert"),I.debug=new y("numbler_debug"),I.twirl=new gt("numbler_twirl").target("numbler_twirl_button").show(),I.twirl.onExecute=s=>{s.toggle(),I.insert.toggle(s.value),I.debug.toggle(s.value),I.debug_item.view(s.value),R.update(),s.value||t.set(!1)},rt=new li("odo"),rt.init(10,10,10,10).format().limit(0,9999).speed(1.5).loop().enable(),rt.onChange=s=>Dt.enable(s.value!=0),Dt=new M("odo_button").enable(),Dt.label="Reset",Dt.onExecute=()=>rt.spin(0),window.odo_prompt.innerText=`max ${rt._limitH}`,v=new yn("time"),v.hours.set(Pn),v.mins.set(Sn),v.onChange=()=>i.ext_update(i),Li=new kn("time_edit").show(),Li.onExecute=s=>{s.toggle(),v.edit(s.value)};const n=new Tt("mode24").enable();n.value=!1,n.onChange=s=>v.format(s.value),I.debug_item=new x("numbler_debug_item").fuse();const e=new Tt("numbler_debug_toggle").enable();e.value=!1,e.onChange=s=>{v.tron(s.value),rt.tron(s.value),I.insert.div.classList.toggle("debug",s.value)};const t=new Tt("numbler_bts").enable();t.value=!1,t.onChange=s=>{v.bts(s.value);const o=window.time_wrap;o.classList.toggle("bts",s.value),s.value?I.insert.div.insertAdjacentElement("beforebegin",o):I.insert.div.insertAdjacentElement("afterbegin",o)};const i=new M("numbler_button_1").enable();i.value=!1,i.status="start",i.icon().displayIcon(!1),i.iStatus.symbol("refresh_run").size(20).def(),i.ext_update=s=>s.label=v.value,i.onExecute=async s=>{const o=v.hours.value,l=v.mins.value;(o>0||l>1)&&pt==null?(pt=setInterval(Di,1e3),Di()):pt=clearInterval(pt),s.status="",s.displayIcon(!s.value),s.iStatus.view(!s.value).choreo("spin").timing(s.value,1e3).act(),await s.delay(500),s.value^=!0,s.status=s.value?"stop":"start"},n.onChange(n),e.onChange(e)}function Di(){const n=v.hours.value,e=v.mins.value;e>0?v.mins.spin(e-1):n>0&&(v.hours.spin(n-1),v.mins.spin(59)),n==0&&e==0&&(pt=clearInterval(pt),updateCount())}function Mn(){for(const[n,e]of Object.entries(I))e.prime();Dt.enable(rt.value!=0),v.onChange(v)}var ui={tna:I,init:Cn,prime:Mn};const P={};function Fn(){P.insert=new y("radio_insert"),P.twirl=new gt("bar_twirl").target("bar_twirl_button").show(),P.twirl.onExecute=s=>{s.toggle(),P.insert.toggle(s.value),R.update()},P.radio=new yi("radio").merge(),P.radio_dmm=new yi("radio_dmm").init(3);let n;n=P.radio_dmm.label(0).createDivFirst("radio_icon_0"),new C(n).static().show().symbol("x").def().size(12),n=P.radio_dmm.label(1).createDivFirst("radio_icon_1"),new C(n).static().show().symbol("vol_1").def().translate(12,0).size(20),n=P.radio_dmm.label(2).createDivFirst("radio_icon_2"),new C(n).static().show().symbol("vol_2").def().size(20)}function On(){for(const[n,e]of Object.entries(P))e.prime();P.radio.index(1),P.radio_dmm.index(0)}var fi={tna:P,init:Fn,prime:On};const F={};let ot;function An(){F.insert=new y("safe_insert").prime(),F.debug=new y("safe_debug").prime(),F.twirl=new gt("safe_twirl").target("safe_item").show(),F.twirl.onExecute=t=>{t.toggle(),F.insert.toggle(t.value),F.debug.toggle(t.value),F.mode_item.view(t.value),R.update()};const n=new fn("safeSlide_test").enable();n.sticky=!0,n.autoReset=!1,n.onBegin=t=>{t._ready=!0},n.onPrime=async t=>{t.status="processing",t.drawStatus(),await t.delay(500),t.value="100%",t.blink(),t.update(),await t.delay(2e3),t.commit()},n.onCommit=async t=>{t.autoReset||(await t.delay(500),e.value=!1,e.ext_label(e))},ut.add(n),F.mode_item=new x("safe_mode_item").fuse(),ot=new Tt("safe_mode").enable(),ot.value=!1,ot.ext_label=t=>{window.safe_mode_label.innerText=t.value?"Multi":"Single"},ot.ext_label(ot),ot.onExecute=t=>{n.autoReset=t.value,t.ext_label(t),t.value&&(n.enable(),e.value=!0,e.ext_label(e))},F.mode=ot;const e=new M("safe_button").enable();e.value=!0,e.ext_label=t=>{t.label=t.value?"Disable":"Enable"},e.ext_label(e),e.onExecute=t=>{t.value^=!0,t.ext_label(t),n.enable(t.value)}}function Rn(){for(const[n,e]of Object.entries(F))e.prime()}var gi={tna:F,init:An,prime:Rn};const q={};let nt,Ei,Ti,$i;function Nn(){q.insert=new y("slide_insert"),q.debug=new y("slide_debug"),q.twirl=new gt("slide_twirl").target("slide_twirl_button").show(),q.twirl.onExecute=n=>{n.toggle(),q.insert.toggle(n.value),q.debug.toggle(n.value),R.update()},q.slide=nt=new te("slide").range(1,10).init(5),nt.onChange=n=>{window.slide_value.innerText=n._val,hi.tna.icon.size(6+n.value/n._maxVal*30)},nt.onEnd=()=>ut.write("slide done"),ut.add(nt),Ei=new M("slide_fill_button").enable(),Jt(Ei,"attrFill",!0,"Bar","fill","none"),Ti=new M("slide_fade_button").enable(),Jt(Ti,"attrFade",!1,"Fade"),$i=new M("slide_rule_button").enable(),Jt($i,"attrRule",!1,"Rule")}function Jt(n,e,t,i,s="on",o="off"){n.value=t,n.label=i,n.ext_label=l=>{l.div.classList.toggle("on",l.value),l.status=l.value?s:o},n.onExecute=async l=>{nt[e](!l.value),nt.draw(!0),l.status="",await l.delay(500),l.value^=!0,l.ext_label(l)},n.ext_label(n)}function Hn(){for(const[n,e]of Object.entries(q))e.prime();nt.onChange(nt)}var vi={tna:q,init:Nn,prime:Hn};const p={},Bn={};let it;function Vn(){p.insert=new y("dial_insert"),p.debug=new y("dial_debug").dynamic(),p.twirl=new gt("dial_twirl").target("dial_twirl_button").show(),p.twirl.onExecute=e=>{e.toggle(),p.insert.toggle(e.value),p.debug.toggle(e.value),R.update()},p.dial1=new Yt("dial_1").tag("dial").grad(!1),p.dial1.onChange=e=>{window.dial_1_value.innerText=Math.round(e.value*100)},p.dial2=new Yt("dial_2").tag("dial").head(),p.dial2.onChange=e=>{window.dial_2_value.innerText=Math.round(e.value*100)},p.dial3=new Yt("dial_3").tag("dial"),it=new te("dial_slide").range(0,100).init(50),it.onChange=e=>{for(const[t,i]of Object.entries(p))i.hasTag("dial")&&i.set(e.value/100)},it.onChange(it);const n=new M("dial_button").enable();n.label="Set to 0.5",n.onExecute=async e=>{for(const[i,s]of Object.entries(p))s.hasTag("dial")&&s.move(.5,750);it.init(.5*it._maxVal)}}function zn(){p.insert.prime();for(const[e,t]of Object.entries(p))t.prime();const n=.33;for(const[e,t]of Object.entries(p))t.hasTag("dial")&&t.show().set(n);it.init(n*it._maxVal)}var se={tna:p,prop:Bn,init:Vn,prime:zn};async function Wn(){ut.assign("tron_output"),window.diag_client.classList.add("show"),window.diag_client.onclick=window.diag_firmware.onclick=()=>window.location="/update/",ve.init(),R.init(),b.init(),st.init(),hi.init(),ci.init(),ui.init(),fi.init(),gi.init(),vi.init(),se.init(),b.patch(),_.monitor(b.prop.preflight),!b.prop.preflight&&Ks.init()}b.upon.open=R.stage;b.upon.prime=()=>{R.prime(),hi.prime(),ci.prime(),ui.prime(),fi.prime(),gi.prime(),vi.prime(),se.prime(),window.page.classList.add("show")};R.prop.onUpdate=n=>{const e=R.item;try{e.numbler_help.toggle(n&&ui.tna.twirl.value),e.radio_help.toggle(n&&fi.tna.twirl.value),e.meter_help.toggle(n&&ci.tna.twirl.value),e.safe_help.toggle(n&&gi.tna.twirl.value),e.slide_help.toggle(n&&vi.tna.twirl.value)}catch{}};window.addEventListener("load",Wn);
